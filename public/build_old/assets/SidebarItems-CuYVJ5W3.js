import{r as n,j as i}from"./client-ZKQMN23D.js";import{a as j}from"./axios-CMJq23T0.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BDIa4gQt.js";const g=({initialContent:x,filter:t,selectedCountry:l,onChangeItemCount:o,lang:h})=>{const[r,p]=n.useState();return n.useEffect(()=>{if(!(l!=null&&l.id)){p([]);return}const a={...t};a.collection?a.collection=(Array.isArray(a.collection)?a.collection.join(","):a.collection)+","+l.id:a.collection=l.id;const c=new AbortController;return j.get("/api/content/search",{params:{filter:a,page:{size:25},lang:h},signal:c.signal}).then(s=>{s.data&&p(s.data.data)}).catch(s=>{console.warn("load items",s)}),()=>{c.abort()}},[t,h,l==null?void 0:l.id]),n.useEffect(()=>{o&&o((r==null?void 0:r.length)||0)},[r,o]),i.jsx(i.Fragment,{children:l&&(r!=null&&r.length)?i.jsxs(i.Fragment,{children:[i.jsx("h3",{children:l.name}),i.jsx("ul",{children:r==null?void 0:r.map(a=>{var c,s;return i.jsxs("li",{children:[i.jsx("img",{src:(c=a.images.at(0))==null?void 0:c.lead}),i.jsx("h4",{children:a.title||""}),i.jsx("span",{className:"map_sidebar_item_date",children:a.publish_at_str}),i.jsx("a",{href:a.permalink,children:a.title}),!!((s=a.collections)!=null&&s.length)&&i.jsx("span",{className:"map_sidebar_item_collections",children:a.collections.join(", ")})]},a.id)})})]}):x})};export{g as SidebarItems};
