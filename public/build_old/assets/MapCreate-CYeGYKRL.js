import{R as T,j as s,r as O}from"./client-ZKQMN23D.js";import{d as xt}from"./index-Cvft0mqj.js";import{l as Se}from"./lodash-BYTxXjAY.js";import{s as pe}from"./useSlotProps-5g1mADCy.js";import{B as at}from"./Button-8kMDeHcM.js";import{S as Be}from"./Slider-OTv9EZjQ.js";import{T as fe}from"./TextField-sycmgB1j.js";import{I as St}from"./InputAdornment-Cwt13x1-.js";import{P as yt}from"./Menu-BdDXEdD9.js";import{B as ge}from"./Box-CGz8vZlR.js";import{l as wt}from"./index.m-DI45-rQC.js";import{S as Ct}from"./Section-B0wFAljV.js";import"./app-CjGU7BLD.js";import{A as jt,S as He}from"./AppBarHeader-Dnn-Kh70.js";import{C as Mt}from"./ContentScroll-CQWUddHm.js";import{Legend as Nt}from"./Legend-BmKpk4Dx.js";import{Map as At}from"./Map-CJuo-nUz.js";import{P as Le}from"./List-g_COJ0Le.js";import{T as he}from"./Typography-DYGSvwsR.js";import{R as kt,a as Vt}from"./RadioGroup-DbirDKvy.js";import{T as Oe,a as Ce,b as Pe}from"./TableRow-B3upNWdu.js";import{T as _e}from"./TableHead-CbBxbIBo.js";import{T as Z}from"./TableCell-ChGbszKc.js";import{F as It}from"./FormControlLabel-Dfpu1yJj.js";import{G as Rt}from"./GlobalStyles-BztJkOC0.js";import"./_commonjsHelpers-BosuxZz1.js";import"./browser-D9eauH0H.js";import"./index-edoyAQHv.js";import"./index-D4Gjge3h.js";import"./identifier-COQS9w1e.js";import"./extendSxProp-BsQwgIIR.js";import"./ButtonBase-D7fXzbc-.js";import"./Grow-sQgJtlQN.js";import"./useTheme-BwdP6VHP.js";import"./useThemeWithoutDefault-CDyP3F16.js";import"./FormLabel-BwLMeq7e.js";import"./useFormControl-CO6OogGI.js";import"./Select-BviP6ddm.js";import"./index-DxE8ywAI.js";import"./dayjs.min-BIwLhz4I.js";import"./utc-BUuWioZ3.js";import"./ThemeProvider-BEZwFSXz.js";import"./useThemeProps-BhHsu7W2.js";import"./getThemeProps-wzNSIbEv.js";import"./Close-Cx_ZrGyk.js";import"./ListItemIcon-CrE8LiDf.js";import"./ListItemText-Cm8rKoNI.js";import"./Tooltip-BU7xgxFh.js";import"./Popper-C2x4ipkJ.js";import"./usePreviousProps-eB1Ppz6I.js";import"./MenuItem-BQV6VCqx.js";import"./SwitchBase-XH_hwTUJ.js";import"./ua-parser-BZV2fO3c.js";import"./index-D3ylJrlI.js";import"./useMediaQuery-Cj2Lsz-Q.js";import"./FormGroup-Df_N7key.js";import"./Stack-D_Bp_Uwa.js";const Dt="linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%) /*! @noflip */",$t="linear-gradient(to top, #000000, transparent), linear-gradient(to right, #ffffff, transparent) /*! @noflip */",Ft={Button:pe(at)(()=>({backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px",transition:"none",boxShadow:"0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08)",border:0,borderRadius:4,width:"24px",aspectRatio:"1 / 1",height:"24px",minWidth:0}))},Bt=e=>{const{bgColor:t,className:r,disablePopover:a,isBgColorValid:n,...i}=e;return s.jsx(Ft.Button,{disableTouchRipple:!0,style:{backgroundColor:n?t:void 0,backgroundImage:n?void 0:Dt,cursor:a?"default":void 0},className:`MuiColorInput-Button ${r||""}`,...i})},Et={Container:pe("div")(()=>({width:300,padding:8}))},Tt=({children:e,className:t,position:r="start",...a})=>s.jsx(yt,{className:`MuiColorInput-Popover ${t||""}`,anchorOrigin:{vertical:"bottom",horizontal:r==="start"?"left":"right"},transformOrigin:{vertical:"top",horizontal:r==="start"?"left":"right"},...a,children:s.jsx(Et.Container,{children:e})}),Ht={Slider:pe(Be,{shouldForwardProp:e=>e!=="$rgbaFrom"&&e!=="$rgbaTo"})(()=>({height:8,"& .MuiSlider-rail":{opacity:1,background:"linear-gradient(to right, rgba(var(--rgb-r), var(--rgb-g), var(--rgb-b), 0) 0%, rgba(var(--rgb-r), var(--rgb-g), var(--rgb-b), 1) 100%)"},"& .MuiSlider-track":{color:"transparent",border:0},"& .MuiSlider-thumb":{backgroundColor:"#ffffff",border:"3px solid currentColor"}}))},Lt=e=>{const{rgbColor:t,style:r,className:a,...n}=e,i={"--rgb-r":t.r,"--rgb-g":t.g,"--rgb-b":t.b,...r};return s.jsx(Ht.Slider,{className:`MuiColorInput-AlphaSlider ${a||""}`,style:i,...n})},je={up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},Ot={ArrowUp:{type:"hsvV",value:1},ArrowDown:{type:"hsvV",value:-1},ArrowLeft:{type:"hsvS",value:-1},ArrowRight:{type:"hsvS",value:1}};function Pt(e){return e===je.up||e===je.down||e===je.left||e===je.right}function Ae(e,t,r){return Math.max(t,Math.min(e,r))}function We(e){return typeof e=="number"}function ze(e,t,r){const a=e.toLocaleString("en",{useGrouping:!1,minimumFractionDigits:t,maximumFractionDigits:r});return Number(a)}function _t(e,t,r){const a=e.getBoundingClientRect(),n=t-a.left,i=r-a.top;return{x:Ae(n/a.width,0,1),y:Ae(1-i/a.height,0,1)}}function Wt(e){const t=T.useRef();return t.current=e,T.useCallback((...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}const qe={Space:pe("div")(()=>({width:"100%",height:"180px",boxSizing:"border-box",outline:0,position:"relative",backgroundImage:$t})),Thumb:pe("div")(()=>({position:"absolute",border:"3px solid #ffffff",borderRadius:"50%",width:"20px",height:"20px",marginLeft:"-10px /*! @noflip */",marginBottom:"-10px /*! @noflip */",outline:0,boxSizing:"border-box",willChange:"left, bottom",transition:"box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{boxShadow:"0px 0px 0px 4px rgba(255 255 255 / 0.16)"},"&.MuiColorInput-Thumb-active":{boxShadow:"0px 0px 0px 8px rgba(255 255 255 / 0.16)"},"@media (hover: none)":{boxShadow:"none"}}))},zt=e=>{const{hsv:t,onChange:r,currentHue:a}=e,n=T.useRef(!1),i=T.useRef(null),[o,f]=T.useState(!1),v=Wt((C,A)=>{if(!i.current)return;const{x,y:D}=_t(i.current,C,A);r({s:x,v:D}),i.current&&document.activeElement!==i.current&&i.current.focus()}),N=T.useCallback(()=>{n.current&&(n.current=!1,f(!1))},[]),m=T.useCallback(C=>{n.current&&v(C.clientX,C.clientY)},[]);T.useEffect(()=>(document.addEventListener("pointermove",m,!1),document.addEventListener("pointerup",N,!1),()=>{document.removeEventListener("pointermove",m,!1),document.removeEventListener("pointerup",N,!1)}),[N,m]);const g=C=>{C.preventDefault(),n.current=!0,v(C.clientX,C.clientY),f(!0)},S=C=>{if(Pt(C.key)){C.preventDefault();const{type:A,value:x}=Ot[C.key],D=C.shiftKey?10:1,P=A==="hsvS"?t.s:t.v,W=Ae(P+x*D*.01,0,1);f(!0),r({s:A==="hsvS"?W:t.s,v:A==="hsvV"?W:t.v})}},w=t.s*100,b=t.v*100;return s.jsx(qe.Space,{onPointerDown:g,ref:i,className:"MuiColorInput-ColorSpace",style:{backgroundColor:`hsl(${a} 100% 50%)`,touchAction:"none"},role:"slider","aria-valuetext":`Saturation ${ze(w,0,0)}%, Brightness ${ze(b,0,0)}%`,onKeyDown:S,tabIndex:0,children:s.jsx(qe.Thumb,{"aria-label":"Color space thumb",className:o?"MuiColorInput-Thumb-active":"",style:{left:`${w}%`,bottom:`${b}%`}})})},qt={Slider:pe(Be)(()=>({height:8,"& .MuiSlider-rail":{opacity:1,background:"linear-gradient(to right, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%) /*! @noflip */"},"& .MuiSlider-track":{color:"transparent",border:0},"& .MuiSlider-thumb":{backgroundColor:"#ffffff",border:"3px solid currentColor"}}))},Kt=e=>{const{className:t,...r}=e;return s.jsx(qt.Slider,{className:`MuiColorInput-HueSlider ${t||""}`,...r})};function Gt(e){return typeof e=="string"}function X(e,t){Ut(e)&&(e="100%");const r=Zt(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Me(e){return Math.min(1,Math.max(0,e))}function Ut(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Zt(e){return typeof e=="string"&&e.indexOf("%")!==-1}function nt(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ne(e){return Number(e)<=1?`${Number(e)*100}%`:e}function de(e){return e.length===1?"0"+e:String(e)}function Xt(e,t,r){return{r:X(e,255)*255,g:X(t,255)*255,b:X(r,255)*255}}function Ke(e,t,r){e=X(e,255),t=X(t,255),r=X(r,255);const a=Math.max(e,t,r),n=Math.min(e,t,r);let i=0,o=0;const f=(a+n)/2;if(a===n)o=0,i=0;else{const v=a-n;switch(o=f>.5?v/(2-a-n):v/(a+n),a){case e:i=(t-r)/v+(t<r?6:0);break;case t:i=(r-e)/v+2;break;case r:i=(e-t)/v+4;break}i/=6}return{h:i,s:o,l:f}}function Ie(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Yt(e,t,r){let a,n,i;if(e=X(e,360),t=X(t,100),r=X(r,100),t===0)n=r,i=r,a=r;else{const o=r<.5?r*(1+t):r+t-r*t,f=2*r-o;a=Ie(f,o,e+1/3),n=Ie(f,o,e),i=Ie(f,o,e-1/3)}return{r:a*255,g:n*255,b:i*255}}function Ge(e,t,r){e=X(e,255),t=X(t,255),r=X(r,255);const a=Math.max(e,t,r),n=Math.min(e,t,r);let i=0;const o=a,f=a-n,v=a===0?0:f/a;if(a===n)i=0;else{switch(a){case e:i=(t-r)/f+(t<r?6:0);break;case t:i=(r-e)/f+2;break;case r:i=(e-t)/f+4;break}i/=6}return{h:i,s:v,v:o}}function Jt(e,t,r){e=X(e,360)*6,t=X(t,100),r=X(r,100);const a=Math.floor(e),n=e-a,i=r*(1-t),o=r*(1-n*t),f=r*(1-(1-n)*t),v=a%6,N=[r,o,i,i,f,r][v],m=[f,r,r,o,i,i][v],g=[i,i,f,r,r,o][v];return{r:N*255,g:m*255,b:g*255}}function Ue(e,t,r,a){const n=[de(Math.round(e).toString(16)),de(Math.round(t).toString(16)),de(Math.round(r).toString(16))];return a&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Qt(e,t,r,a,n){const i=[de(Math.round(e).toString(16)),de(Math.round(t).toString(16)),de(Math.round(r).toString(16)),de(er(a))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function er(e){return Math.round(parseFloat(e)*255).toString(16)}function Ze(e){return Q(e)/255}function Q(e){return parseInt(e,16)}function tr(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}const Fe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function rr(e){let t={r:0,g:0,b:0},r=1,a=null,n=null,i=null,o=!1,f=!1;return typeof e=="string"&&(e=ir(e)),typeof e=="object"&&(ie(e.r)&&ie(e.g)&&ie(e.b)?(t=Xt(e.r,e.g,e.b),o=!0,f=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ie(e.h)&&ie(e.s)&&ie(e.v)?(a=Ne(e.s),n=Ne(e.v),t=Jt(e.h,a,n),o=!0,f="hsv"):ie(e.h)&&ie(e.s)&&ie(e.l)&&(a=Ne(e.s),i=Ne(e.l),t=Yt(e.h,a,i),o=!0,f="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=nt(r),{ok:o,format:e.format||f,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}const ar="[-\\+]?\\d+%?",nr="[-\\+]?\\d*\\.\\d+%?",ue="(?:"+nr+")|(?:"+ar+")",Re="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?",De="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?",ee={CSS_UNIT:new RegExp(ue),rgb:new RegExp("rgb"+Re),rgba:new RegExp("rgba"+De),hsl:new RegExp("hsl"+Re),hsla:new RegExp("hsla"+De),hsv:new RegExp("hsv"+Re),hsva:new RegExp("hsva"+De),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ir(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(Fe[e])e=Fe[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let r=ee.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=ee.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ee.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=ee.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ee.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=ee.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ee.hex8.exec(e),r?{r:Q(r[1]),g:Q(r[2]),b:Q(r[3]),a:Ze(r[4]),format:t?"name":"hex8"}:(r=ee.hex6.exec(e),r?{r:Q(r[1]),g:Q(r[2]),b:Q(r[3]),format:t?"name":"hex"}:(r=ee.hex4.exec(e),r?{r:Q(r[1]+r[1]),g:Q(r[2]+r[2]),b:Q(r[3]+r[3]),a:Ze(r[4]+r[4]),format:t?"name":"hex8"}:(r=ee.hex3.exec(e),r?{r:Q(r[1]+r[1]),g:Q(r[2]+r[2]),b:Q(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function ie(e){return!!ee.CSS_UNIT.exec(String(e))}class I{constructor(t="",r={}){if(t instanceof I)return t;typeof t=="number"&&(t=tr(t)),this.originalInput=t;const a=rr(t);this.originalInput=t,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=r.format??a.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){const t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){const t=this.toRgb();let r,a,n;const i=t.r/255,o=t.g/255,f=t.b/255;return i<=.03928?r=i/12.92:r=Math.pow((i+.055)/1.055,2.4),o<=.03928?a=o/12.92:a=Math.pow((o+.055)/1.055,2.4),f<=.03928?n=f/12.92:n=Math.pow((f+.055)/1.055,2.4),.2126*r+.7152*a+.0722*n}getAlpha(){return this.a}setAlpha(t){return this.a=nt(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){const{s:t}=this.toHsl();return t===0}toHsv(){const t=Ge(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=Ge(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),n=Math.round(t.v*100);return this.a===1?`hsv(${r}, ${a}%, ${n}%)`:`hsva(${r}, ${a}%, ${n}%, ${this.roundA})`}toHsl(){const t=Ke(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=Ke(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),n=Math.round(t.l*100);return this.a===1?`hsl(${r}, ${a}%, ${n}%)`:`hsla(${r}, ${a}%, ${n}%, ${this.roundA})`}toHex(t=!1){return Ue(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return Qt(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){const t=Math.round(this.r),r=Math.round(this.g),a=Math.round(this.b);return this.a===1?`rgb(${t}, ${r}, ${a})`:`rgba(${t}, ${r}, ${a}, ${this.roundA})`}toPercentageRgb(){const t=r=>`${Math.round(X(r,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=r=>Math.round(X(r,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;const t="#"+Ue(this.r,this.g,this.b,!1);for(const[r,a]of Object.entries(Fe))if(t===a)return r;return!1}toString(t){const r=!!t;t=t??this.format;let a=!1;const n=this.a<1&&this.a>=0;return!r&&n&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new I(this.toString())}lighten(t=10){const r=this.toHsl();return r.l+=t/100,r.l=Me(r.l),new I(r)}brighten(t=10){const r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new I(r)}darken(t=10){const r=this.toHsl();return r.l-=t/100,r.l=Me(r.l),new I(r)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){const r=this.toHsl();return r.s-=t/100,r.s=Me(r.s),new I(r)}saturate(t=10){const r=this.toHsl();return r.s+=t/100,r.s=Me(r.s),new I(r)}greyscale(){return this.desaturate(100)}spin(t){const r=this.toHsl(),a=(r.h+t)%360;return r.h=a<0?360+a:a,new I(r)}mix(t,r=50){const a=this.toRgb(),n=new I(t).toRgb(),i=r/100,o={r:(n.r-a.r)*i+a.r,g:(n.g-a.g)*i+a.g,b:(n.b-a.b)*i+a.b,a:(n.a-a.a)*i+a.a};return new I(o)}analogous(t=6,r=30){const a=this.toHsl(),n=360/r,i=[this];for(a.h=(a.h-(n*t>>1)+720)%360;--t;)a.h=(a.h+n)%360,i.push(new I(a));return i}complement(){const t=this.toHsl();return t.h=(t.h+180)%360,new I(t)}monochromatic(t=6){const r=this.toHsv(),{h:a}=r,{s:n}=r;let{v:i}=r;const o=[],f=1/t;for(;t--;)o.push(new I({h:a,s:n,v:i})),i=(i+f)%1;return o}splitcomplement(){const t=this.toHsl(),{h:r}=t;return[this,new I({h:(r+72)%360,s:t.s,l:t.l}),new I({h:(r+216)%360,s:t.s,l:t.l})]}onBackground(t){const r=this.toRgb(),a=new I(t).toRgb(),n=r.a+a.a*(1-r.a);return new I({r:(r.r*r.a+a.r*a.a*(1-r.a))/n,g:(r.g*r.a+a.g*a.a*(1-r.a))/n,b:(r.b*r.a+a.b*a.a*(1-r.a))/n,a:n})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){const r=this.toHsl(),{h:a}=r,n=[this],i=360/t;for(let o=1;o<t;o++)n.push(new I({h:(a+o*i)%360,s:r.s,l:r.l}));return n}equals(t){return this.toRgbString()===new I(t).toRgbString()}}function me(e,t){return e.toString(t)}function Xe(e,t,r){return new I(e,r)}function or(e){return Gt(e)?e:new I(e).toString()}const sr=e=>{const{currentColor:t,format:r,onChange:a,isAlphaHidden:n}=e,[i,o]=T.useState(t.toHsv()),f=(m,g)=>{if(!We(g))return;const S=Ae(360*g/100,0,359);o(b=>({...b,h:S}));const w=new I({...i,a:t.toHsv().a,h:S});a==null||a(me(w,r))},v=(m,g)=>{if(!We(g))return;const S=t.clone().setAlpha(g);a==null||a(me(S,r))},N=({s:m,v:g})=>{const S=new I({h:i.h,a:t.toHsv().a,s:m,v:g});o(w=>({...w,s:m,v:g})),a==null||a(me(S,r))};return s.jsxs(ge,{className:"MuiColorInput-PopoverBody",children:[s.jsx(zt,{currentHue:i.h,hsv:i,onChange:N}),s.jsx(ge,{mt:"10px",px:"3px",children:s.jsx(Kt,{min:0,max:100,step:1,onChange:f,"aria-label":"hue",value:i.h*100/360})}),n?null:s.jsx(ge,{mt:"10px",px:"3px",children:s.jsx(Lt,{min:0,max:1,step:.01,"aria-label":"alpha",rgbColor:t.toRgb(),onChange:v,value:t.getAlpha()})})]})},lr=T.forwardRef((e,t)=>{const{className:r,...a}=e;return s.jsx(fe,{className:`MuiColorInput-TextField ${r||""}`,ref:t,...a})}),ur="black",fr="rgb";function cr(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function Ye(e,t){typeof t=="function"?t(e):t&&cr(t)&&"current"in t&&(t.current=e)}const dr=T.forwardRef((e,t)=>{const{value:r,format:a,onChange:n,adornmentPosition:i="start",PopoverProps:o,Adornment:f=Bt,fallbackValue:v,isAlphaHidden:N,disablePopover:m,...g}=e,{onBlur:S,InputProps:w,...b}=g,{onClose:C,...A}=o||{},x=v||ur,D=b.disabled||(w==null?void 0:w.disabled)||!1,P=T.useRef(null),W=T.useRef(null),[U,l]=T.useState(null),h=a||fr,u=Xe(r,x,{format:h}),[p,V]=T.useState(r),[F,z]=T.useState(r),Y=k=>{k.preventDefault(),k.stopPropagation(),!D&&!m&&l(P.current)},_=k=>{const L=new I(k);n==null||n(k,{hex:L.isValid?L.toHexString():"",hsv:L.isValid?L.toHsvString():"",hsl:L.isValid?L.toHslString():"",rgb:L.isValid?L.toRgbString():"",hex8:L.isValid?L.toHex8String():""})},te=k=>{const L=k.target.value;if(V(L),L==="")z(""),_("");else{const xe=new I(L),re=me(xe,h);z(re),_(re)}},y=(...k)=>{C==null||C(...k),l(null),queueMicrotask(()=>{var L;(L=W.current)==null||L.focus()})},j=k=>{S==null||S(k);const L=new I(p);if(L.isValid)L.format!==h&&V(me(L,h));else{if(p==="")return;const xe=new I(x),re=me(xe,h);V(re),z(re),_(re)}};T.useEffect(()=>{if(r!==F){const k=Xe(r).originalInput;z(k),V(k)}},[r,F,x]);const $=k=>{V(k),z(k),_(k)},q=k=>{P.current=k,t&&Ye(k,t)},G=k=>{W.current=k,W&&Ye(k,W)},H=!!U,K=H?"color-popover":void 0,ae=s.jsx(St,{position:i,children:s.jsx(f,{disabled:D,"aria-describedby":K,disablePopover:m||!1,component:m?"span":void 0,bgColor:u.toString(),isBgColorValid:!!(p!==""&&u.isValid),onClick:m?void 0:Y})}),be=i==="start"?{startAdornment:ae}:{endAdornment:ae};return s.jsxs(s.Fragment,{children:[s.jsx(lr,{ref:q,spellCheck:"false",type:"text",autoComplete:"off",onChange:te,value:or(p),onBlur:j,inputRef:G,disabled:D,InputProps:{...be,...w},...b}),m?null:s.jsx(Tt,{id:K,open:H,position:i,anchorEl:U,onClose:y,...A,children:s.jsx(sr,{onChange:$,currentColor:u,format:h,isAlphaHidden:N})})]})});function it(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}var ye;(function(e){e.event="event",e.props="prop"})(ye||(ye={}));function le(){}function hr(e){var t,r=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return t&&a.length===t.length&&a.every(function(i,o){return i===t[o]})||(t=a,r=e.apply(void 0,a)),r}}function we(e){return!!(e||"").match(/\d/)}function ve(e){return e==null}function gr(e){return typeof e=="number"&&isNaN(e)}function ot(e){return ve(e)||gr(e)||typeof e=="number"&&!isFinite(e)}function st(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function mr(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function vr(e,t,r){var a=mr(r),n=e.search(/[1-9]/);return n=n===-1?e.length:n,e.substring(0,n)+e.substring(n,e.length).replace(a,"$1"+t)}function pr(e){var t=O.useRef(e);t.current=e;var r=O.useRef(function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return t.current.apply(t,a)});return r.current}function Ee(e,t){t===void 0&&(t=!0);var r=e[0]==="-",a=r&&t;e=e.replace("-","");var n=e.split("."),i=n[0],o=n[1]||"";return{beforeDecimal:i,afterDecimal:o,hasNegation:r,addNegation:a}}function br(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var r=e.split("."),a=r[0].replace(/^0+/,"")||"0",n=r[1]||"";return(t?"-":"")+a+(n?"."+n:"")}function lt(e,t,r){for(var a="",n=r?"0":"",i=0;i<=t-1;i++)a+=e[i]||n;return a}function Je(e,t){return Array(t+1).join(e)}function ut(e){var t=e+"",r=t[0]==="-"?"-":"";r&&(t=t.substring(1));var a=t.split(/[eE]/g),n=a[0],i=a[1];if(i=Number(i),!i)return r+n;n=n.replace(".","");var o=1+i,f=n.length;return o<0?n="0."+Je("0",Math.abs(o))+n:o>=f?n=n+Je("0",o-f):n=(n.substring(0,o)||"0")+"."+n.substring(o),r+n}function Qe(e,t,r){if(["","-"].indexOf(e)!==-1)return e;var a=(e.indexOf(".")!==-1||r)&&t,n=Ee(e),i=n.beforeDecimal,o=n.afterDecimal,f=n.hasNegation,v=parseFloat("0."+(o||"0")),N=o.length<=t?"0."+o:v.toFixed(t),m=N.split("."),g=i;i&&Number(m[0])&&(g=i.split("").reverse().reduce(function(C,A,x){return C.length>x?(Number(C[0])+Number(A)).toString()+C.substring(1,C.length):A+C},m[0]));var S=lt(m[1]||"",t,r),w=f?"-":"",b=a?".":"";return""+w+g+b+S}function ce(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var ft=hr(function(e,t){for(var r=0,a=0,n=e.length,i=t.length;e[r]===t[r]&&r<n;)r++;for(;e[n-1-a]===t[i-1-a]&&i-a>r&&n-a>r;)a++;return{from:{start:r,end:n-a},to:{start:r,end:i-a}}}),xr=function(e,t){var r=Math.min(e.selectionStart,t);return{from:{start:r,end:e.selectionEnd},to:{start:r,end:t}}};function Sr(e,t,r){return Math.min(Math.max(e,t),r)}function $e(e){return Math.max(e.selectionStart,e.selectionEnd)}function yr(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function wr(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Cr(e){var t=e.currentValue,r=e.formattedValue,a=e.currentValueIndex,n=e.formattedValueIndex;return t[a]===r[n]}function jr(e,t,r,a,n,i,o){o===void 0&&(o=Cr);var f=n.findIndex(function(W){return W}),v=e.slice(0,f);!t&&!r.startsWith(v)&&(t=v,r=v+r,a=a+v.length);for(var N=r.length,m=e.length,g={},S=new Array(N),w=0;w<N;w++){S[w]=-1;for(var b=0,C=m;b<C;b++){var A=o({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:w,formattedValueIndex:b});if(A&&g[b]!==!0){S[w]=b,g[b]=!0;break}}}for(var x=a;x<N&&(S[x]===-1||!i(r[x]));)x++;var D=x===N||S[x]===-1?m:S[x];for(x=a-1;x>0&&S[x]===-1;)x--;var P=x===-1||S[x]===-1?0:S[x]+1;return P>D?D:a-P<D-a?P:D}function et(e,t,r,a){var n=e.length;if(t=Sr(t,0,n),a==="left"){for(;t>=0&&!r[t];)t--;t===-1&&(t=r.indexOf(!0))}else{for(;t<=n&&!r[t];)t++;t>n&&(t=r.lastIndexOf(!0))}return t===-1&&(t=n),t}function Mr(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,a=t.length;r<a;r++)t[r]=!!(we(e[r])||we(e[r-1]));return t}function ct(e,t,r,a,n,i){i===void 0&&(i=le);var o=pr(function(b,C){var A,x;return ot(b)?(x="",A=""):typeof b=="number"||C?(x=typeof b=="number"?ut(b):b,A=a(x)):(x=n(b,void 0),A=a(x)),{formattedValue:A,numAsString:x}}),f=O.useState(function(){return o(ve(e)?t:e,r)}),v=f[0],N=f[1],m=function(b,C){b.formattedValue!==v.formattedValue&&N({formattedValue:b.formattedValue,numAsString:b.value}),i(b,C)},g=e,S=r;ve(e)&&(g=v.numAsString,S=!0);var w=o(g,S);return O.useMemo(function(){N(w)},[w.formattedValue]),[v,m]}function Nr(e){return e.replace(/[^0-9]/g,"")}function Ar(e){return e}function kr(e){var t=e.type;t===void 0&&(t="text");var r=e.displayType;r===void 0&&(r="input");var a=e.customInput,n=e.renderText,i=e.getInputRef,o=e.format;o===void 0&&(o=Ar);var f=e.removeFormatting;f===void 0&&(f=Nr);var v=e.defaultValue,N=e.valueIsNumericString,m=e.onValueChange,g=e.isAllowed,S=e.onChange;S===void 0&&(S=le);var w=e.onKeyDown;w===void 0&&(w=le);var b=e.onMouseUp;b===void 0&&(b=le);var C=e.onFocus;C===void 0&&(C=le);var A=e.onBlur;A===void 0&&(A=le);var x=e.value,D=e.getCaretBoundary;D===void 0&&(D=Mr);var P=e.isValidInputCharacter;P===void 0&&(P=we);var W=e.isCharacterSame,U=it(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),l=ct(x,v,!!N,o,f,m),h=l[0],u=h.formattedValue,p=h.numAsString,V=l[1],F=O.useRef(),z=O.useRef({formattedValue:u,numAsString:p}),Y=function(c,d){z.current={formattedValue:c.formattedValue,numAsString:c.value},V(c,d)},_=O.useState(!1),te=_[0],y=_[1],j=O.useRef(null),$=O.useRef({setCaretTimeout:null,focusTimeout:null});O.useEffect(function(){return y(!0),function(){clearTimeout($.current.setCaretTimeout),clearTimeout($.current.focusTimeout)}},[]);var q=o,G=function(c,d){var M=parseFloat(d);return{formattedValue:c,value:d,floatValue:isNaN(M)?void 0:M}},H=function(c,d,M){c.selectionStart===0&&c.selectionEnd===c.value.length||(ce(c,d),$.current.setCaretTimeout=setTimeout(function(){c.value===M&&c.selectionStart!==d&&ce(c,d)},0))},K=function(c,d,M){return et(c,d,D(c),M)},ae=function(c,d,M){var B=D(d),J=jr(d,u,c,M,B,P,W);return J=et(d,J,B),J},be=function(c){var d=c.formattedValue;d===void 0&&(d="");var M=c.input,B=c.source,J=c.event,E=c.numAsString,R;if(M){var ne=c.inputValue||M.value,oe=$e(M);M.value=d,R=ae(ne,d,oe),R!==void 0&&H(M,R,d)}d!==u&&Y(G(d,E),{event:J,source:B})};O.useEffect(function(){var c=z.current,d=c.formattedValue,M=c.numAsString;(u!==d||p!==M)&&Y(G(u,p),{event:void 0,source:ye.props})},[u,p]);var k=j.current?$e(j.current):void 0,L=typeof window<"u"?O.useLayoutEffect:O.useEffect;L(function(){var c=j.current;if(u!==z.current.formattedValue&&c){var d=ae(z.current.formattedValue,u,k);c.value=u,H(c,d,u)}},[u]);var xe=function(c,d,M){var B=d.target,J=F.current?xr(F.current,B.selectionEnd):ft(u,c),E=Object.assign(Object.assign({},J),{lastValue:u}),R=f(c,E),ne=q(R);if(R=f(ne,void 0),g&&!g(G(ne,R))){var oe=d.target,se=$e(oe),Ve=ae(c,u,se);return oe.value=u,H(oe,Ve,u),!1}return be({formattedValue:ne,numAsString:R,inputValue:c,event:d,source:M,input:d.target}),!0},re=function(c,d){d===void 0&&(d=0);var M=c.selectionStart,B=c.selectionEnd;F.current={selectionStart:M,selectionEnd:B+d}},dt=function(c){var d=c.target,M=d.value,B=xe(M,c,ye.event);B&&S(c),F.current=void 0},ht=function(c){var d=c.target,M=c.key,B=d.selectionStart,J=d.selectionEnd,E=d.value;E===void 0&&(E="");var R;M==="ArrowLeft"||M==="Backspace"?R=Math.max(B-1,0):M==="ArrowRight"?R=Math.min(B+1,E.length):M==="Delete"&&(R=B);var ne=0;M==="Delete"&&B===J&&(ne=1);var oe=M==="ArrowLeft"||M==="ArrowRight";if(R===void 0||B!==J&&!oe){w(c),re(d,ne);return}var se=R;if(oe){var Ve=M==="ArrowLeft"?"left":"right";se=K(E,R,Ve),se!==R&&c.preventDefault()}else M==="Delete"&&!P(E[R])?se=K(E,R,"right"):M==="Backspace"&&!P(E[R])&&(se=K(E,R,"left"));se!==R&&H(d,se,E),w(c),re(d,ne)},gt=function(c){var d=c.target,M=function(){var B=d.selectionStart,J=d.selectionEnd,E=d.value;if(E===void 0&&(E=""),B===J){var R=K(E,B);R!==B&&H(d,R,E)}};M(),requestAnimationFrame(function(){M()}),b(c),re(d)},mt=function(c){c.persist&&c.persist();var d=c.target,M=c.currentTarget;j.current=d,$.current.focusTimeout=setTimeout(function(){var B=d.selectionStart,J=d.selectionEnd,E=d.value;E===void 0&&(E="");var R=K(E,B);R!==B&&!(B===0&&J===E.length)&&H(d,R,E),C(Object.assign(Object.assign({},c),{currentTarget:M}))},0)},vt=function(c){j.current=null,clearTimeout($.current.focusTimeout),clearTimeout($.current.setCaretTimeout),A(c)},pt=te&&yr()?"numeric":void 0,Te=Object.assign({inputMode:pt},U,{type:t,value:u,onChange:dt,onKeyDown:ht,onMouseUp:gt,onFocus:mt,onBlur:vt});if(r==="text")return n?T.createElement(T.Fragment,null,n(u,U)||null):T.createElement("span",Object.assign({},U,{ref:i}),u);if(a){var bt=a;return T.createElement(bt,Object.assign({},Te,{ref:i}))}return T.createElement("input",Object.assign({},Te,{ref:i}))}function tt(e,t){var r=t.decimalScale,a=t.fixedDecimalScale,n=t.prefix;n===void 0&&(n="");var i=t.suffix;i===void 0&&(i="");var o=t.allowNegative,f=t.thousandsGroupStyle;if(f===void 0&&(f="thousand"),e===""||e==="-")return e;var v=ke(t),N=v.thousandSeparator,m=v.decimalSeparator,g=r!==0&&e.indexOf(".")!==-1||r&&a,S=Ee(e,o),w=S.beforeDecimal,b=S.afterDecimal,C=S.addNegation;return r!==void 0&&(b=lt(b,r,!!a)),N&&(w=vr(w,N,f)),n&&(w=n+w),i&&(b=b+i),C&&(w="-"+w),e=w+(g&&m||"")+b,e}function ke(e){var t=e.decimalSeparator;t===void 0&&(t=".");var r=e.thousandSeparator,a=e.allowedDecimalSeparators;return r===!0&&(r=","),a||(a=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:a}}function Vr(e,t){e===void 0&&(e="");var r=new RegExp("(-)"),a=new RegExp("(-)(.)*(-)"),n=r.test(e),i=a.test(e);return e=e.replace(/-/g,""),n&&!i&&t&&(e="-"+e),e}function Ir(e,t){return new RegExp("(^-)|[0-9]|"+st(e),"g")}function Rr(e,t,r){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(r!=null&&r.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Dr(e,t,r){var a;t===void 0&&(t=wr(e));var n=r.allowNegative,i=r.prefix;i===void 0&&(i="");var o=r.suffix;o===void 0&&(o="");var f=r.decimalScale,v=t.from,N=t.to,m=N.start,g=N.end,S=ke(r),w=S.allowedDecimalSeparators,b=S.decimalSeparator,C=e[g]===b;if(we(e)&&(e===i||e===o)&&t.lastValue==="")return e;if(g-m===1&&w.indexOf(e[m])!==-1){var A=f===0?"":b;e=e.substring(0,m)+A+e.substring(m+1,e.length)}var x=function(j,$,q){var G=!1,H=!1;i.startsWith("-")?G=!1:j.startsWith("--")?(G=!1,H=!0):o.startsWith("-")&&j.length===o.length?G=!1:j[0]==="-"&&(G=!0);var K=G?1:0;return H&&(K=2),K&&(j=j.substring(K),$-=K,q-=K),{value:j,start:$,end:q,hasNegation:G}},D=x(e,m,g),P=D.hasNegation;a=D,e=a.value,m=a.start,g=a.end;var W=x(t.lastValue,v.start,v.end),U=W.start,l=W.end,h=W.value,u=e.substring(m,g);e.length&&h.length&&(U>h.length-o.length||l<i.length)&&!(u&&o.startsWith(u))&&(e=h);var p=0;e.startsWith(i)?p+=i.length:m<i.length&&(p=m),e=e.substring(p),g-=p;var V=e.length,F=e.length-o.length;e.endsWith(o)?V=F:(g>F||g>e.length-o.length)&&(V=g),e=e.substring(0,V),e=Vr(P?"-"+e:e,n),e=(e.match(Ir(b))||[]).join("");var z=e.indexOf(b);e=e.replace(new RegExp(st(b),"g"),function(j,$){return $===z?".":""});var Y=Ee(e,n),_=Y.beforeDecimal,te=Y.afterDecimal,y=Y.addNegation;return N.end-N.start<v.end-v.start&&_===""&&C&&!parseFloat(te)&&(e=y?"-":""),e}function $r(e,t){var r=t.prefix;r===void 0&&(r="");var a=t.suffix;a===void 0&&(a="");var n=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";n.fill(!1,0,r.length+(i?1:0));var o=e.length;return n.fill(!1,o-a.length+1,o+1),n}function Fr(e){var t=ke(e),r=t.thousandSeparator,a=t.decimalSeparator,n=e.prefix;n===void 0&&(n="");var i=e.allowNegative;if(i===void 0&&(i=!0),r===a)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+r+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+a+` (default value for decimalSeparator is .)
     `);return n.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+n+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function Br(e){e=Fr(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,r=e.allowNegative,a=e.allowLeadingZeros,n=e.onKeyDown;n===void 0&&(n=le);var i=e.onBlur;i===void 0&&(i=le);var o=e.thousandSeparator,f=e.decimalScale,v=e.fixedDecimalScale,N=e.prefix;N===void 0&&(N="");var m=e.defaultValue,g=e.value,S=e.valueIsNumericString,w=e.onValueChange,b=it(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),C=ke(e),A=C.decimalSeparator,x=C.allowedDecimalSeparators,D=function(y){return tt(y,e)},P=function(y,j){return Dr(y,j,e)},W=ve(g)?m:g,U=S??Rr(W,N,t);ve(g)?ve(m)||(U=U||typeof m=="number"):U=U||typeof g=="number";var l=function(y){return ot(y)?y:(typeof y=="number"&&(y=ut(y)),U&&typeof f=="number"?Qe(y,f,!!v):y)},h=ct(l(g),l(m),!!U,D,P,w),u=h[0],p=u.numAsString,V=u.formattedValue,F=h[1],z=function(y){var j=y.target,$=y.key,q=j.selectionStart,G=j.selectionEnd,H=j.value;if(H===void 0&&(H=""),($==="Backspace"||$==="Delete")&&G<N.length){y.preventDefault();return}if(q!==G){n(y);return}$==="Backspace"&&H[0]==="-"&&q===N.length+1&&r&&ce(j,1),f&&v&&($==="Backspace"&&H[q-1]===A?(ce(j,q-1),y.preventDefault()):$==="Delete"&&H[q]===A&&y.preventDefault()),x!=null&&x.includes($)&&H[q]===A&&ce(j,q+1);var K=o===!0?",":o;$==="Backspace"&&H[q-1]===K&&ce(j,q-1),$==="Delete"&&H[q]===K&&ce(j,q+1),n(y)},Y=function(y){var j=p;if(j.match(/\d/g)||(j=""),a||(j=br(j)),v&&f&&(j=Qe(j,f,v)),j!==p){var $=tt(j,e);F({formattedValue:$,value:j,floatValue:parseFloat(j)},{event:y,source:ye.event})}i(y)},_=function(y){return y===A?!0:we(y)},te=function(y){var j=y.currentValue,$=y.lastValue,q=y.formattedValue,G=y.currentValueIndex,H=y.formattedValueIndex,K=j[G],ae=q[H],be=ft($,j),k=be.to;return G>=k.start&&G<k.end&&x&&x.includes(K)&&ae===A?!0:K===ae};return Object.assign(Object.assign({},b),{value:V,valueIsNumericString:!1,isValidInputCharacter:_,isCharacterSame:te,onValueChange:F,format:D,removeFormatting:P,getCaretBoundary:function(y){return $r(y,e)},onKeyDown:z,onBlur:Y})}function Er(e){var t=Br(e);return T.createElement(kr,Object.assign({},t))}const rt=T.forwardRef((e,t)=>{const{onChange:r,...a}=e;return s.jsx(Er,{...a,getInputRef:t,onValueChange:n=>{r({target:{name:e.name,value:n.value}})},valueIsNumericString:!0})}),Oa=({dataset:e,countries:t})=>{var W,U;const[r,a]=O.useState(""),[n,i]=O.useState(),[o,f]=O.useState(()=>e.columns.map(({id:l})=>l)),[v,N]=O.useState(2),[m,g]=O.useState([]),S=()=>{n&&xt.Inertia.post(wt("admin.geodata.map.store"),{label:r,dataset_id:e.id,config:JSON.stringify({legend:m,color_column_id:n.id,display_column_ids:o})})};O.useEffect(()=>{var l,h;if(n)if(n.data_type==="string")g([...new Array(v)].map((u,p)=>({color:"#f00",display_label:{en:`${p}`,fr:`${p}`,es:`${p}`}})));else{const u=Math.floor(Number(((l=Se.minBy(n.values,"value"))==null?void 0:l.value)||0)),V=Math.ceil(Number(((h=Se.maxBy(n.values,"value"))==null?void 0:h.value)||100))-u,F=Math.ceil(V/v),z=[];let Y=0;for(let _=0;_<V;_+=F){const te=_+F,y=`${_}-${te}${n.data_type==="percentage"?"%":""}`;z.push({color:`#${(15-Math.round(Y*15/v)).toString(16)}00`,from:_,to:te,display_label:{en:y,es:y,fr:y}}),++Y}g(z)}},[v,n]);const w=(l,h)=>{g(u=>{const p=[...u];return p[l]=h,p})},b=(l,h)=>{g(u=>{const p=[...u];return p[l]={...u[l],from:h},l>0&&(p[l-1]={...u[l-1],to:h}),p})},C=(l,h)=>{g(u=>{const p=[...u];return p[l]={...u[l],to:h},l<u.length-1&&(p[l+1]={...u[l+1],from:h}),p})},A=(l,h,u)=>{g(p=>{const V=[...p],F={...p[l]};return F.display_label={...F.display_label,[h]:u},V[l]=F,V})},x=O.useCallback(l=>l===void 0?"map-preview-legend-undefined":`map-preview-legend-class-${m.findIndex(({to:u,labels:p})=>p?p.includes(String(l)):u!==void 0?Number(l)<u:!0)}`,[m]),D=O.useCallback((l,h)=>{if(!(!l||h===void 0))switch(l.data_type){case"string":case"country":return h;case"percentage":return`${l.label}: ${Number(h).toFixed(1)}%`;default:return`${l.label}: ${Number(h).toFixed(0)}`}},[]),P=O.useMemo(()=>Object.fromEntries(t.map(l=>{var p;const h={...l},u=(p=n==null?void 0:n.values)==null?void 0:p.find(({country_id:V})=>V===l.id);return h.className=x(u==null?void 0:u.value),h.annotationLabel=`
`+o.map(V=>{var z,Y;const F=e.columns.find(_=>V===_.id);return D(F,(Y=(z=F==null?void 0:F.values)==null?void 0:z.find(({country_id:_})=>_===l.id))==null?void 0:Y.value)}).filter(V=>!!V).join(`
`),[l.country_code,h]})),[n==null?void 0:n.values,t,e.columns,o,D,x]);return s.jsxs(s.Fragment,{children:[s.jsx(jt,{title:"Create Geo Data Map",children:s.jsx(at,{variant:"contained",onClick:S,color:"secondary",disabled:!n||!r,children:"Save"})}),s.jsxs(Mt,{children:[s.jsxs(Le,{sx:{m:2,p:2},children:[s.jsxs(he,{variant:"h5",children:["Dataset: ",e.label]}),s.jsx(fe,{label:"Map label (internal)",value:r,onChange:l=>a(l.currentTarget.value)}),s.jsx(he,{children:"Which column to use for coloring the map and which (multiple) to display in the tooltip."}),s.jsx(kt,{value:(n==null?void 0:n.id)||null,onChange:(l,h)=>i(e.columns.find(({id:u})=>u===Number(h))),children:s.jsxs(Oe,{size:"small",children:[s.jsx(_e,{children:s.jsxs(Ce,{children:[s.jsx(Z,{children:"use as color"}),s.jsx(Z,{children:"show in tooltip"})]})}),s.jsx(Pe,{children:e.columns.map(l=>s.jsxs(Ce,{children:[s.jsx(Z,{children:s.jsx(It,{control:s.jsx(Vt,{value:l.id}),label:`${l.data_type} ${l.label}`})}),s.jsx(Z,{children:s.jsx(He,{checked:o.includes(l.id),onChange:(h,u)=>f(p=>u?[...p,l.id]:p.filter(V=>V!==l.id))})})]},l.id))})]})})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(Le,{sx:{m:2,p:2},children:[s.jsx(he,{variant:"h5",children:"Map legend"}),n.data_type==="string"?s.jsxs(he,{children:["Values in the dataset:"," ",Se.uniqBy(n.values||[],"value").join(", ")," "]}):s.jsxs(he,{children:["Minimum value:"," ",(W=Se.minBy(n.values,"value"))==null?void 0:W.value,s.jsx("br",{}),"Maximum value:"," ",(U=Se.maxBy(n.values,"value"))==null?void 0:U.value]}),s.jsxs(ge,{display:"flex",gap:1,alignItems:"center",children:[s.jsx(he,{children:"Amount of classes:"}),s.jsx(Be,{min:1,max:10,value:v,marks:!0,onChange:(l,h)=>N(h),valueLabelDisplay:"auto",sx:{flex:1}})]}),s.jsxs(Oe,{size:"small",children:[s.jsx(_e,{children:s.jsxs(Ce,{children:[s.jsx(Z,{children:"from"}),s.jsx(Z,{children:"to"}),s.jsx(Z,{children:"color"}),s.jsx(Z,{children:"label EN"}),s.jsx(Z,{children:"label FR"}),s.jsx(Z,{children:"label ES"}),s.jsx(Z,{children:"show"})]})}),s.jsx(Pe,{children:m.map((l,h)=>s.jsxs(Ce,{children:[s.jsx(Z,{children:s.jsx(fe,{value:l.from||0,onChange:u=>b(h,Number(u.target.value)),InputProps:{inputComponent:rt},size:"small",hiddenLabel:!0,margin:"none"})}),s.jsx(Z,{children:s.jsx(fe,{value:l.to||0,onChange:u=>C(h,Number(u.target.value)),InputProps:{inputComponent:rt},size:"small",hiddenLabel:!0,margin:"none"})}),s.jsx(Z,{children:s.jsx(dr,{value:l.color,onChange:(u,{hex:p})=>w(h,{...l,color:p}),isAlphaHidden:!0,format:"hex",size:"small",margin:"none"})}),s.jsx(Z,{children:s.jsx(fe,{value:l.display_label.en||"",size:"small",hiddenLabel:!0,margin:"none",onChange:u=>A(h,"en",u.target.value)})}),s.jsx(Z,{children:s.jsx(fe,{value:l.display_label.fr||"",size:"small",hiddenLabel:!0,margin:"none",onChange:u=>A(h,"fr",u.target.value)})}),s.jsx(Z,{children:s.jsx(fe,{value:l.display_label.es||"",size:"small",hiddenLabel:!0,margin:"none",onChange:u=>A(h,"es",u.target.value)})}),s.jsx(Z,{children:s.jsx(He,{checked:!l.hide,onChange:(u,p)=>w(h,{...l,hide:!p})})})]},h))})]})]}),s.jsxs(Ct,{title:"Preview",open:!0,children:[s.jsx(Rt,{styles:Object.fromEntries(m.map(({color:l},h)=>[`.map-preview-legend-class-${h}`,{fill:l}]))}),s.jsxs(ge,{position:"relative",maxWidth:800,sx:{margin:"0 auto"},children:[s.jsx(At,{mapData:P}),s.jsx(ge,{position:"absolute",right:0,bottom:0,sx:{backgroundColor:"#ffffff80"},children:s.jsx(Nt,{legend:m})})]})]})]})]})]})};export{Oa as default};
