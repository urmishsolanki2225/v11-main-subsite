import{R as c,r as m,j as g}from"./client-ZKQMN23D.js";import{u as S}from"./useTranslation-CHfl--jq.js";import{T as y,u as x}from"./escape-highlight--kF8Jl-E.js";import{u as _}from"./useHits-2WPfp_Fc.js";import{u as k}from"./useCurrentRefinements-Bh9CVntJ.js";function T(e){var r=y.highlightPostTag,a=y.highlightPreTag,t=e.split(a),i=t.shift(),n=i?[{value:i,isHighlighted:!1}]:[];return t.forEach(function(s){var l=s.split(r);n.push({value:l[0],isHighlighted:!0}),l[1]!==""&&n.push({value:l[1],isHighlighted:!1})}),n}function H(e,r){var a=Array.isArray(r)?r:r.split(".");return a.reduce(function(t,i){return t&&t[i]},e)}function p(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter(Boolean).join(" ")}var A=["parts","highlightedTagName","nonHighlightedTagName","separator","className","classNames"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},d.apply(this,arguments)}function W(e,r){if(e==null)return{};var a=R(e,r),t,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function R(e,r){if(e==null)return{};var a={},t=Object.keys(e),i,n;for(n=0;n<t.length;n++)i=t[n],!(r.indexOf(i)>=0)&&(a[i]=e[i]);return a}function I(e){var r=e.classNames,a=e.children,t=e.highlightedTagName,i=e.isHighlighted,n=e.nonHighlightedTagName,s=i?t:n;return c.createElement(s,{className:i?r.highlighted:r.nonHighlighted},a)}function P(e){var r=e.parts,a=e.highlightedTagName,t=a===void 0?"mark":a,i=e.nonHighlightedTagName,n=i===void 0?"span":i,s=e.separator,l=s===void 0?", ":s,h=e.className,o=e.classNames,u=W(e,A);return c.createElement("span",d({},u,{className:p(o.root,h)}),r.map(function($,O){var E=O===r.length-1;return c.createElement(m.Fragment,{key:O},$.map(function(N,w){return c.createElement(I,{key:w,classNames:o,highlightedTagName:t,nonHighlightedTagName:n,isHighlighted:N.isHighlighted},N.value)}),!E&&c.createElement("span",{className:o.separator},l))}))}var L=["classNames"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},f.apply(this,arguments)}function B(e,r){if(e==null)return{};var a=F(e,r),t,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function F(e,r){if(e==null)return{};var a={},t=Object.keys(e),i,n;for(n=0;n<t.length;n++)i=t[n],!(r.indexOf(i)>=0)&&(a[i]=e[i]);return a}function C(e){var r=e.classNames,a=r===void 0?{}:r,t=B(e,L);return c.createElement(P,f({classNames:{root:p("ais-Highlight",a.root),highlighted:p("ais-Highlight-highlighted",a.highlighted),nonHighlighted:p("ais-Highlight-nonHighlighted",a.nonHighlighted),separator:p("ais-Highlight-separator",a.separator)}},t))}var M=["hit","attribute","highlightedTagName","nonHighlightedTagName","separator"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},v.apply(this,arguments)}function D(e,r){if(e==null)return{};var a=q(e,r),t,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function q(e,r){if(e==null)return{};var a={},t=Object.keys(e),i,n;for(n=0;n<t.length;n++)i=t[n],!(r.indexOf(i)>=0)&&(a[i]=e[i]);return a}function z(e){var r=e.hit,a=e.attribute,t=e.highlightedTagName,i=e.nonHighlightedTagName,n=e.separator,s=D(e,M),l=H(r._highlightResult,a)||[],h=Array.isArray(l)?l:[l],o=h.map(function(u){return T(x(u.value||""))});return c.createElement(C,v({},s,{parts:o,highlightedTagName:t,nonHighlightedTagName:i,separator:n}))}var G=["classNames"];function j(){return j=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},j.apply(this,arguments)}function V(e,r){if(e==null)return{};var a=J(e,r),t,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function J(e,r){if(e==null)return{};var a={},t=Object.keys(e),i,n;for(n=0;n<t.length;n++)i=t[n],!(r.indexOf(i)>=0)&&(a[i]=e[i]);return a}function K(e){var r=e.classNames,a=r===void 0?{}:r,t=V(e,G);return c.createElement(P,j({classNames:{root:p("ais-Snippet",a.root),highlighted:p("ais-Snippet-highlighted",a.highlighted),nonHighlighted:p("ais-Snippet-nonHighlighted",a.nonHighlighted),separator:p("ais-Snippet-separator",a.separator)}},t))}var Q=["hit","attribute","highlightedTagName","nonHighlightedTagName","separator"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},b.apply(this,arguments)}function U(e,r){if(e==null)return{};var a=X(e,r),t,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function X(e,r){if(e==null)return{};var a={},t=Object.keys(e),i,n;for(n=0;n<t.length;n++)i=t[n],!(r.indexOf(i)>=0)&&(a[i]=e[i]);return a}function Y(e){var r=e.hit,a=e.attribute,t=e.highlightedTagName,i=e.nonHighlightedTagName,n=e.separator,s=U(e,Q),l=H(r._snippetResult,a)||[],h=Array.isArray(l)?l:[l],o=h.map(function(u){return T(x(u.value||""))});return c.createElement(K,b({},s,{parts:o,highlightedTagName:t,nonHighlightedTagName:i,separator:n}))}const Z=()=>{const{t:e}=S(),{hits:r,sendEvent:a,results:t}=_(),{items:i}=k(),n=m.useMemo(()=>{var s,l,h;return{categories:((s=i.find(({attribute:o})=>o==="categories"))==null?void 0:s.refinements.map(({value:o})=>o))||[],countries:((l=i.find(({attribute:o})=>o==="countries.title"))==null?void 0:l.refinements.map(({value:o})=>o))||[],authors:((h=i.find(({attribute:o})=>o==="authors.title"))==null?void 0:h.refinements.map(({value:o})=>o))||[]}},[i]);return r.length>0?g.jsx("ol",{children:r.map(s=>g.jsx("li",{children:g.jsxs("article",{children:[g.jsxs("header",{children:[g.jsx("span",{className:"date",children:s.publish_at}),g.jsx("h3",{children:g.jsx(z,{hit:s,attribute:"title",highlightedTagName:"mark"})})]}),g.jsx("p",{children:g.jsx(Y,{hit:s,attribute:"content",highlightedTagName:"mark"})}),s.collections.length>0&&!1,s.categories.length>0&&g.jsx("span",{className:"search_categories",children:s.categories.map((l,h)=>g.jsxs(m.Fragment,{children:[h>0&&", ",g.jsx("span",{className:n.categories.includes(l)?"filter_active":void 0,children:l})," "]},l))}),s.authors.length>0&&g.jsx("span",{className:"search_authors",children:s.authors.map(({title:l},h)=>g.jsxs(m.Fragment,{children:[h>0&&", ",g.jsx("span",{className:n.authors.includes(l)?"filter_active":void 0,children:l})]},l))}),s.countries.length>0&&g.jsx("span",{className:"search_countries",children:s.countries.map(({title:l},h)=>g.jsxs(m.Fragment,{children:[h>0&&", ",g.jsx("span",{className:n.countries.includes(l)?"filter_active":void 0,children:l})]},l))}),g.jsx("a",{onClick:()=>a("click",s,"clickedObjectIDsAfterSearch"),href:`/${s.lang}/item/${s.item_id}:${s.slug}`,children:e`Read more`})]})},s.objectID))}):t!=null&&t.query!=""?g.jsx("ol",{children:g.jsx("li",{children:g.jsx("article",{children:g.jsxs("header",{children:[g.jsx("h3",{children:e`No search results`}),i.length>0&&g.jsx("p",{children:e`Broaden the search by removing filters.`})]})})})}):g.jsx("ol",{})},ne=Object.freeze(Object.defineProperty({__proto__:null,Hits:Z},Symbol.toStringTag,{value:"Module"}));export{Z as H,T as a,ne as b,H as g};
