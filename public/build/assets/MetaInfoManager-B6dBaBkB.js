import{R as Ra,r as E,j as l}from"./client-ZKQMN23D.js";import{a as Sa}from"./RestoreFromTrash-DbvhuAx3.js";import{g as or}from"./_commonjsHelpers-BosuxZz1.js";import{p as nc}from"./browser-D9eauH0H.js";import{u as Xr,L as ic,S as ai}from"./Section-BvcnflQ3.js";import{m as as,D as si,d as ka,u as uc,n as ni,V as oc,o as ii,h as ui,p as cc,q as ss,T as oi,e as da,r as lc,F as dc,s as fc,t as hc,M as mc,b as xe,v as pc,C as Ec}from"./app-Bt98msSn.js";import{T as oe,F as ut}from"./TextField-CXY6ukfK.js";import{d as bc,u as Pa}from"./index-Cvft0mqj.js";import{G as de}from"./Grid-BYUzo7jW.js";import{B as Ae}from"./Button-Bs2LlykX.js";import{M as Pr}from"./Menu-BfV33fk6.js";import{M as qe}from"./MenuItem-BvZfPpYr.js";import{C as Zs,a as en,d as Tc,T as ci,b as Ma,t as gc}from"./RemoveCircle-BP57RAS-.js";import{u as _c,a as li,b as tn,i as Tr}from"./useDataSource-CV27kxAN.js";import{j as Be,E as ie,T as nr,u as ht,a as gt,b as K,c as ce,N as Je,R as di,d as Dr,e as vc,f as Cc,P as et,g as Ac,h as yc,k as Nc,m as Ic,w as Dc,n as xc,S as Rc,o as Sc}from"./Config-1Zk1eud0.js";import{c as kc,d as fi,_ as Pc,b as Mc}from"./_baseIsEqual-DkReohVf.js";import{a as Lc}from"./_baseEach-DKAn15m2.js";import{l as Jr}from"./index.m-DI45-rQC.js";import{d as Nt}from"./dayjs.min-BIwLhz4I.js";import{T as Oc,a as wc,L as rn,b as Mr}from"./Listing-BOo8Gk8o.js";import{i as fa}from"./Sorter-D4ZFKmCa.js";import{I as hi}from"./InputFile-D_iUthKe.js";import{g as Te,a as ge,c as Ue,k as ns,b as is}from"./extendSxProp-2i1zAAUV.js";import{B as U}from"./Box-CVOB97vC.js";import{d as Bc}from"./Add-CSI57y4_.js";import{a as fe,_ as k,c as it,l as Fc,e as Hc,i as Re}from"./identifier-DHETMsl0.js";import{T as re,r as Se}from"./Typography-BOH_kjYl.js";import{D as $t,d as an}from"./Dialog-CPjb0mTO.js";import{D as Zr,a as cr,b as lr}from"./DialogTitle-DqHD2Xkp.js";import{I as Me,P as us,F as jc,b as mi}from"./List-BgSNNkKU.js";import{L as xr}from"./ListItemIcon-CVfiqn-C.js";import{L as ha}from"./ListItemText-7JFmWKqR.js";import{a as pi}from"./axios-DPCeRp2O.js";import{F as rt}from"./FormLabel-BgEYUhxt.js";import{I as at,S as xt}from"./Select-DstqRMzc.js";import{a as Et,f as Ei}from"./Content-CSTk_AN3.js";import{T as os}from"./Tooltip-CvPWsRqB.js";import{d as Uc}from"./Twitter-DyTnTSc8.js";import{F as La}from"./FormControlLabel-Do0ozMLQ.js";import{a as Lr,A as Yc,S as Oa}from"./AppBarHeader-Bu_GnhUD.js";import{s as V,u as ea,c as he,r as Vc,a as jt,f as ta,o as ma,l as ra,j as aa}from"./useSlotProps-O828vP2f.js";import{_ as $c,f as Wc,T as zc,u as Wt,G as qc,a as bi}from"./Grow--1bk2Oiz.js";import{u as Gc}from"./useFormControl-CO6OogGI.js";import{d as Kc}from"./Edit-BQczuObD.js";import{T as Qc,b as Xc,a as pa}from"./TableRow-DuG98IK1.js";import{T as Ot}from"./TableCell-gutrWIi-.js";import{d as Jc}from"./Close-C7klk6A2.js";import{L as Ti,m as Zc}from"./DataGridUtils-DqQ54bwL.js";import{P as gi}from"./PublishStatusIcon-CFRSoGcQ.js";import{u as el}from"./index-BMQyuaGg.js";import{C as tl}from"./ColorPickerInput-B-O6o-Qw.js";import{I as _i}from"./InputAdornment-C1l6JSIr.js";import{u as rl}from"./useMediaQuery--fqye5PE.js";import{c as _t,T as vi,B as al}from"./ButtonBase-B4crtf6-.js";import{P as sl}from"./Popper-1aVe17Xg.js";import{u as nl}from"./useTheme-CLvhDb73.js";function il(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function ul(e,t){e.classList?e.classList.add(t):il(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function sn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ol(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=sn(e.className,t):e.setAttribute("class",sn(e.className&&e.className.baseVal||"",t))}var cl=function(t,r){return t&&r&&r.split(" ").forEach(function(a){return ul(t,a)})},Ea=function(t,r){return t&&r&&r.split(" ").forEach(function(a){return ol(t,a)})},cs=function(e){$c(t,e);function t(){for(var a,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return a=e.call.apply(e,[this].concat(n))||this,a.appliedClasses={appear:{},enter:{},exit:{}},a.onEnter=function(u,o){var d=a.resolveArguments(u,o),f=d[0],h=d[1];a.removeClasses(f,"exit"),a.addClass(f,h?"appear":"enter","base"),a.props.onEnter&&a.props.onEnter(u,o)},a.onEntering=function(u,o){var d=a.resolveArguments(u,o),f=d[0],h=d[1],m=h?"appear":"enter";a.addClass(f,m,"active"),a.props.onEntering&&a.props.onEntering(u,o)},a.onEntered=function(u,o){var d=a.resolveArguments(u,o),f=d[0],h=d[1],m=h?"appear":"enter";a.removeClasses(f,m),a.addClass(f,m,"done"),a.props.onEntered&&a.props.onEntered(u,o)},a.onExit=function(u){var o=a.resolveArguments(u),d=o[0];a.removeClasses(d,"appear"),a.removeClasses(d,"enter"),a.addClass(d,"exit","base"),a.props.onExit&&a.props.onExit(u)},a.onExiting=function(u){var o=a.resolveArguments(u),d=o[0];a.addClass(d,"exit","active"),a.props.onExiting&&a.props.onExiting(u)},a.onExited=function(u){var o=a.resolveArguments(u),d=o[0];a.removeClasses(d,"exit"),a.addClass(d,"exit","done"),a.props.onExited&&a.props.onExited(u)},a.resolveArguments=function(u,o){return a.props.nodeRef?[a.props.nodeRef.current,u]:[u,o]},a.getClassNames=function(u){var o=a.props.classNames,d=typeof o=="string",f=d&&o?o+"-":"",h=d?""+f+u:o[u],m=d?h+"-active":o[u+"Active"],p=d?h+"-done":o[u+"Done"];return{baseClassName:h,activeClassName:m,doneClassName:p}},a}var r=t.prototype;return r.addClass=function(s,n,i){var u=this.getClassNames(n)[i+"ClassName"],o=this.getClassNames("enter"),d=o.doneClassName;n==="appear"&&i==="done"&&d&&(u+=" "+d),i==="active"&&s&&Wc(s),u&&(this.appliedClasses[n][i]=u,cl(s,u))},r.removeClasses=function(s,n){var i=this.appliedClasses[n],u=i.base,o=i.active,d=i.done;this.appliedClasses[n]={},u&&Ea(s,u),o&&Ea(s,o),d&&Ea(s,d)},r.render=function(){var s=this.props;s.classNames;var n=fe(s,["classNames"]);return Ra.createElement(zc,k({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Ra.Component);cs.defaultProps={classNames:""};cs.propTypes={};var wa=function(){return wa=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++){r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wa.apply(this,arguments)};var ll=function(e){return(e+1)%1e6};function dl(){var e=E.useReducer(ll,0),t=e[1];return t}function ba(e,t){return typeof e=="function"?e.length?e(t):e():e}function fl(e,t){var r=E.useRef(!1),a=E.useRef(),s=E.useRef(e),n=E.useCallback(function(){return r.current},[]),i=E.useCallback(function(){r.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout(function(){r.current=!0,s.current()},t)},[t]),u=E.useCallback(function(){r.current=null,a.current&&clearTimeout(a.current)},[]);return E.useEffect(function(){s.current=e},[e]),E.useEffect(function(){return i(),u},[t]),[n,u,i]}function Ci(e,t,r){r===void 0&&(r=[]);var a=fl(e,t),s=a[0],n=a[1],i=a[2];return E.useEffect(i,r),[s,n]}function hl(e){e===void 0&&(e=[]);var t=E.useRef(ba(e)),r=dl(),a=E.useMemo(function(){var s={set:function(n){t.current=ba(n,t.current),r()},push:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.length&&a.set(function(u){return u.concat(n)})},updateAt:function(n,i){a.set(function(u){var o=u.slice();return o[n]=i,o})},insertAt:function(n,i){a.set(function(u){var o=u.slice();return n>o.length?o[n]=i:o.splice(n,0,i),o})},update:function(n,i){a.set(function(u){return u.map(function(o){return n(o,i)?i:o})})},updateFirst:function(n,i){var u=t.current.findIndex(function(o){return n(o,i)});u>=0&&a.updateAt(u,i)},upsert:function(n,i){var u=t.current.findIndex(function(o){return n(o,i)});u>=0?a.updateAt(u,i):a.push(i)},sort:function(n){a.set(function(i){return i.slice().sort(n)})},filter:function(n,i){a.set(function(u){return u.slice().filter(n,i)})},removeAt:function(n){a.set(function(i){var u=i.slice();return u.splice(n,1),u})},clear:function(){a.set([])},reset:function(){a.set(ba(e).slice())}};return s.remove=s.removeAt,s},[]);return[t.current,a]}function ml(e){return Te("MuiCardActions",e)}ge("MuiCardActions",["root","spacing"]);const pl=["disableSpacing","className"],El=e=>{const{classes:t,disableSpacing:r}=e;return he({root:["root",!r&&"spacing"]},ml,t)},bl=V("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(({ownerState:e})=>k({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Tl=E.forwardRef(function(t,r){const a=ea({props:t,name:"MuiCardActions"}),{disableSpacing:s=!1,className:n}=a,i=fe(a,pl),u=k({},a,{disableSpacing:s}),o=El(u);return l.jsx(bl,k({className:Ue(o.root,n),ownerState:u,ref:r},i))});function gl(e){return Te("MuiCardMedia",e)}ge("MuiCardMedia",["root","media","img"]);const _l=["children","className","component","image","src","style"],vl=e=>{const{classes:t,isMediaComponent:r,isImageComponent:a}=e;return he({root:["root",r&&"media",a&&"img"]},gl,t)},Cl=V("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{isMediaComponent:a,isImageComponent:s}=r;return[t.root,a&&t.media,s&&t.img]}})(({ownerState:e})=>k({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),Al=["video","audio","picture","iframe","img"],yl=["picture","img"],Nl=E.forwardRef(function(t,r){const a=ea({props:t,name:"MuiCardMedia"}),{children:s,className:n,component:i="div",image:u,src:o,style:d}=a,f=fe(a,_l),h=Al.indexOf(i)!==-1,m=!h&&u?k({backgroundImage:`url("${u}")`},d):d,p=k({},a,{component:i,isMediaComponent:h,isImageComponent:yl.indexOf(i)!==-1}),T=vl(p);return l.jsx(Cl,k({className:Ue(T.root,n),as:i,role:!h&&u?"img":void 0,ref:r,style:m,ownerState:p,src:h?u||o:void 0},f,{children:s}))});function Il(e){return Te("MuiDialogContentText",e)}ge("MuiDialogContentText",["root"]);const Dl=["children","className"],xl=e=>{const{classes:t}=e,a=he({root:["root"]},Il,t);return k({},t,a)},Rl=V(re,{shouldForwardProp:e=>Vc(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ai=E.forwardRef(function(t,r){const a=ea({props:t,name:"MuiDialogContentText"}),{className:s}=a,n=fe(a,Dl),i=xl(n);return l.jsx(Rl,k({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:n,className:Ue(i.root,s)},a,{classes:i}))});function Sl(e){return Te("MuiLinearProgress",e)}ge("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const kl=["className","color","value","valueBuffer","variant"];let zt=e=>e,nn,un,on,cn,ln,dn;const Ba=4,Pl=ns(nn||(nn=zt`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Ml=ns(un||(un=zt`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Ll=ns(on||(on=zt`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Ol=e=>{const{classes:t,variant:r,color:a}=e,s={root:["root",`color${it(a)}`,r],dashed:["dashed",`dashedColor${it(a)}`],bar1:["bar",`barColor${it(a)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${it(a)}`,r==="buffer"&&`color${it(a)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return he(s,Sl,t)},ls=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?Fc(e.palette[t].main,.62):Hc(e.palette[t].main,.5),wl=V("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${it(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>k({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:ls(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Bl=V("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t[`dashedColor${it(r.color)}`]]}})(({ownerState:e,theme:t})=>{const r=ls(t,e.color);return k({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},is(cn||(cn=zt`
    animation: ${0} 3s infinite linear;
  `),Ll)),Fl=V("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${it(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>k({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${Ba}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${Ba}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&is(ln||(ln=zt`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Pl)),Hl=V("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${it(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>k({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:ls(t,e.color),transition:`transform .${Ba}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&is(dn||(dn=zt`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Ml)),jl=E.forwardRef(function(t,r){const a=ea({props:t,name:"MuiLinearProgress"}),{className:s,color:n="primary",value:i,valueBuffer:u,variant:o="indeterminate"}=a,d=fe(a,kl),f=k({},a,{color:n,variant:o}),h=Ol(f),m=el(),p={},T={bar1:{},bar2:{}};if((o==="determinate"||o==="buffer")&&i!==void 0){p["aria-valuenow"]=Math.round(i),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let C=i-100;m&&(C=-C),T.bar1.transform=`translateX(${C}%)`}if(o==="buffer"&&u!==void 0){let C=(u||0)-100;m&&(C=-C),T.bar2.transform=`translateX(${C}%)`}return l.jsxs(wl,k({className:Ue(h.root,s),ownerState:f,role:"progressbar"},p,{ref:r},d,{children:[o==="buffer"?l.jsx(Bl,{className:h.dashed,ownerState:f}):null,l.jsx(Fl,{className:h.bar1,ownerState:f,style:T.bar1}),o==="determinate"?null:l.jsx(Hl,{className:h.bar2,ownerState:f,style:T.bar2})]}))});function Ul(e){return typeof e=="object"&&e.ordering!==void 0}const Yl=e=>e?e.subtype==="image"||e.subtype==="image.icon"||e.subtype==="image.portrait"||e.subtype==="image.square":!1,Vl=({contents:e,content:t},r="en")=>(t==null?void 0:t.lang)===r||(t==null?void 0:t.lang)==="*"?t:(e==null?void 0:e.find(({lang:a})=>a===r))||(e==null?void 0:e.find(({lang:a})=>a==="*"))||t||(e!=null&&e.length?e[0]:void 0),$l=({item:e})=>{const t=Vl(e),[r,a]=E.useState(),[s,n]=E.useState(),[i,u]=E.useState();return E.useEffect(()=>{var o,d,f;if(!t)console.log("no content found",e),u("- no content found -");else if(!r&&e.type==="resource")switch(e.subtype){case"link":if(!((o=t.links)!=null&&o.length)){u("- no link found -");break}a(t.links[0].url),n(t.links[0].url);break;case"file":if(!((d=t.files)!=null&&d.length)){u("- no file found -");break}a(t.files[0].path),n(t.files[0].path);break;case"video":if(!((f=t.videos)!=null&&f.length)){u("- no video found -");break}switch(a(`${t.videos[0].provider}: ${t.videos[0].provider_id}`),t.videos[0].provider){case"youtube":n(`https://youtube.com/watch?v=${t.videos[0].provider_id}`);break;case"vimeo":n(`https://vimeo.com/${t.videos[0].provider_id}`);break;default:n("")}break;default:u("- unknown resource type -")}},[t,e,r]),l.jsx(U,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:i||l.jsxs(l.Fragment,{children:[l.jsx(U,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",textAlign:"left"},children:r}),s&&l.jsx("a",{href:s,target:"_blank",rel:"nofollow noreferrer",children:l.jsx(as,{sx:{fontSize:"1rem"},color:"primary"})})]})})};var yi={exports:{}};(function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},r=-1,a=1,s=0;t.Diff=function(n,i){return[n,i]},t.prototype.diff_main=function(n,i,u,o){typeof o>"u"&&(this.Diff_Timeout<=0?o=Number.MAX_VALUE:o=new Date().getTime()+this.Diff_Timeout*1e3);var d=o;if(n==null||i==null)throw new Error("Null input. (diff_main)");if(n==i)return n?[new t.Diff(s,n)]:[];typeof u>"u"&&(u=!0);var f=u,h=this.diff_commonPrefix(n,i),m=n.substring(0,h);n=n.substring(h),i=i.substring(h),h=this.diff_commonSuffix(n,i);var p=n.substring(n.length-h);n=n.substring(0,n.length-h),i=i.substring(0,i.length-h);var T=this.diff_compute_(n,i,f,d);return m&&T.unshift(new t.Diff(s,m)),p&&T.push(new t.Diff(s,p)),this.diff_cleanupMerge(T),T},t.prototype.diff_compute_=function(n,i,u,o){var d;if(!n)return[new t.Diff(a,i)];if(!i)return[new t.Diff(r,n)];var f=n.length>i.length?n:i,h=n.length>i.length?i:n,m=f.indexOf(h);if(m!=-1)return d=[new t.Diff(a,f.substring(0,m)),new t.Diff(s,h),new t.Diff(a,f.substring(m+h.length))],n.length>i.length&&(d[0][0]=d[2][0]=r),d;if(h.length==1)return[new t.Diff(r,n),new t.Diff(a,i)];var p=this.diff_halfMatch_(n,i);if(p){var T=p[0],C=p[1],v=p[2],A=p[3],y=p[4],N=this.diff_main(T,v,u,o),D=this.diff_main(C,A,u,o);return N.concat([new t.Diff(s,y)],D)}return u&&n.length>100&&i.length>100?this.diff_lineMode_(n,i,o):this.diff_bisect_(n,i,o)},t.prototype.diff_lineMode_=function(n,i,u){var o=this.diff_linesToChars_(n,i);n=o.chars1,i=o.chars2;var d=o.lineArray,f=this.diff_main(n,i,!1,u);this.diff_charsToLines_(f,d),this.diff_cleanupSemantic(f),f.push(new t.Diff(s,""));for(var h=0,m=0,p=0,T="",C="";h<f.length;){switch(f[h][0]){case a:p++,C+=f[h][1];break;case r:m++,T+=f[h][1];break;case s:if(m>=1&&p>=1){f.splice(h-m-p,m+p),h=h-m-p;for(var v=this.diff_main(T,C,!1,u),A=v.length-1;A>=0;A--)f.splice(h,0,v[A]);h=h+v.length}p=0,m=0,T="",C="";break}h++}return f.pop(),f},t.prototype.diff_bisect_=function(n,i,u){for(var o=n.length,d=i.length,f=Math.ceil((o+d)/2),h=f,m=2*f,p=new Array(m),T=new Array(m),C=0;C<m;C++)p[C]=-1,T[C]=-1;p[h+1]=0,T[h+1]=0;for(var v=o-d,A=v%2!=0,y=0,N=0,D=0,P=0,R=0;R<f&&!(new Date().getTime()>u);R++){for(var M=-R+y;M<=R-N;M+=2){var w=h+M,B;M==-R||M!=R&&p[w-1]<p[w+1]?B=p[w+1]:B=p[w-1]+1;for(var Y=B-M;B<o&&Y<d&&n.charAt(B)==i.charAt(Y);)B++,Y++;if(p[w]=B,B>o)N+=2;else if(Y>d)y+=2;else if(A){var F=h+v-M;if(F>=0&&F<m&&T[F]!=-1){var O=o-T[F];if(B>=O)return this.diff_bisectSplit_(n,i,B,Y,u)}}}for(var z=-R+D;z<=R-P;z+=2){var F=h+z,O;z==-R||z!=R&&T[F-1]<T[F+1]?O=T[F+1]:O=T[F-1]+1;for(var H=O-z;O<o&&H<d&&n.charAt(o-O-1)==i.charAt(d-H-1);)O++,H++;if(T[F]=O,O>o)P+=2;else if(H>d)D+=2;else if(!A){var w=h+v-z;if(w>=0&&w<m&&p[w]!=-1){var B=p[w],Y=h+B-w;if(O=o-O,B>=O)return this.diff_bisectSplit_(n,i,B,Y,u)}}}}return[new t.Diff(r,n),new t.Diff(a,i)]},t.prototype.diff_bisectSplit_=function(n,i,u,o,d){var f=n.substring(0,u),h=i.substring(0,o),m=n.substring(u),p=i.substring(o),T=this.diff_main(f,h,!1,d),C=this.diff_main(m,p,!1,d);return T.concat(C)},t.prototype.diff_linesToChars_=function(n,i){var u=[],o={};u[0]="";function d(p){for(var T="",C=0,v=-1,A=u.length;v<p.length-1;){v=p.indexOf(`
`,C),v==-1&&(v=p.length-1);var y=p.substring(C,v+1);(o.hasOwnProperty?o.hasOwnProperty(y):o[y]!==void 0)?T+=String.fromCharCode(o[y]):(A==f&&(y=p.substring(C),v=p.length),T+=String.fromCharCode(A),o[y]=A,u[A++]=y),C=v+1}return T}var f=4e4,h=d(n);f=65535;var m=d(i);return{chars1:h,chars2:m,lineArray:u}},t.prototype.diff_charsToLines_=function(n,i){for(var u=0;u<n.length;u++){for(var o=n[u][1],d=[],f=0;f<o.length;f++)d[f]=i[o.charCodeAt(f)];n[u][1]=d.join("")}},t.prototype.diff_commonPrefix=function(n,i){if(!n||!i||n.charAt(0)!=i.charAt(0))return 0;for(var u=0,o=Math.min(n.length,i.length),d=o,f=0;u<d;)n.substring(f,d)==i.substring(f,d)?(u=d,f=u):o=d,d=Math.floor((o-u)/2+u);return d},t.prototype.diff_commonSuffix=function(n,i){if(!n||!i||n.charAt(n.length-1)!=i.charAt(i.length-1))return 0;for(var u=0,o=Math.min(n.length,i.length),d=o,f=0;u<d;)n.substring(n.length-d,n.length-f)==i.substring(i.length-d,i.length-f)?(u=d,f=u):o=d,d=Math.floor((o-u)/2+u);return d},t.prototype.diff_commonOverlap_=function(n,i){var u=n.length,o=i.length;if(u==0||o==0)return 0;u>o?n=n.substring(u-o):u<o&&(i=i.substring(0,u));var d=Math.min(u,o);if(n==i)return d;for(var f=0,h=1;;){var m=n.substring(d-h),p=i.indexOf(m);if(p==-1)return f;h+=p,(p==0||n.substring(d-h)==i.substring(0,h))&&(f=h,h++)}},t.prototype.diff_halfMatch_=function(n,i){if(this.Diff_Timeout<=0)return null;var u=n.length>i.length?n:i,o=n.length>i.length?i:n;if(u.length<4||o.length*2<u.length)return null;var d=this;function f(N,D,P){for(var R=N.substring(P,P+Math.floor(N.length/4)),M=-1,w="",B,Y,F,O;(M=D.indexOf(R,M+1))!=-1;){var z=d.diff_commonPrefix(N.substring(P),D.substring(M)),H=d.diff_commonSuffix(N.substring(0,P),D.substring(0,M));w.length<H+z&&(w=D.substring(M-H,M)+D.substring(M,M+z),B=N.substring(0,P-H),Y=N.substring(P+z),F=D.substring(0,M-H),O=D.substring(M+z))}return w.length*2>=N.length?[B,Y,F,O,w]:null}var h=f(u,o,Math.ceil(u.length/4)),m=f(u,o,Math.ceil(u.length/2)),p;if(!h&&!m)return null;m?h?p=h[4].length>m[4].length?h:m:p=m:p=h;var T,C,v,A;n.length>i.length?(T=p[0],C=p[1],v=p[2],A=p[3]):(v=p[0],A=p[1],T=p[2],C=p[3]);var y=p[4];return[T,C,v,A,y]},t.prototype.diff_cleanupSemantic=function(n){for(var i=!1,u=[],o=0,d=null,f=0,h=0,m=0,p=0,T=0;f<n.length;)n[f][0]==s?(u[o++]=f,h=p,m=T,p=0,T=0,d=n[f][1]):(n[f][0]==a?p+=n[f][1].length:T+=n[f][1].length,d&&d.length<=Math.max(h,m)&&d.length<=Math.max(p,T)&&(n.splice(u[o-1],0,new t.Diff(r,d)),n[u[o-1]+1][0]=a,o--,o--,f=o>0?u[o-1]:-1,h=0,m=0,p=0,T=0,d=null,i=!0)),f++;for(i&&this.diff_cleanupMerge(n),this.diff_cleanupSemanticLossless(n),f=1;f<n.length;){if(n[f-1][0]==r&&n[f][0]==a){var C=n[f-1][1],v=n[f][1],A=this.diff_commonOverlap_(C,v),y=this.diff_commonOverlap_(v,C);A>=y?(A>=C.length/2||A>=v.length/2)&&(n.splice(f,0,new t.Diff(s,v.substring(0,A))),n[f-1][1]=C.substring(0,C.length-A),n[f+1][1]=v.substring(A),f++):(y>=C.length/2||y>=v.length/2)&&(n.splice(f,0,new t.Diff(s,C.substring(0,y))),n[f-1][0]=a,n[f-1][1]=v.substring(0,v.length-y),n[f+1][0]=r,n[f+1][1]=C.substring(y),f++),f++}f++}},t.prototype.diff_cleanupSemanticLossless=function(n){function i(y,N){if(!y||!N)return 6;var D=y.charAt(y.length-1),P=N.charAt(0),R=D.match(t.nonAlphaNumericRegex_),M=P.match(t.nonAlphaNumericRegex_),w=R&&D.match(t.whitespaceRegex_),B=M&&P.match(t.whitespaceRegex_),Y=w&&D.match(t.linebreakRegex_),F=B&&P.match(t.linebreakRegex_),O=Y&&y.match(t.blanklineEndRegex_),z=F&&N.match(t.blanklineStartRegex_);return O||z?5:Y||F?4:R&&!w&&B?3:w||B?2:R||M?1:0}for(var u=1;u<n.length-1;){if(n[u-1][0]==s&&n[u+1][0]==s){var o=n[u-1][1],d=n[u][1],f=n[u+1][1],h=this.diff_commonSuffix(o,d);if(h){var m=d.substring(d.length-h);o=o.substring(0,o.length-h),d=m+d.substring(0,d.length-h),f=m+f}for(var p=o,T=d,C=f,v=i(o,d)+i(d,f);d.charAt(0)===f.charAt(0);){o+=d.charAt(0),d=d.substring(1)+f.charAt(0),f=f.substring(1);var A=i(o,d)+i(d,f);A>=v&&(v=A,p=o,T=d,C=f)}n[u-1][1]!=p&&(p?n[u-1][1]=p:(n.splice(u-1,1),u--),n[u][1]=T,C?n[u+1][1]=C:(n.splice(u+1,1),u--))}u++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(n){for(var i=!1,u=[],o=0,d=null,f=0,h=!1,m=!1,p=!1,T=!1;f<n.length;)n[f][0]==s?(n[f][1].length<this.Diff_EditCost&&(p||T)?(u[o++]=f,h=p,m=T,d=n[f][1]):(o=0,d=null),p=T=!1):(n[f][0]==r?T=!0:p=!0,d&&(h&&m&&p&&T||d.length<this.Diff_EditCost/2&&h+m+p+T==3)&&(n.splice(u[o-1],0,new t.Diff(r,d)),n[u[o-1]+1][0]=a,o--,d=null,h&&m?(p=T=!0,o=0):(o--,f=o>0?u[o-1]:-1,p=T=!1),i=!0)),f++;i&&this.diff_cleanupMerge(n)},t.prototype.diff_cleanupMerge=function(n){n.push(new t.Diff(s,""));for(var i=0,u=0,o=0,d="",f="",h;i<n.length;)switch(n[i][0]){case a:o++,f+=n[i][1],i++;break;case r:u++,d+=n[i][1],i++;break;case s:u+o>1?(u!==0&&o!==0&&(h=this.diff_commonPrefix(f,d),h!==0&&(i-u-o>0&&n[i-u-o-1][0]==s?n[i-u-o-1][1]+=f.substring(0,h):(n.splice(0,0,new t.Diff(s,f.substring(0,h))),i++),f=f.substring(h),d=d.substring(h)),h=this.diff_commonSuffix(f,d),h!==0&&(n[i][1]=f.substring(f.length-h)+n[i][1],f=f.substring(0,f.length-h),d=d.substring(0,d.length-h))),i-=u+o,n.splice(i,u+o),d.length&&(n.splice(i,0,new t.Diff(r,d)),i++),f.length&&(n.splice(i,0,new t.Diff(a,f)),i++),i++):i!==0&&n[i-1][0]==s?(n[i-1][1]+=n[i][1],n.splice(i,1)):i++,o=0,u=0,d="",f="";break}n[n.length-1][1]===""&&n.pop();var m=!1;for(i=1;i<n.length-1;)n[i-1][0]==s&&n[i+1][0]==s&&(n[i][1].substring(n[i][1].length-n[i-1][1].length)==n[i-1][1]?(n[i][1]=n[i-1][1]+n[i][1].substring(0,n[i][1].length-n[i-1][1].length),n[i+1][1]=n[i-1][1]+n[i+1][1],n.splice(i-1,1),m=!0):n[i][1].substring(0,n[i+1][1].length)==n[i+1][1]&&(n[i-1][1]+=n[i+1][1],n[i][1]=n[i][1].substring(n[i+1][1].length)+n[i+1][1],n.splice(i+1,1),m=!0)),i++;m&&this.diff_cleanupMerge(n)},t.prototype.diff_xIndex=function(n,i){var u=0,o=0,d=0,f=0,h;for(h=0;h<n.length&&(n[h][0]!==a&&(u+=n[h][1].length),n[h][0]!==r&&(o+=n[h][1].length),!(u>i));h++)d=u,f=o;return n.length!=h&&n[h][0]===r?f:f+(i-d)},t.prototype.diff_prettyHtml=function(n){for(var i=[],u=/&/g,o=/</g,d=/>/g,f=/\n/g,h=0;h<n.length;h++){var m=n[h][0],p=n[h][1],T=p.replace(u,"&amp;").replace(o,"&lt;").replace(d,"&gt;").replace(f,"&para;<br>");switch(m){case a:i[h]='<ins style="background:#e6ffe6;">'+T+"</ins>";break;case r:i[h]='<del style="background:#ffe6e6;">'+T+"</del>";break;case s:i[h]="<span>"+T+"</span>";break}}return i.join("")},t.prototype.diff_text1=function(n){for(var i=[],u=0;u<n.length;u++)n[u][0]!==a&&(i[u]=n[u][1]);return i.join("")},t.prototype.diff_text2=function(n){for(var i=[],u=0;u<n.length;u++)n[u][0]!==r&&(i[u]=n[u][1]);return i.join("")},t.prototype.diff_levenshtein=function(n){for(var i=0,u=0,o=0,d=0;d<n.length;d++){var f=n[d][0],h=n[d][1];switch(f){case a:u+=h.length;break;case r:o+=h.length;break;case s:i+=Math.max(u,o),u=0,o=0;break}}return i+=Math.max(u,o),i},t.prototype.diff_toDelta=function(n){for(var i=[],u=0;u<n.length;u++)switch(n[u][0]){case a:i[u]="+"+encodeURI(n[u][1]);break;case r:i[u]="-"+n[u][1].length;break;case s:i[u]="="+n[u][1].length;break}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(n,i){for(var u=[],o=0,d=0,f=i.split(/\t/g),h=0;h<f.length;h++){var m=f[h].substring(1);switch(f[h].charAt(0)){case"+":try{u[o++]=new t.Diff(a,decodeURI(m))}catch{throw new Error("Illegal escape in diff_fromDelta: "+m)}break;case"-":case"=":var p=parseInt(m,10);if(isNaN(p)||p<0)throw new Error("Invalid number in diff_fromDelta: "+m);var T=n.substring(d,d+=p);f[h].charAt(0)=="="?u[o++]=new t.Diff(s,T):u[o++]=new t.Diff(r,T);break;default:if(f[h])throw new Error("Invalid diff operation in diff_fromDelta: "+f[h])}}if(d!=n.length)throw new Error("Delta length ("+d+") does not equal source text length ("+n.length+").");return u},t.prototype.match_main=function(n,i,u){if(n==null||i==null||u==null)throw new Error("Null input. (match_main)");return u=Math.max(0,Math.min(u,n.length)),n==i?0:n.length?n.substring(u,u+i.length)==i?u:this.match_bitap_(n,i,u):-1},t.prototype.match_bitap_=function(n,i,u){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var o=this.match_alphabet_(i),d=this;function f(B,Y){var F=B/i.length,O=Math.abs(u-Y);return d.Match_Distance?F+O/d.Match_Distance:O?1:F}var h=this.Match_Threshold,m=n.indexOf(i,u);m!=-1&&(h=Math.min(f(0,m),h),m=n.lastIndexOf(i,u+i.length),m!=-1&&(h=Math.min(f(0,m),h)));var p=1<<i.length-1;m=-1;for(var T,C,v=i.length+n.length,A,y=0;y<i.length;y++){for(T=0,C=v;T<C;)f(y,u+C)<=h?T=C:v=C,C=Math.floor((v-T)/2+T);v=C;var N=Math.max(1,u-C+1),D=Math.min(u+C,n.length)+i.length,P=Array(D+2);P[D+1]=(1<<y)-1;for(var R=D;R>=N;R--){var M=o[n.charAt(R-1)];if(y===0?P[R]=(P[R+1]<<1|1)&M:P[R]=(P[R+1]<<1|1)&M|((A[R+1]|A[R])<<1|1)|A[R+1],P[R]&p){var w=f(y,R-1);if(w<=h)if(h=w,m=R-1,m>u)N=Math.max(1,2*u-m);else break}}if(f(y+1,u)>h)break;A=P}return m},t.prototype.match_alphabet_=function(n){for(var i={},u=0;u<n.length;u++)i[n.charAt(u)]=0;for(var u=0;u<n.length;u++)i[n.charAt(u)]|=1<<n.length-u-1;return i},t.prototype.patch_addContext_=function(n,i){if(i.length!=0){if(n.start2===null)throw Error("patch not initialized");for(var u=i.substring(n.start2,n.start2+n.length1),o=0;i.indexOf(u)!=i.lastIndexOf(u)&&u.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,u=i.substring(n.start2-o,n.start2+n.length1+o);o+=this.Patch_Margin;var d=i.substring(n.start2-o,n.start2);d&&n.diffs.unshift(new t.Diff(s,d));var f=i.substring(n.start2+n.length1,n.start2+n.length1+o);f&&n.diffs.push(new t.Diff(s,f)),n.start1-=d.length,n.start2-=d.length,n.length1+=d.length+f.length,n.length2+=d.length+f.length}},t.prototype.patch_make=function(n,i,u){var o,d;if(typeof n=="string"&&typeof i=="string"&&typeof u>"u")o=n,d=this.diff_main(o,i,!0),d.length>2&&(this.diff_cleanupSemantic(d),this.diff_cleanupEfficiency(d));else if(n&&typeof n=="object"&&typeof i>"u"&&typeof u>"u")d=n,o=this.diff_text1(d);else if(typeof n=="string"&&i&&typeof i=="object"&&typeof u>"u")o=n,d=i;else if(typeof n=="string"&&typeof i=="string"&&u&&typeof u=="object")o=n,d=u;else throw new Error("Unknown call format to patch_make.");if(d.length===0)return[];for(var f=[],h=new t.patch_obj,m=0,p=0,T=0,C=o,v=o,A=0;A<d.length;A++){var y=d[A][0],N=d[A][1];switch(!m&&y!==s&&(h.start1=p,h.start2=T),y){case a:h.diffs[m++]=d[A],h.length2+=N.length,v=v.substring(0,T)+N+v.substring(T);break;case r:h.length1+=N.length,h.diffs[m++]=d[A],v=v.substring(0,T)+v.substring(T+N.length);break;case s:N.length<=2*this.Patch_Margin&&m&&d.length!=A+1?(h.diffs[m++]=d[A],h.length1+=N.length,h.length2+=N.length):N.length>=2*this.Patch_Margin&&m&&(this.patch_addContext_(h,C),f.push(h),h=new t.patch_obj,m=0,C=v,p=T);break}y!==a&&(p+=N.length),y!==r&&(T+=N.length)}return m&&(this.patch_addContext_(h,C),f.push(h)),f},t.prototype.patch_deepCopy=function(n){for(var i=[],u=0;u<n.length;u++){var o=n[u],d=new t.patch_obj;d.diffs=[];for(var f=0;f<o.diffs.length;f++)d.diffs[f]=new t.Diff(o.diffs[f][0],o.diffs[f][1]);d.start1=o.start1,d.start2=o.start2,d.length1=o.length1,d.length2=o.length2,i[u]=d}return i},t.prototype.patch_apply=function(n,i){if(n.length==0)return[i,[]];n=this.patch_deepCopy(n);var u=this.patch_addPadding(n);i=u+i+u,this.patch_splitMax(n);for(var o=0,d=[],f=0;f<n.length;f++){var h=n[f].start2+o,m=this.diff_text1(n[f].diffs),p,T=-1;if(m.length>this.Match_MaxBits?(p=this.match_main(i,m.substring(0,this.Match_MaxBits),h),p!=-1&&(T=this.match_main(i,m.substring(m.length-this.Match_MaxBits),h+m.length-this.Match_MaxBits),(T==-1||p>=T)&&(p=-1))):p=this.match_main(i,m,h),p==-1)d[f]=!1,o-=n[f].length2-n[f].length1;else{d[f]=!0,o=p-h;var C;if(T==-1?C=i.substring(p,p+m.length):C=i.substring(p,T+this.Match_MaxBits),m==C)i=i.substring(0,p)+this.diff_text2(n[f].diffs)+i.substring(p+m.length);else{var v=this.diff_main(m,C,!1);if(m.length>this.Match_MaxBits&&this.diff_levenshtein(v)/m.length>this.Patch_DeleteThreshold)d[f]=!1;else{this.diff_cleanupSemanticLossless(v);for(var A=0,y,N=0;N<n[f].diffs.length;N++){var D=n[f].diffs[N];D[0]!==s&&(y=this.diff_xIndex(v,A)),D[0]===a?i=i.substring(0,p+y)+D[1]+i.substring(p+y):D[0]===r&&(i=i.substring(0,p+y)+i.substring(p+this.diff_xIndex(v,A+D[1].length))),D[0]!==r&&(A+=D[1].length)}}}}}return i=i.substring(u.length,i.length-u.length),[i,d]},t.prototype.patch_addPadding=function(n){for(var i=this.Patch_Margin,u="",o=1;o<=i;o++)u+=String.fromCharCode(o);for(var o=0;o<n.length;o++)n[o].start1+=i,n[o].start2+=i;var d=n[0],f=d.diffs;if(f.length==0||f[0][0]!=s)f.unshift(new t.Diff(s,u)),d.start1-=i,d.start2-=i,d.length1+=i,d.length2+=i;else if(i>f[0][1].length){var h=i-f[0][1].length;f[0][1]=u.substring(f[0][1].length)+f[0][1],d.start1-=h,d.start2-=h,d.length1+=h,d.length2+=h}if(d=n[n.length-1],f=d.diffs,f.length==0||f[f.length-1][0]!=s)f.push(new t.Diff(s,u)),d.length1+=i,d.length2+=i;else if(i>f[f.length-1][1].length){var h=i-f[f.length-1][1].length;f[f.length-1][1]+=u.substring(0,h),d.length1+=h,d.length2+=h}return u},t.prototype.patch_splitMax=function(n){for(var i=this.Match_MaxBits,u=0;u<n.length;u++)if(!(n[u].length1<=i)){var o=n[u];n.splice(u--,1);for(var d=o.start1,f=o.start2,h="";o.diffs.length!==0;){var m=new t.patch_obj,p=!0;for(m.start1=d-h.length,m.start2=f-h.length,h!==""&&(m.length1=m.length2=h.length,m.diffs.push(new t.Diff(s,h)));o.diffs.length!==0&&m.length1<i-this.Patch_Margin;){var T=o.diffs[0][0],C=o.diffs[0][1];T===a?(m.length2+=C.length,f+=C.length,m.diffs.push(o.diffs.shift()),p=!1):T===r&&m.diffs.length==1&&m.diffs[0][0]==s&&C.length>2*i?(m.length1+=C.length,d+=C.length,p=!1,m.diffs.push(new t.Diff(T,C)),o.diffs.shift()):(C=C.substring(0,i-m.length1-this.Patch_Margin),m.length1+=C.length,d+=C.length,T===s?(m.length2+=C.length,f+=C.length):p=!1,m.diffs.push(new t.Diff(T,C)),C==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(C.length))}h=this.diff_text2(m.diffs),h=h.substring(h.length-this.Patch_Margin);var v=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);v!==""&&(m.length1+=v.length,m.length2+=v.length,m.diffs.length!==0&&m.diffs[m.diffs.length-1][0]===s?m.diffs[m.diffs.length-1][1]+=v:m.diffs.push(new t.Diff(s,v))),p||n.splice(++u,0,m)}}},t.prototype.patch_toText=function(n){for(var i=[],u=0;u<n.length;u++)i[u]=n[u];return i.join("")},t.prototype.patch_fromText=function(n){var i=[];if(!n)return i;for(var u=n.split(`
`),o=0,d=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<u.length;){var f=u[o].match(d);if(!f)throw new Error("Invalid patch string: "+u[o]);var h=new t.patch_obj;for(i.push(h),h.start1=parseInt(f[1],10),f[2]===""?(h.start1--,h.length1=1):f[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(f[2],10)),h.start2=parseInt(f[3],10),f[4]===""?(h.start2--,h.length2=1):f[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(f[4],10)),o++;o<u.length;){var m=u[o].charAt(0);try{var p=decodeURI(u[o].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+p)}if(m=="-")h.diffs.push(new t.Diff(r,p));else if(m=="+")h.diffs.push(new t.Diff(a,p));else if(m==" ")h.diffs.push(new t.Diff(s,p));else{if(m=="@")break;if(m!=="")throw new Error('Invalid patch mode "'+m+'" in: '+p)}o++}}return i},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var n,i;this.length1===0?n=this.start1+",0":this.length1==1?n=this.start1+1:n=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var u=["@@ -"+n+" +"+i+` @@
`],o,d=0;d<this.diffs.length;d++){switch(this.diffs[d][0]){case a:o="+";break;case r:o="-";break;case s:o=" ";break}u[d+1]=o+encodeURI(this.diffs[d][1])+`
`}return u.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=a,e.exports.DIFF_EQUAL=s})(yi);var Wl=yi.exports;const Ta=or(Wl);var Ni={exports:{}},zl=/[|\\{}()[\]^$+*?.]/g,ql=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(zl,"\\$&")},ds={exports:{}},Ii={exports:{}},Gl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Rt=Gl,Di={};for(var ga in Rt)Rt.hasOwnProperty(ga)&&(Di[Rt[ga]]=ga);var $=Ii.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var Ve in $)if($.hasOwnProperty(Ve)){if(!("channels"in $[Ve]))throw new Error("missing channels property: "+Ve);if(!("labels"in $[Ve]))throw new Error("missing channel labels property: "+Ve);if($[Ve].labels.length!==$[Ve].channels)throw new Error("channel and label counts mismatch: "+Ve);var Kl=$[Ve].channels,Ql=$[Ve].labels;delete $[Ve].channels,delete $[Ve].labels,Object.defineProperty($[Ve],"channels",{value:Kl}),Object.defineProperty($[Ve],"labels",{value:Ql})}$.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.min(t,r,a),n=Math.max(t,r,a),i=n-s,u,o,d;return n===s?u=0:t===n?u=(r-a)/i:r===n?u=2+(a-t)/i:a===n&&(u=4+(t-r)/i),u=Math.min(u*60,360),u<0&&(u+=360),d=(s+n)/2,n===s?o=0:d<=.5?o=i/(n+s):o=i/(2-n-s),[u,o*100,d*100]};$.rgb.hsv=function(e){var t,r,a,s,n,i=e[0]/255,u=e[1]/255,o=e[2]/255,d=Math.max(i,u,o),f=d-Math.min(i,u,o),h=function(m){return(d-m)/6/f+1/2};return f===0?s=n=0:(n=f/d,t=h(i),r=h(u),a=h(o),i===d?s=a-r:u===d?s=1/3+t-a:o===d&&(s=2/3+r-t),s<0?s+=1:s>1&&(s-=1)),[s*360,n*100,d*100]};$.rgb.hwb=function(e){var t=e[0],r=e[1],a=e[2],s=$.rgb.hsl(e)[0],n=1/255*Math.min(t,Math.min(r,a));return a=1-1/255*Math.max(t,Math.max(r,a)),[s,n*100,a*100]};$.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s,n,i,u;return u=Math.min(1-t,1-r,1-a),s=(1-t-u)/(1-u)||0,n=(1-r-u)/(1-u)||0,i=(1-a-u)/(1-u)||0,[s*100,n*100,i*100,u*100]};function Xl(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}$.rgb.keyword=function(e){var t=Di[e];if(t)return t;var r=1/0,a;for(var s in Rt)if(Rt.hasOwnProperty(s)){var n=Rt[s],i=Xl(e,n);i<r&&(r=i,a=s)}return a};$.keyword.rgb=function(e){return Rt[e]};$.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92;var s=t*.4124+r*.3576+a*.1805,n=t*.2126+r*.7152+a*.0722,i=t*.0193+r*.1192+a*.9505;return[s*100,n*100,i*100]};$.rgb.lab=function(e){var t=$.rgb.xyz(e),r=t[0],a=t[1],s=t[2],n,i,u;return r/=95.047,a/=100,s/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,n=116*a-16,i=500*(r-a),u=200*(a-s),[n,i,u]};$.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,a=e[2]/100,s,n,i,u,o;if(r===0)return o=a*255,[o,o,o];a<.5?n=a*(1+r):n=a+r-a*r,s=2*a-n,u=[0,0,0];for(var d=0;d<3;d++)i=t+1/3*-(d-1),i<0&&i++,i>1&&i--,6*i<1?o=s+(n-s)*6*i:2*i<1?o=n:3*i<2?o=s+(n-s)*(2/3-i)*6:o=s,u[d]=o*255;return u};$.hsl.hsv=function(e){var t=e[0],r=e[1]/100,a=e[2]/100,s=r,n=Math.max(a,.01),i,u;return a*=2,r*=a<=1?a:2-a,s*=n<=1?n:2-n,u=(a+r)/2,i=a===0?2*s/(n+s):2*r/(a+r),[t,i*100,u*100]};$.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,a=e[2]/100,s=Math.floor(t)%6,n=t-Math.floor(t),i=255*a*(1-r),u=255*a*(1-r*n),o=255*a*(1-r*(1-n));switch(a*=255,s){case 0:return[a,o,i];case 1:return[u,a,i];case 2:return[i,a,o];case 3:return[i,u,a];case 4:return[o,i,a];case 5:return[a,i,u]}};$.hsv.hsl=function(e){var t=e[0],r=e[1]/100,a=e[2]/100,s=Math.max(a,.01),n,i,u;return u=(2-r)*a,n=(2-r)*s,i=r*s,i/=n<=1?n:2-n,i=i||0,u/=2,[t,i*100,u*100]};$.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,a=e[2]/100,s=r+a,n,i,u,o;s>1&&(r/=s,a/=s),n=Math.floor(6*t),i=1-a,u=6*t-n,n&1&&(u=1-u),o=r+u*(i-r);var d,f,h;switch(n){default:case 6:case 0:d=i,f=o,h=r;break;case 1:d=o,f=i,h=r;break;case 2:d=r,f=i,h=o;break;case 3:d=r,f=o,h=i;break;case 4:d=o,f=r,h=i;break;case 5:d=i,f=r,h=o;break}return[d*255,f*255,h*255]};$.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,a=e[2]/100,s=e[3]/100,n,i,u;return n=1-Math.min(1,t*(1-s)+s),i=1-Math.min(1,r*(1-s)+s),u=1-Math.min(1,a*(1-s)+s),[n*255,i*255,u*255]};$.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,a=e[2]/100,s,n,i;return s=t*3.2406+r*-1.5372+a*-.4986,n=t*-.9689+r*1.8758+a*.0415,i=t*.0557+r*-.204+a*1.057,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=Math.min(Math.max(0,s),1),n=Math.min(Math.max(0,n),1),i=Math.min(Math.max(0,i),1),[s*255,n*255,i*255]};$.xyz.lab=function(e){var t=e[0],r=e[1],a=e[2],s,n,i;return t/=95.047,r/=100,a/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,s=116*r-16,n=500*(t-r),i=200*(r-a),[s,n,i]};$.lab.xyz=function(e){var t=e[0],r=e[1],a=e[2],s,n,i;n=(t+16)/116,s=r/500+n,i=n-a/200;var u=Math.pow(n,3),o=Math.pow(s,3),d=Math.pow(i,3);return n=u>.008856?u:(n-16/116)/7.787,s=o>.008856?o:(s-16/116)/7.787,i=d>.008856?d:(i-16/116)/7.787,s*=95.047,n*=100,i*=108.883,[s,n,i]};$.lab.lch=function(e){var t=e[0],r=e[1],a=e[2],s,n,i;return s=Math.atan2(a,r),n=s*360/2/Math.PI,n<0&&(n+=360),i=Math.sqrt(r*r+a*a),[t,i,n]};$.lch.lab=function(e){var t=e[0],r=e[1],a=e[2],s,n,i;return i=a/360*2*Math.PI,s=r*Math.cos(i),n=r*Math.sin(i),[t,s,n]};$.rgb.ansi16=function(e){var t=e[0],r=e[1],a=e[2],s=1 in arguments?arguments[1]:$.rgb.hsv(e)[2];if(s=Math.round(s/50),s===0)return 30;var n=30+(Math.round(a/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(n+=60),n};$.hsv.ansi16=function(e){return $.rgb.ansi16($.hsv.rgb(e),e[2])};$.rgb.ansi256=function(e){var t=e[0],r=e[1],a=e[2];if(t===r&&r===a)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var s=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(a/255*5);return s};$.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,a=(t&1)*r*255,s=(t>>1&1)*r*255,n=(t>>2&1)*r*255;return[a,s,n]};$.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,a=Math.floor(e/36)/5*255,s=Math.floor((r=e%36)/6)/5*255,n=r%6/5*255;return[a,s,n]};$.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};$.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(u){return u+u}).join(""));var a=parseInt(r,16),s=a>>16&255,n=a>>8&255,i=a&255;return[s,n,i]};$.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(Math.max(t,r),a),n=Math.min(Math.min(t,r),a),i=s-n,u,o;return i<1?u=n/(1-i):u=0,i<=0?o=0:s===t?o=(r-a)/i%6:s===r?o=2+(a-t)/i:o=4+(t-r)/i+4,o/=6,o%=1,[o*360,i*100,u*100]};$.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,a=1,s=0;return r<.5?a=2*t*r:a=2*t*(1-r),a<1&&(s=(r-.5*a)/(1-a)),[e[0],a*100,s*100]};$.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,a=t*r,s=0;return a<1&&(s=(r-a)/(1-a)),[e[0],a*100,s*100]};$.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,a=e[2]/100;if(r===0)return[a*255,a*255,a*255];var s=[0,0,0],n=t%1*6,i=n%1,u=1-i,o=0;switch(Math.floor(n)){case 0:s[0]=1,s[1]=i,s[2]=0;break;case 1:s[0]=u,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=i;break;case 3:s[0]=0,s[1]=u,s[2]=1;break;case 4:s[0]=i,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=u}return o=(1-r)*a,[(r*s[0]+o)*255,(r*s[1]+o)*255,(r*s[2]+o)*255]};$.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,a=t+r*(1-t),s=0;return a>0&&(s=t/a),[e[0],s*100,a*100]};$.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,a=r*(1-t)+.5*t,s=0;return a>0&&a<.5?s=t/(2*a):a>=.5&&a<1&&(s=t/(2*(1-a))),[e[0],s*100,a*100]};$.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,a=t+r*(1-t);return[e[0],(a-t)*100,(1-a)*100]};$.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,a=1-r,s=a-t,n=0;return s<1&&(n=(a-s)/(1-s)),[e[0],s*100,n*100]};$.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};$.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};$.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};$.gray.hsl=$.gray.hsv=function(e){return[0,0,e[0]]};$.gray.hwb=function(e){return[0,100,e[0]]};$.gray.cmyk=function(e){return[0,0,0,e[0]]};$.gray.lab=function(e){return[e[0],0,0]};$.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,a=r.toString(16).toUpperCase();return"000000".substring(a.length)+a};$.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]};var xi=Ii.exports,Or=xi;function Jl(){for(var e={},t=Object.keys(Or),r=t.length,a=0;a<r;a++)e[t[a]]={distance:-1,parent:null};return e}function Zl(e){var t=Jl(),r=[e];for(t[e].distance=0;r.length;)for(var a=r.pop(),s=Object.keys(Or[a]),n=s.length,i=0;i<n;i++){var u=s[i],o=t[u];o.distance===-1&&(o.distance=t[a].distance+1,o.parent=a,r.unshift(u))}return t}function ed(e,t){return function(r){return t(e(r))}}function td(e,t){for(var r=[t[e].parent,e],a=Or[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),a=ed(Or[t[s].parent][s],a),s=t[s].parent;return a.conversion=r,a}var rd=function(e){for(var t=Zl(e),r={},a=Object.keys(t),s=a.length,n=0;n<s;n++){var i=a[n],u=t[i];u.parent!==null&&(r[i]=td(i,t))}return r},Fa=xi,ad=rd,wt={},sd=Object.keys(Fa);function nd(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function id(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var a=e(r);if(typeof a=="object")for(var s=a.length,n=0;n<s;n++)a[n]=Math.round(a[n]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}sd.forEach(function(e){wt[e]={},Object.defineProperty(wt[e],"channels",{value:Fa[e].channels}),Object.defineProperty(wt[e],"labels",{value:Fa[e].labels});var t=ad(e),r=Object.keys(t);r.forEach(function(a){var s=t[a];wt[e][a]=id(s),wt[e][a].raw=nd(s)})});var ud=wt;ds.exports;(function(e){const t=ud,r=(i,u)=>function(){return`\x1B[${i.apply(t,arguments)+u}m`},a=(i,u)=>function(){const o=i.apply(t,arguments);return`\x1B[${38+u};5;${o}m`},s=(i,u)=>function(){const o=i.apply(t,arguments);return`\x1B[${38+u};2;${o[0]};${o[1]};${o[2]}m`};function n(){const i=new Map,u={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};u.color.grey=u.color.gray;for(const f of Object.keys(u)){const h=u[f];for(const m of Object.keys(h)){const p=h[m];u[m]={open:`\x1B[${p[0]}m`,close:`\x1B[${p[1]}m`},h[m]=u[m],i.set(p[0],p[1])}Object.defineProperty(u,f,{value:h,enumerable:!1}),Object.defineProperty(u,"codes",{value:i,enumerable:!1})}const o=f=>f,d=(f,h,m)=>[f,h,m];u.color.close="\x1B[39m",u.bgColor.close="\x1B[49m",u.color.ansi={ansi:r(o,0)},u.color.ansi256={ansi256:a(o,0)},u.color.ansi16m={rgb:s(d,0)},u.bgColor.ansi={ansi:r(o,10)},u.bgColor.ansi256={ansi256:a(o,10)},u.bgColor.ansi16m={rgb:s(d,10)};for(let f of Object.keys(t)){if(typeof t[f]!="object")continue;const h=t[f];f==="ansi16"&&(f="ansi"),"ansi16"in h&&(u.color.ansi[f]=r(h.ansi16,0),u.bgColor.ansi[f]=r(h.ansi16,10)),"ansi256"in h&&(u.color.ansi256[f]=a(h.ansi256,0),u.bgColor.ansi256[f]=a(h.ansi256,10)),"rgb"in h&&(u.color.ansi16m[f]=s(h.rgb,0),u.bgColor.ansi16m[f]=s(h.rgb,10))}return u}Object.defineProperty(e,"exports",{enumerable:!0,get:n})})(ds);var od=ds.exports,cd={stdout:!1,stderr:!1};const ld=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,fn=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,dd=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,fd=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,hd=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function Ri(e){return e[0]==="u"&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):hd.get(e)||e}function md(e,t){const r=[],a=t.trim().split(/\s*,\s*/g);let s;for(const n of a)if(!isNaN(n))r.push(Number(n));else if(s=n.match(dd))r.push(s[2].replace(fd,(i,u,o)=>u?Ri(u):o));else throw new Error(`Invalid Chalk template style argument: ${n} (in style '${e}')`);return r}function pd(e){fn.lastIndex=0;const t=[];let r;for(;(r=fn.exec(e))!==null;){const a=r[1];if(r[2]){const s=md(a,r[2]);t.push([a].concat(s))}else t.push([a])}return t}function hn(e,t){const r={};for(const s of t)for(const n of s.styles)r[n[0]]=s.inverse?null:n.slice(1);let a=e;for(const s of Object.keys(r))if(Array.isArray(r[s])){if(!(s in a))throw new Error(`Unknown Chalk style: ${s}`);r[s].length>0?a=a[s].apply(a,r[s]):a=a[s]}return a}var Ed=(e,t)=>{const r=[],a=[];let s=[];if(t.replace(ld,(n,i,u,o,d,f)=>{if(i)s.push(Ri(i));else if(o){const h=s.join("");s=[],a.push(r.length===0?h:hn(e,r)(h)),r.push({inverse:u,styles:pd(o)})}else if(d){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");a.push(hn(e,r)(s.join(""))),s=[],r.pop()}else s.push(f)}),a.push(s.join("")),r.length>0){const n=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(n)}return a.join("")};(function(e){var t={};const r=ql,a=od,s=cd.stdout,n=Ed,i=nc.platform==="win32"&&!(t.TERM||"").toLowerCase().startsWith("xterm"),u=["ansi","ansi","ansi256","ansi16m"],o=new Set(["gray"]),d=Object.create(null);function f(v,A){A=A||{};const y=s?s.level:0;v.level=A.level===void 0?y:A.level,v.enabled="enabled"in A?A.enabled:v.level>0}function h(v){if(!this||!(this instanceof h)||this.template){const A={};return f(A,v),A.template=function(){const y=[].slice.call(arguments);return C.apply(null,[A.template].concat(y))},Object.setPrototypeOf(A,h.prototype),Object.setPrototypeOf(A.template,A),A.template.constructor=h,A.template}f(this,v)}i&&(a.blue.open="\x1B[94m");for(const v of Object.keys(a))a[v].closeRe=new RegExp(r(a[v].close),"g"),d[v]={get(){const A=a[v];return p.call(this,this._styles?this._styles.concat(A):[A],this._empty,v)}};d.visible={get(){return p.call(this,this._styles||[],!0,"visible")}},a.color.closeRe=new RegExp(r(a.color.close),"g");for(const v of Object.keys(a.color.ansi))o.has(v)||(d[v]={get(){const A=this.level;return function(){const N={open:a.color[u[A]][v].apply(null,arguments),close:a.color.close,closeRe:a.color.closeRe};return p.call(this,this._styles?this._styles.concat(N):[N],this._empty,v)}}});a.bgColor.closeRe=new RegExp(r(a.bgColor.close),"g");for(const v of Object.keys(a.bgColor.ansi)){if(o.has(v))continue;const A="bg"+v[0].toUpperCase()+v.slice(1);d[A]={get(){const y=this.level;return function(){const D={open:a.bgColor[u[y]][v].apply(null,arguments),close:a.bgColor.close,closeRe:a.bgColor.closeRe};return p.call(this,this._styles?this._styles.concat(D):[D],this._empty,v)}}}}const m=Object.defineProperties(()=>{},d);function p(v,A,y){const N=function(){return T.apply(N,arguments)};N._styles=v,N._empty=A;const D=this;return Object.defineProperty(N,"level",{enumerable:!0,get(){return D.level},set(P){D.level=P}}),Object.defineProperty(N,"enabled",{enumerable:!0,get(){return D.enabled},set(P){D.enabled=P}}),N.hasGrey=this.hasGrey||y==="gray"||y==="grey",N.__proto__=m,N}function T(){const v=arguments,A=v.length;let y=String(arguments[0]);if(A===0)return"";if(A>1)for(let D=1;D<A;D++)y+=" "+v[D];if(!this.enabled||this.level<=0||!y)return this._empty?"":y;const N=a.dim.open;i&&this.hasGrey&&(a.dim.open="");for(const D of this._styles.slice().reverse())y=D.open+y.replace(D.closeRe,D.open)+D.close,y=y.replace(/\r?\n/g,`${D.close}$&${D.open}`);return a.dim.open=N,y}function C(v,A){if(!Array.isArray(A))return[].slice.call(arguments,1).join(" ");const y=[].slice.call(arguments,2),N=[A.raw[0]];for(let D=1;D<A.length;D++)N.push(String(y[D-1]).replace(/[{}\\]/g,"\\$&")),N.push(String(A.raw[D]));return n(v,N.join(""))}Object.defineProperties(h.prototype,d),e.exports=h(),e.exports.supportsColor=s,e.exports.default=e.exports})(Ni);var bd=Ni.exports;const mn=or(bd);var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},dt=function(){function e(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),fs=function e(t,r,a){t===null&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(s===void 0){var n=Object.getPrototypeOf(t);return n===null?void 0:e(n,r,a)}else{if("value"in s)return s.value;var i=s.get;return i===void 0?void 0:i.call(a)}},Pt=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Mt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Td=function(){function e(t){Ze(this,e),this.selfOptions=t||{},this.pipes={}}return dt(e,[{key:"options",value:function(r){return r&&(this.selfOptions=r),this.selfOptions}},{key:"pipe",value:function(r,a){var s=a;if(typeof r=="string"){if(typeof s>"u")return this.pipes[r];this.pipes[r]=s}if(r&&r.name){if(s=r,s.processor===this)return s;this.pipes[s.name]=s}return s.processor=this,s}},{key:"process",value:function(r,a){var s=r;s.options=this.options();for(var n=a||r.pipe||"default",i=void 0,u=void 0;n;)typeof s.nextAfterChildren<"u"&&(s.next=s.nextAfterChildren,s.nextAfterChildren=null),typeof n=="string"&&(n=this.pipe(n)),n.process(s),u=s,i=n,n=null,s&&s.next&&(s=s.next,n=u.nextPipe||s.pipe||i);return s.hasResult?s.result:void 0}}]),e}(),Rr=function(){function e(t){Ze(this,e),this.name=t,this.filters=[]}return dt(e,[{key:"process",value:function(r){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var a=this.debug,s=this.filters.length,n=r,i=0;i<s;i++){var u=this.filters[i];if(a&&this.log("filter: "+u.filterName),u(n),(typeof n>"u"?"undefined":ct(n))==="object"&&n.exiting){n.exiting=!1;break}}!n.next&&this.resultCheck&&this.resultCheck(n)}},{key:"log",value:function(r){console.log("[jsondiffpatch] "+this.name+" pipe, "+r)}},{key:"append",value:function(){var r;return(r=this.filters).push.apply(r,arguments),this}},{key:"prepend",value:function(){var r;return(r=this.filters).unshift.apply(r,arguments),this}},{key:"indexOf",value:function(r){if(!r)throw new Error("a filter name is required");for(var a=0;a<this.filters.length;a++){var s=this.filters[a];if(s.filterName===r)return a}throw new Error("filter not found: "+r)}},{key:"list",value:function(){return this.filters.map(function(r){return r.filterName})}},{key:"after",value:function(r){var a=this.indexOf(r),s=Array.prototype.slice.call(arguments,1);if(!s.length)throw new Error("a filter is required");return s.unshift(a+1,0),Array.prototype.splice.apply(this.filters,s),this}},{key:"before",value:function(r){var a=this.indexOf(r),s=Array.prototype.slice.call(arguments,1);if(!s.length)throw new Error("a filter is required");return s.unshift(a,0),Array.prototype.splice.apply(this.filters,s),this}},{key:"replace",value:function(r){var a=this.indexOf(r),s=Array.prototype.slice.call(arguments,1);if(!s.length)throw new Error("a filter is required");return s.unshift(a,1),Array.prototype.splice.apply(this.filters,s),this}},{key:"remove",value:function(r){var a=this.indexOf(r);return this.filters.splice(a,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(r){if(r===!1){this.resultCheck=null;return}if(!this.resultCheck){var a=this;return this.resultCheck=function(s){if(!s.hasResult){console.log(s);var n=new Error(a.name+" failed");throw n.noResult=!0,n}},this}}}]),e}(),wr=function(){function e(){Ze(this,e)}return dt(e,[{key:"setResult",value:function(r){return this.result=r,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(r,a){return typeof r=="string"||r instanceof Rr?this.nextPipe=r:(this.next=r,a&&(this.nextPipe=a)),this}},{key:"push",value:function(r,a){return r.parent=this,typeof a<"u"&&(r.childName=a),r.root=this.root||this,r.options=r.options||this.options,this.children?(this.children[this.children.length-1].next=r,this.children.push(r)):(this.children=[r],this.nextAfterChildren=this.next||null,this.next=r),r.next=this,this}}]),e}(),gd=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array};function _d(e){var t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}function Br(e){if((typeof e>"u"?"undefined":ct(e))!=="object")return e;if(e===null)return null;if(gd(e))return e.map(Br);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return _d(e);var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Br(e[r]));return t}var Dt=function(e){Pt(t,e);function t(r,a){Ze(this,t);var s=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.left=r,s.right=a,s.pipe="diff",s}return dt(t,[{key:"setResult",value:function(a){if(this.options.cloneDiffValues&&(typeof a>"u"?"undefined":ct(a))==="object"){var s=typeof this.options.cloneDiffValues=="function"?this.options.cloneDiffValues:Br;ct(a[0])==="object"&&(a[0]=s(a[0])),ct(a[1])==="object"&&(a[1]=s(a[1]))}return wr.prototype.setResult.apply(this,arguments)}}]),t}(wr),hs=function(e){Pt(t,e);function t(r,a){Ze(this,t);var s=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.left=r,s.delta=a,s.pipe="patch",s}return t}(wr),ms=function(e){Pt(t,e);function t(r){Ze(this,t);var a=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.delta=r,a.pipe="reverse",a}return t}(wr),Fr=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},Si=function(t){if(t.left===t.right){t.setResult(void 0).exit();return}if(typeof t.left>"u"){if(typeof t.right=="function")throw new Error("functions are not supported");t.setResult([t.right]).exit();return}if(typeof t.right>"u"){t.setResult([t.left,0,0]).exit();return}if(typeof t.left=="function"||typeof t.right=="function")throw new Error("functions are not supported");if(t.leftType=t.left===null?"null":ct(t.left),t.rightType=t.right===null?"null":ct(t.right),t.leftType!==t.rightType){t.setResult([t.left,t.right]).exit();return}if(t.leftType==="boolean"||t.leftType==="number"){t.setResult([t.left,t.right]).exit();return}if(t.leftType==="object"&&(t.leftIsArray=Fr(t.left)),t.rightType==="object"&&(t.rightIsArray=Fr(t.right)),t.leftIsArray!==t.rightIsArray){t.setResult([t.left,t.right]).exit();return}t.left instanceof RegExp&&(t.right instanceof RegExp?t.setResult([t.left.toString(),t.right.toString()]).exit():t.setResult([t.left,t.right]).exit())};Si.filterName="trivial";var ki=function(t){if(typeof t.delta>"u"){t.setResult(t.left).exit();return}if(t.nested=!Fr(t.delta),!t.nested){if(t.delta.length===1){t.setResult(t.delta[0]).exit();return}if(t.delta.length===2){if(t.left instanceof RegExp){var r=/^\/(.*)\/([gimyu]+)$/.exec(t.delta[1]);if(r){t.setResult(new RegExp(r[1],r[2])).exit();return}}t.setResult(t.delta[1]).exit();return}t.delta.length===3&&t.delta[2]===0&&t.setResult(void 0).exit()}};ki.filterName="trivial";var Pi=function(t){if(typeof t.delta>"u"){t.setResult(t.delta).exit();return}if(t.nested=!Fr(t.delta),!t.nested){if(t.delta.length===1){t.setResult([t.delta[0],0,0]).exit();return}if(t.delta.length===2){t.setResult([t.delta[1],t.delta[0]]).exit();return}t.delta.length===3&&t.delta[2]===0&&t.setResult([t.delta[0]]).exit()}};Pi.filterName="trivial";function Mi(e){if(!(!e||!e.children)){for(var t=e.children.length,r=void 0,a=e.result,s=0;s<t;s++)r=e.children[s],!(typeof r.result>"u")&&(a=a||{},a[r.childName]=r.result);a&&e.leftIsArray&&(a._t="a"),e.setResult(a).exit()}}Mi.filterName="collectChildren";function Li(e){if(!(e.leftIsArray||e.leftType!=="object")){var t=void 0,r=void 0,a=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(a&&!a(t,e)||(r=new Dt(e.left[t],e.right[t]),e.push(r,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(a&&!a(t,e)||typeof e.left[t]>"u"&&(r=new Dt(void 0,e.right[t]),e.push(r,t)));if(!e.children||e.children.length===0){e.setResult(void 0).exit();return}e.exit()}}Li.filterName="objects";var Oi=function(t){if(t.nested&&!t.delta._t){var r=void 0,a=void 0;for(r in t.delta)a=new hs(t.left[r],t.delta[r]),t.push(a,r);t.exit()}};Oi.filterName="objects";var wi=function(t){if(!(!t||!t.children)&&!t.delta._t){for(var r=t.children.length,a=void 0,s=0;s<r;s++)a=t.children[s],Object.prototype.hasOwnProperty.call(t.left,a.childName)&&a.result===void 0?delete t.left[a.childName]:t.left[a.childName]!==a.result&&(t.left[a.childName]=a.result);t.setResult(t.left).exit()}};wi.filterName="collectChildren";var Bi=function(t){if(t.nested&&!t.delta._t){var r=void 0,a=void 0;for(r in t.delta)a=new ms(t.delta[r]),t.push(a,r);t.exit()}};Bi.filterName="objects";function Fi(e){if(!(!e||!e.children)&&!e.delta._t){for(var t=e.children.length,r=void 0,a={},s=0;s<t;s++)r=e.children[s],a[r.childName]!==r.result&&(a[r.childName]=r.result);e.setResult(a).exit()}}Fi.filterName="collectChildren";var vd=function(t,r,a,s){return t[a]===r[s]},Cd=function(t,r,a,s){var n=t.length,i=r.length,u=void 0,o=void 0,d=[n+1];for(u=0;u<n+1;u++)for(d[u]=[i+1],o=0;o<i+1;o++)d[u][o]=0;for(d.match=a,u=1;u<n+1;u++)for(o=1;o<i+1;o++)a(t,r,u-1,o-1,s)?d[u][o]=d[u-1][o-1]+1:d[u][o]=Math.max(d[u-1][o],d[u][o-1]);return d},Ad=function(t,r,a,s){for(var n=r.length,i=a.length,u={sequence:[],indices1:[],indices2:[]};n!==0&&i!==0;){var o=t.match(r,a,n-1,i-1,s);if(o)u.sequence.unshift(r[n-1]),u.indices1.unshift(n-1),u.indices2.unshift(i-1),--n,--i;else{var d=t[n][i-1],f=t[n-1][i];d>f?--i:--n}}return u},yd=function(t,r,a,s){var n=s||{},i=Cd(t,r,a||vd,n),u=Ad(i,t,r,n);return typeof t=="string"&&typeof r=="string"&&(u.sequence=u.sequence.join("")),u},Nd={get:yd},Ut=3,pn=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},En=typeof Array.prototype.indexOf=="function"?function(e,t){return e.indexOf(t)}:function(e,t){for(var r=e.length,a=0;a<r;a++)if(e[a]===t)return a;return-1};function Id(e,t,r,a){for(var s=0;s<r;s++)for(var n=e[s],i=0;i<a;i++){var u=t[i];if(s!==i&&n===u)return!0}}function gr(e,t,r,a,s){var n=e[r],i=t[a];if(n===i)return!0;if((typeof n>"u"?"undefined":ct(n))!=="object"||(typeof i>"u"?"undefined":ct(i))!=="object")return!1;var u=s.objectHash;if(!u)return s.matchByPosition&&r===a;var o=void 0,d=void 0;return typeof r=="number"?(s.hashCache1=s.hashCache1||[],o=s.hashCache1[r],typeof o>"u"&&(s.hashCache1[r]=o=u(n,r))):o=u(n),typeof o>"u"||(typeof a=="number"?(s.hashCache2=s.hashCache2||[],d=s.hashCache2[a],typeof d>"u"&&(s.hashCache2[a]=d=u(i,a))):d=u(i),typeof d>"u")?!1:o===d}var Hi=function(t){if(t.leftIsArray){var r={objectHash:t.options&&t.options.objectHash,matchByPosition:t.options&&t.options.matchByPosition},a=0,s=0,n=void 0,i=void 0,u=void 0,o=t.left,d=t.right,f=o.length,h=d.length,m=void 0;for(f>0&&h>0&&!r.objectHash&&typeof r.matchByPosition!="boolean"&&(r.matchByPosition=!Id(o,d,f,h));a<f&&a<h&&gr(o,d,a,a,r);)n=a,m=new Dt(t.left[n],t.right[n]),t.push(m,n),a++;for(;s+a<f&&s+a<h&&gr(o,d,f-1-s,h-1-s,r);)i=f-1-s,u=h-1-s,m=new Dt(t.left[i],t.right[u]),t.push(m,u),s++;var p=void 0;if(a+s===f){if(f===h){t.setResult(void 0).exit();return}for(p=p||{_t:"a"},n=a;n<h-s;n++)p[n]=[d[n]];t.setResult(p).exit();return}if(a+s===h){for(p=p||{_t:"a"},n=a;n<f-s;n++)p["_"+n]=[o[n],0,0];t.setResult(p).exit();return}delete r.hashCache1,delete r.hashCache2;var T=o.slice(a,f-s),C=d.slice(a,h-s),v=Nd.get(T,C,gr,r),A=[];for(p=p||{_t:"a"},n=a;n<f-s;n++)En(v.indices1,n-a)<0&&(p["_"+n]=[o[n],0,0],A.push(n));var y=!0;t.options&&t.options.arrays&&t.options.arrays.detectMove===!1&&(y=!1);var N=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(N=!0);var D=A.length;for(n=a;n<h-s;n++){var P=En(v.indices2,n-a);if(P<0){var R=!1;if(y&&D>0){for(var M=0;M<D;M++)if(i=A[M],gr(T,C,i-a,n-a,r)){p["_"+i].splice(1,2,n,Ut),N||(p["_"+i][0]=""),u=n,m=new Dt(t.left[i],t.right[u]),t.push(m,u),A.splice(M,1),R=!0;break}}R||(p[n]=[d[n]])}else i=v.indices1[P]+a,u=v.indices2[P]+a,m=new Dt(t.left[i],t.right[u]),t.push(m,u)}t.setResult(p).exit()}};Hi.filterName="arrays";var bn={numerically:function(t,r){return t-r},numericallyBy:function(t){return function(r,a){return r[t]-a[t]}}},ji=function(t){if(t.nested&&t.delta._t==="a"){var r=void 0,a=void 0,s=t.delta,n=t.left,i=[],u=[],o=[];for(r in s)if(r!=="_t")if(r[0]==="_")if(s[r][2]===0||s[r][2]===Ut)i.push(parseInt(r.slice(1),10));else throw new Error("only removal or move can be applied at original array indices,"+(" invalid diff type: "+s[r][2]));else s[r].length===1?u.push({index:parseInt(r,10),value:s[r][0]}):o.push({index:parseInt(r,10),delta:s[r]});for(i=i.sort(bn.numerically),r=i.length-1;r>=0;r--){a=i[r];var d=s["_"+a],f=n.splice(a,1)[0];d[2]===Ut&&u.push({index:d[1],value:f})}u=u.sort(bn.numericallyBy("index"));var h=u.length;for(r=0;r<h;r++){var m=u[r];n.splice(m.index,0,m.value)}var p=o.length,T=void 0;if(p>0)for(r=0;r<p;r++){var C=o[r];T=new hs(t.left[C.index],C.delta),t.push(T,C.index)}if(!t.children){t.setResult(t.left).exit();return}t.exit()}};ji.filterName="arrays";var Ui=function(t){if(!(!t||!t.children)&&t.delta._t==="a"){for(var r=t.children.length,a=void 0,s=0;s<r;s++)a=t.children[s],t.left[a.childName]=a.result;t.setResult(t.left).exit()}};Ui.filterName="arraysCollectChildren";var Yi=function(t){if(!t.nested){t.delta[2]===Ut&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),Ut]).exit());return}if(t.delta._t==="a"){var r=void 0,a=void 0;for(r in t.delta)r!=="_t"&&(a=new ms(t.delta[r]),t.push(a,r));t.exit()}};Yi.filterName="arrays";var Dd=function(t,r,a){if(typeof r=="string"&&r[0]==="_")return parseInt(r.substr(1),10);if(pn(a)&&a[2]===0)return"_"+r;var s=+r;for(var n in t){var i=t[n];if(pn(i))if(i[2]===Ut){var u=parseInt(n.substr(1),10),o=i[1];if(o===+r)return u;u<=s&&o>s?s++:u>=s&&o<s&&s--}else if(i[2]===0){var d=parseInt(n.substr(1),10);d<=s&&s++}else i.length===1&&n<=s&&s--}return s};function Vi(e){if(!(!e||!e.children)&&e.delta._t==="a"){for(var t=e.children.length,r=void 0,a={_t:"a"},s=0;s<t;s++){r=e.children[s];var n=r.newName;typeof n>"u"&&(n=Dd(e.delta,r.childName,r.result)),a[n]!==r.result&&(a[n]=r.result)}e.setResult(a).exit()}}Vi.filterName="arraysCollectChildren";var $i=function(t){t.left instanceof Date?(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?t.setResult([t.left,t.right]):t.setResult(void 0):t.setResult([t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};$i.filterName="dates";var Hr=2,xd=60,_a=null,Wi=function(t){if(!_a){var r=void 0;if(typeof diff_match_patch<"u")r=typeof diff_match_patch=="function"?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(Ta)try{r=Ta&&new Ta}catch{r=null}if(!r){if(!t)return null;var a=new Error("text diff_match_patch library not found");throw a.diff_match_patch_not_found=!0,a}_a={diff:function(n,i){return r.patch_toText(r.patch_make(n,i))},patch:function(n,i){for(var u=r.patch_apply(r.patch_fromText(i),n),o=0;o<u[1].length;o++)if(!u[1][o]){var d=new Error("text patch failed");d.textPatchFailed=!0}return u[0]}}}return _a},zi=function(t){if(t.leftType==="string"){var r=t.options&&t.options.textDiff&&t.options.textDiff.minLength||xd;if(t.left.length<r||t.right.length<r){t.setResult([t.left,t.right]).exit();return}var a=Wi();if(!a){t.setResult([t.left,t.right]).exit();return}var s=a.diff;t.setResult([s(t.left,t.right),0,Hr]).exit()}};zi.filterName="texts";var qi=function(t){if(!t.nested&&t.delta[2]===Hr){var r=Wi(!0).patch;t.setResult(r(t.left,t.delta[0])).exit()}};qi.filterName="texts";var Rd=function(t){var r=void 0,a=void 0,s=void 0,n=void 0,i=void 0,u=null,o=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,d=void 0;for(s=t.split(`
`),r=0,a=s.length;r<a;r++){n=s[r];var f=n.slice(0,1);f==="@"?(u=o.exec(n),d=r,s[d]="@@ -"+u[3]+","+u[4]+" +"+u[1]+","+u[2]+" @@"):f==="+"?(s[r]="-"+s[r].slice(1),s[r-1].slice(0,1)==="+"&&(i=s[r],s[r]=s[r-1],s[r-1]=i)):f==="-"&&(s[r]="+"+s[r].slice(1))}return s.join(`
`)},Gi=function(t){t.nested||t.delta[2]===Hr&&t.setResult([Rd(t.delta[0]),0,Hr]).exit()};Gi.filterName="texts";var Sd=function(){function e(t){Ze(this,e),this.processor=new Td(t),this.processor.pipe(new Rr("diff").append(Mi,Si,$i,zi,Li,Hi).shouldHaveResult()),this.processor.pipe(new Rr("patch").append(wi,Ui,ki,qi,Oi,ji).shouldHaveResult()),this.processor.pipe(new Rr("reverse").append(Fi,Vi,Pi,Gi,Bi,Yi).shouldHaveResult())}return dt(e,[{key:"options",value:function(){var r;return(r=this.processor).options.apply(r,arguments)}},{key:"diff",value:function(r,a){return this.processor.process(new Dt(r,a))}},{key:"patch",value:function(r,a){return this.processor.process(new hs(r,a))}},{key:"reverse",value:function(r){return this.processor.process(new ms(r))}},{key:"unpatch",value:function(r,a){return this.patch(r,this.reverse(a))}},{key:"clone",value:function(r){return Br(r)}}]),e}(),va=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},kd=typeof Object.keys=="function"?function(e){return Object.keys(e)}:function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},Pd=function(t){return t.substr(0,1)==="_"?t.slice(1):t},Tn=function(t){return t==="_t"?-1:t.substr(0,1)==="_"?parseInt(t.slice(1),10):parseInt(t,10)+.1},Md=function(t,r){return Tn(t)-Tn(r)},sa=function(){function e(){Ze(this,e)}return dt(e,[{key:"format",value:function(r,a){var s={};return this.prepareContext(s),this.recurse(s,r,a),this.finalize(s)}},{key:"prepareContext",value:function(r){r.buffer=[],r.out=function(){var a;(a=this.buffer).push.apply(a,arguments)}}},{key:"typeFormattterNotFound",value:function(r,a){throw new Error("cannot format delta type: "+a)}},{key:"typeFormattterErrorFormatter",value:function(r,a){return a.toString()}},{key:"finalize",value:function(r){var a=r.buffer;if(va(a))return a.join("")}},{key:"recurse",value:function(r,a,s,n,i,u,o){var d=a&&u,f=d?u.value:s;if(!(typeof a>"u"&&typeof n>"u")){var h=this.getDeltaType(a,u),m=h==="node"?a._t==="a"?"array":"object":"";typeof n<"u"?this.nodeBegin(r,n,i,h,m,o):this.rootBegin(r,h,m);var p=void 0;try{p=this["format_"+h]||this.typeFormattterNotFound(r,h),p.call(this,r,a,f,n,i,u)}catch(T){this.typeFormattterErrorFormatter(r,T,a,f,n,i,u),typeof console<"u"&&console.error&&console.error(T.stack)}typeof n<"u"?this.nodeEnd(r,n,i,h,m,o):this.rootEnd(r,h,m)}}},{key:"formatDeltaChildren",value:function(r,a,s){var n=this;this.forEachDeltaKey(a,s,function(i,u,o,d){n.recurse(r,a[i],s?s[u]:void 0,i,u,o,d)})}},{key:"forEachDeltaKey",value:function(r,a,s){var n=kd(r),i=r._t==="a",u={},o=void 0;if(typeof a<"u")for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&typeof r[o]>"u"&&(!i||typeof r["_"+o]>"u")&&n.push(o);for(o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var d=r[o];va(d)&&d[2]===3&&(u[d[1].toString()]={key:o,value:a&&a[parseInt(o.substr(1))]},this.includeMoveDestinations!==!1&&typeof a>"u"&&typeof r[d[1]]>"u"&&n.push(d[1].toString()))}i?n.sort(Md):n.sort();for(var f=0,h=n.length;f<h;f++){var m=n[f];if(!(i&&m==="_t")){var p=i?typeof m=="number"?m:parseInt(Pd(m),10):m,T=f===h-1;s(m,p,u[p],T)}}}},{key:"getDeltaType",value:function(r,a){if(typeof r>"u")return typeof a<"u"?"movedestination":"unchanged";if(va(r)){if(r.length===1)return"added";if(r.length===2)return"modified";if(r.length===3&&r[2]===0)return"deleted";if(r.length===3&&r[2]===2)return"textdiff";if(r.length===3&&r[2]===3)return"moved"}else if((typeof r>"u"?"undefined":ct(r))==="object")return"node";return"unknown"}},{key:"parseTextDiff",value:function(r){for(var a=[],s=r.split(`
@@ `),n=0,i=s.length;n<i;n++){var u=s[n],o={pieces:[]},d=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(u).slice(1);o.location={line:d[0],chr:d[1]};for(var f=u.split(`
`).slice(1),h=0,m=f.length;h<m;h++){var p=f[h];if(p.length){var T={type:"context"};p.substr(0,1)==="+"?T.type="added":p.substr(0,1)==="-"&&(T.type="deleted"),T.text=p.slice(1),o.pieces.push(T)}}a.push(o)}return a}}]),e}();(function(e){Pt(t,e);function t(){return Ze(this,t),Mt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return dt(t,[{key:"typeFormattterErrorFormatter",value:function(a,s){a.out('<pre class="jsondiffpatch-error">'+s+"</pre>")}},{key:"formatValue",value:function(a,s){a.out("<pre>"+gn(JSON.stringify(s,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(a,s){var n=this.parseTextDiff(s);a.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,u=n.length;i<u;i++){var o=n[i];a.out('<li><div class="jsondiffpatch-textdiff-location">'+('<span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">'));for(var d=o.pieces,f=0,h=d.length;f<h;f++){var m=d[f];a.out('<span class="jsondiffpatch-textdiff-'+m.type+'">'+gn(decodeURI(m.text))+"</span>")}a.out("</div></li>")}a.out("</ul>")}},{key:"rootBegin",value:function(a,s,n){var i="jsondiffpatch-"+s+(n?" jsondiffpatch-child-node-type-"+n:"");a.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(a){a.out("</div>"+(a.hasArrows?'<script type="text/javascript">setTimeout('+(Ld.toString()+",10);<\/script>"):""))}},{key:"nodeBegin",value:function(a,s,n,i,u){var o="jsondiffpatch-"+i+(u?" jsondiffpatch-child-node-type-"+u:"");a.out('<li class="'+o+'" data-key="'+n+'">'+('<div class="jsondiffpatch-property-name">'+n+"</div>"))}},{key:"nodeEnd",value:function(a){a.out("</li>")}},{key:"format_unchanged",value:function(a,s,n){typeof n>"u"||(a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,n),a.out("</div>"))}},{key:"format_movedestination",value:function(a,s,n){typeof n>"u"||(a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,n),a.out("</div>"))}},{key:"format_node",value:function(a,s,n){var i=s._t==="a"?"array":"object";a.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(a,s,n),a.out("</ul>")}},{key:"format_added",value:function(a,s){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,s[0]),a.out("</div>")}},{key:"format_modified",value:function(a,s){a.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(a,s[0]),a.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(a,s[1]),a.out("</div>")}},{key:"format_deleted",value:function(a,s){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,s[0]),a.out("</div>")}},{key:"format_moved",value:function(a,s){a.out('<div class="jsondiffpatch-value">'),this.formatValue(a,s[0]),a.out('</div><div class="jsondiffpatch-moved-destination">'+s[1]+"</div>"),a.out(`<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">
          <svg width="30" height="60" style="position: absolute; display: none;">
          <defs>
              <marker id="markerArrow" markerWidth="8" markerHeight="8"
                 refx="2" refy="4"
                     orient="auto" markerUnits="userSpaceOnUse">
                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />
              </marker>
          </defs>
          <path d="M30,0 Q-10,25 26,50"
            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"
          ></path>
          </svg>
      </div>`),a.hasArrows=!0}},{key:"format_textdiff",value:function(a,s){a.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(a,s[0]),a.out("</div>")}}]),t})(sa);function gn(e){for(var t=e,r=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],a=0;a<r.length;a++)t=t.replace(r[a][0],r[a][1]);return t}var Ld=function(t){var r=t||document,a=function(u){var o=u.textContent,d=u.innerText;return o||d},s=function(u,o,d){for(var f=u.querySelectorAll(o),h=0,m=f.length;h<m;h++)d(f[h])},n=function(u,o){for(var d=u.children,f=0,h=d.length;f<h;f++)o(d[f],f)};s(r,".jsondiffpatch-arrow",function(i){var u=i.parentNode,o=i.children,d=i.style,f=u,h=o[0],m=h.children[1];h.style.display="none";var p=a(f.querySelector(".jsondiffpatch-moved-destination")),T=f.parentNode,C=void 0;if(n(T,function(y){y.getAttribute("data-key")===p&&(C=y)}),!!C)try{var v=C.offsetTop-f.offsetTop;h.setAttribute("height",Math.abs(v)+6),d.top=-8+(v>0?0:v)+"px";var A=v>0?"M30,0 Q-10,"+Math.round(v/2)+" 26,"+(v-4):"M30,"+-v+" Q-10,"+Math.round(-v/2)+" 26,4";m.setAttribute("d",A),h.style.display=""}catch{}})},dr=function(e){Pt(t,e);function t(){Ze(this,t);var r=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.includeMoveDestinations=!1,r}return dt(t,[{key:"prepareContext",value:function(a){fs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,a),a.indent=function(s){this.indentLevel=(this.indentLevel||0)+(typeof s>"u"?1:s),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},a.row=function(s,n){a.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),a.out(a.indentPad),a.out('</pre><pre style="display: inline-block">'),a.out(s),a.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),a.out(n),a.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(a,s){a.row("",'<pre class="jsondiffpatch-error">'+s+"</pre>")}},{key:"formatTextDiffString",value:function(a,s){var n=this.parseTextDiff(s);a.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,u=n.length;i<u;i++){var o=n[i];a.out('<li><div class="jsondiffpatch-textdiff-location">'+('<span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">'));for(var d=o.pieces,f=0,h=d.length;f<h;f++){var m=d[f];a.out('<span class="jsondiffpatch-textdiff-'+m.type+'">'+m.text+"</span>")}a.out("</div></li>")}a.out("</ul>")}},{key:"rootBegin",value:function(a,s,n){a.out('<table class="jsondiffpatch-annotated-delta">'),s==="node"&&(a.row("{"),a.indent()),n==="array"&&a.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(a,s){s==="node"&&(a.indent(-1),a.row("}")),a.out("</table>")}},{key:"nodeBegin",value:function(a,s,n,i,u){a.row("&quot;"+s+"&quot;: {"),i==="node"&&a.indent(),u==="array"&&a.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(a,s,n,i,u,o){i==="node"&&a.indent(-1),a.row("}"+(o?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(a,s,n){this.formatDeltaChildren(a,s,n)}}]),t}(sa),_r=function(t){return'<pre style="display:inline-block">&quot;'+t+"&quot;</pre>"},Od={added:function(t,r,a,s){var n=" <pre>([newValue])</pre>";return typeof s>"u"?"new value"+n:typeof s=="number"?"insert at index "+s+n:"add property "+_r(s)+n},modified:function(t,r,a,s){var n=" <pre>([previousValue, newValue])</pre>";return typeof s>"u"?"modify value"+n:typeof s=="number"?"modify at index "+s+n:"modify property "+_r(s)+n},deleted:function(t,r,a,s){var n=" <pre>([previousValue, 0, 0])</pre>";return typeof s>"u"?"delete value"+n:typeof s=="number"?"remove index "+s+n:"delete property "+_r(s)+n},moved:function(t,r,a,s){return'move from <span title="(position to remove at original state)">'+("index "+s+'</span> to <span title="(position to insert at final')+(' state)">index '+t[1]+"</span>")},textdiff:function(t,r,a,s){var n=typeof s>"u"?"":typeof s=="number"?" at index "+s:" at property "+_r(s);return"text diff"+n+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},fr=function(t,r){var a=this.getDeltaType(r),s=Od[a],n=s&&s.apply(s,Array.prototype.slice.call(arguments,1)),i=JSON.stringify(r,null,2);a==="textdiff"&&(i=i.split("\\n").join(`\\n"+
   "`)),t.indent(),t.row(i,n),t.indent(-1)};dr.prototype.format_added=fr;dr.prototype.format_modified=fr;dr.prototype.format_deleted=fr;dr.prototype.format_moved=fr;dr.prototype.format_textdiff=fr;var vr={add:"add",remove:"remove",replace:"replace",move:"move"};(function(e){Pt(t,e);function t(){Ze(this,t);var r=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.includeMoveDestinations=!0,r}return dt(t,[{key:"prepareContext",value:function(a){fs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,a),a.result=[],a.path=[],a.pushCurrentOp=function(s){var n=s.op,i=s.value,u={op:n,path:this.currentPath()};typeof i<"u"&&(u.value=i),this.result.push(u)},a.pushMoveOp=function(s){var n=this.currentPath();this.result.push({op:vr.move,from:n,path:this.toPath(s)})},a.currentPath=function(){return"/"+this.path.join("/")},a.toPath=function(s){var n=this.path.slice();return n[n.length-1]=s,"/"+n.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(a,s){a.out("[ERROR] "+s)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(a,s,n){var i=a.path;i.push(n)}},{key:"nodeEnd",value:function(a){var s=a.path;s.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(a,s,n){this.formatDeltaChildren(a,s,n)}},{key:"format_added",value:function(a,s){a.pushCurrentOp({op:vr.add,value:s[0]})}},{key:"format_modified",value:function(a,s){a.pushCurrentOp({op:vr.replace,value:s[1]})}},{key:"format_deleted",value:function(a){a.pushCurrentOp({op:vr.remove})}},{key:"format_moved",value:function(a,s){var n=s[1];a.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(a,s){var n={};return this.prepareContext(n),this.recurse(n,a,s),n.result}}]),t})(sa);function At(e){return mn&&mn[e]||function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return r}}var yt={added:At("green"),deleted:At("red"),movedestination:At("gray"),moved:At("yellow"),unchanged:At("gray"),error:At("white.bgRed"),textDiffLine:At("gray")};(function(e){Pt(t,e);function t(){Ze(this,t);var r=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.includeMoveDestinations=!1,r}return dt(t,[{key:"prepareContext",value:function(a){fs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,a),a.indent=function(s){this.indentLevel=(this.indentLevel||0)+(typeof s>"u"?1:s),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},a.outLine=function(){this.buffer.push(`
`+(this.indentPad||""))},a.out=function(){for(var s=arguments.length,n=Array(s),i=0;i<s;i++)n[i]=arguments[i];for(var u=0,o=n.length;u<o;u++){var d=n[u].split(`
`),f=d.join(`
`+(this.indentPad||""));this.color&&this.color[0]&&(f=this.color[0](f)),this.buffer.push(f)}},a.pushColor=function(s){this.color=this.color||[],this.color.unshift(s)},a.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(a,s){a.pushColor(yt.error),a.out("[ERROR]"+s),a.popColor()}},{key:"formatValue",value:function(a,s){a.out(JSON.stringify(s,null,2))}},{key:"formatTextDiffString",value:function(a,s){var n=this.parseTextDiff(s);a.indent();for(var i=0,u=n.length;i<u;i++){var o=n[i];a.pushColor(yt.textDiffLine),a.out(o.location.line+","+o.location.chr+" "),a.popColor();for(var d=o.pieces,f=0,h=d.length;f<h;f++){var m=d[f];a.pushColor(yt[m.type]),a.out(m.text),a.popColor()}i<u-1&&a.outLine()}a.indent(-1)}},{key:"rootBegin",value:function(a,s,n){a.pushColor(yt[s]),s==="node"&&(a.out(n==="array"?"[":"{"),a.indent())}},{key:"rootEnd",value:function(a,s,n){s==="node"&&(a.indent(-1),a.out(n==="array"?"]":"}")),a.popColor()}},{key:"nodeBegin",value:function(a,s,n,i,u){a.pushColor(yt[i]),a.out(n+": "),i==="node"&&(a.out(u==="array"?"[":"{"),a.indent())}},{key:"nodeEnd",value:function(a,s,n,i,u,o){i==="node"&&(a.indent(-1),a.out(u==="array"?"]":"}"+(o?"":","))),o||a.outLine(),a.popColor()}},{key:"format_unchanged",value:function(a,s,n){typeof n>"u"||this.formatValue(a,n)}},{key:"format_movedestination",value:function(a,s,n){typeof n>"u"||this.formatValue(a,n)}},{key:"format_node",value:function(a,s,n){this.formatDeltaChildren(a,s,n)}},{key:"format_added",value:function(a,s){this.formatValue(a,s[0])}},{key:"format_modified",value:function(a,s){a.pushColor(yt.deleted),this.formatValue(a,s[0]),a.popColor(),a.out(" => "),a.pushColor(yt.added),this.formatValue(a,s[1]),a.popColor()}},{key:"format_deleted",value:function(a,s){this.formatValue(a,s[0])}},{key:"format_moved",value:function(a,s){a.out("==> "+s[1])}},{key:"format_textdiff",value:function(a,s){this.formatTextDiffString(a,s[0])}}]),t})(sa);const kt={icon:void 0,value:void 0,label:""},wd=({anchorEl:e,header:t,options:r,onClick:a,onClose:s})=>l.jsxs(Pr,{anchorEl:e,keepMounted:!0,open:!!e,onClose:()=>s(),children:[t&&l.jsx(qe,{children:l.jsx(re,{color:"secondary",children:t})}),r.map((n,i)=>n===kt?l.jsx(si,{},i):l.jsxs(qe,{disabled:n.disabled,onClick:u=>{u.stopPropagation(),a(n.value,n)},children:[n.icon&&l.jsx(xr,{children:n.icon}),l.jsx(re,{variant:"inherit",children:n.label})]},i))]}),Bd=({options:e,label:t,buttonIcon:r,skipMenu:a,children:s,filter:n,filterOptions:i,onChangeFilter:u,onSearch:o,onSelect:d,dialog:f,dialogProps:h,buttonProps:m,open:p,onClose:T,extraFilter:C})=>{const[v,A]=E.useState(null),y=a||e.length===1,N=P=>{y?d(e.map(({value:R})=>R),e):A(P)},D=(P,R)=>{A(null),d([P],R?[R]:void 0)};return l.jsxs(l.Fragment,{children:[t?l.jsx(Ae,{color:"secondary",size:"small",onClick:P=>{P.stopPropagation(),N(P.currentTarget)},startIcon:r||(y?l.jsx(Lr,{}):l.jsx(ka,{})),...m,children:t}):l.jsx(Me,{color:"secondary",size:"small",onClick:P=>{P.stopPropagation(),N(P.currentTarget)},...m,children:r||(y?l.jsx(Lr,{}):l.jsx(ka,{}))}),l.jsx(wd,{options:e,anchorEl:v,onClick:D,onClose:()=>A(null)}),l.jsxs($t,{...h,open:!!p,onClose:T,maxWidth:!1,children:[l.jsx(Yc,{title:(f==null?void 0:f.title)||t,onSearch:o,isDialog:!0,filter:n,filterOptions:i,onChangeFilter:u,afterSearch:C,children:l.jsx(Me,{edge:"end",color:"inherit",onClick:T,"aria-label":"close",sx:{mr:-2},children:l.jsx(Jc,{})})}),l.jsx(U,{sx:{paddingTop:0,height:"100%",minHeight:f!=null&&f.tall?"80vh":"25vh",maxHeight:f!=null&&f.tall?"unset":void 0,minWidth:f!=null&&f.wide?"90vw":"25vw",maxWidth:f!=null&&f.wide?"unset":"40vw",boxSizing:"border-box",overflowY:"auto",display:"flex",flexDirection:"column"},children:p&&s})]})]})},Ki=(e,t)=>{const[r,a]=E.useState();return E.useEffect(()=>{a(e!=null&&e.path?`/regional-websites/${e==null?void 0:e.path}/card.jpg`:void 0)},[e,t]),r},Ha=({label:e,buttonProps:t,color:r="secondary",variant:a="text",icon:s,needConfirmation:n=!0,onConfirm:i,children:u})=>{const[o,d]=E.useState(!1),f=p=>{p.preventDefault(),p.stopPropagation(),p.metaKey?i():n?d(!0):i()},h=()=>{d(!1)},m=()=>{h(),i()};return l.jsxs(l.Fragment,{children:[e?l.jsx(Ae,{variant:a,color:r,onMouseDown:f,startIcon:s,...t,children:e}):l.jsx(Me,{onMouseDown:f,color:r,...t,size:"large",children:s}),l.jsxs($t,{open:o,onClose:h,maxWidth:"xs",fullWidth:!0,children:[l.jsx(Zr,{children:"Confirm"}),l.jsx(cr,{children:l.jsx(Ai,{children:u||l.jsx(l.Fragment,{children:"When you leave this screen unsaved changes will be lost."})})}),l.jsxs(lr,{children:[l.jsx(Ae,{onClick:h,color:r,children:"Cancel"}),l.jsx(Ae,{onClick:m,color:r,autoFocus:!0,children:"Confirm"})]})]})]})},jr=({image:e,imageResource:t,imageType:r,imageOnly:a,support_color:s,onRemoved:n,sx:i})=>{var C;const[u,o]=E.useState(t),[d,f]=E.useState(""),h=Ki(u,{w:300}),{needSave:m}=uc(),p=Xr();if(E.useEffect(()=>{o(t)},[t]),E.useEffect(()=>{var A;if(!e)return;const v=Et(e,p)||e.contents[0]||e.content;(A=v==null?void 0:v.images)!=null&&A.length&&v.images[0].path&&(o(v.images[0]),f(v.subtitle||""))},[e,p]),!u||!h)return l.jsx(Zs,{sx:i,children:l.jsx(en,{children:"No image resource found!"})});const T=()=>{bc.Inertia.get(Jr("admin.items.edit",{item:e.id}).toString(),{})};return l.jsxs(Zs,{sx:i,children:[l.jsx(Nl,{image:h,sx:{backgroundColor:s||"background.default",backgroundSize:"contain",paddingTop:`${900/16}%`,margin:"0 auto",maxWidth:(e==null?void 0:e.subtype)==="image.square"||(e==null?void 0:e.subtype)==="image.icon"||r==="image.square"||r==="image.icon"?`${900/16}%`:void 0}}),!a&&l.jsxs(l.Fragment,{children:[l.jsx(en,{children:l.jsx(Qc,{size:"small",children:l.jsxs(Xc,{children:[l.jsxs(pa,{children:[l.jsx(Ot,{sx:{padding:"1px 3px 1px 0px !important",verticalAlign:"top",lineHeight:1.4},variant:"head",children:"type:"}),l.jsx(Ot,{sx:{padding:"1px 3px 1px 0px !important",verticalAlign:"top",lineHeight:1.4},children:(e?e.subtype:r)??"normal"})]}),l.jsxs(pa,{children:[l.jsx(Ot,{sx:{padding:"1px 3px 1px 0px !important",verticalAlign:"top",lineHeight:1.4},variant:"head",children:"caption:"}),l.jsx(Ot,{sx:{padding:"1px 3px 1px 0px !important",verticalAlign:"top",lineHeight:1.4},children:d??"-not set-"})]}),l.jsxs(pa,{children:[l.jsx(Ot,{sx:{padding:"1px 3px 1px 0px !important",verticalAlign:"top",lineHeight:1.4},variant:"head",children:"languages:"}),l.jsx(Ot,{sx:{padding:"1px 3px 1px 0px !important",verticalAlign:"top",lineHeight:1.4},children:(C=e==null?void 0:e.contents)==null?void 0:C.map(v=>v.lang).join(", ")})]})]})})}),l.jsxs(Tl,{sx:{display:"flex",justifyContent:"space-between"},disableSpacing:!0,children:[l.jsx(Ha,{label:"Remove",buttonProps:{size:"small"},icon:l.jsx(Tc,{}),onConfirm:()=>{n&&n()},children:"Remove this image from this context, note that it will not be deleted so it can still be used in other contexts."}),l.jsx(Ha,{label:"Edit",buttonProps:{size:"small"},icon:l.jsx(Kc,{}),onConfirm:T,needConfirmation:m,children:"Leave this screen to edit the image, unsaved changes will be lost."})]})]})]})},Fd=({dataSource:e,onCancel:t,onSelect:r})=>{var o,d,f;const a=Wt(),{setPage:s,paginatedData:n}=e,[i,u]=E.useState();return(o=n==null?void 0:n.data)!=null&&o.length?l.jsxs(l.Fragment,{children:[l.jsx(de,{container:!0,spacing:1,pb:4.5,children:n.data.map((h,m)=>l.jsx(de,{item:!0,xs:2,onClick:()=>u(p=>h===p?void 0:h),children:l.jsx(jr,{image:h,imageOnly:!0})},m))}),i&&l.jsxs(us,{sx:{position:"absolute",padding:2,top:"10%",left:"50%",transform:"translateX(-50%)",width:"50%",maxWidth:400,zIndex:a.zIndex.appBar+10,display:"flex",flexDirection:"column",gap:1},elevation:5,onClick:()=>u(void 0),children:[l.jsx(re,{variant:"body1",fontWeight:"bold",children:((d=i.contents.at(0))==null?void 0:d.title)||"?"}),l.jsx(jr,{image:i,imageOnly:!0}),l.jsxs(U,{children:[l.jsxs(re,{children:["type: ",i.subtype]}),l.jsxs(re,{children:["caption:"," ",((f=Et(i))==null?void 0:f.subtitle)??"-none-"]}),l.jsxs(re,{children:["languages:"," ",i.contents.map(({lang:h})=>h).join(", ")]})]}),l.jsx(Ae,{color:"primary",onClick:()=>r(i),variant:"contained",children:"Select"})]}),l.jsxs(U,{sx:{position:"absolute",left:0,right:0,bottom:0,backgroundColor:"background.default"},display:"flex",justifyContent:"space-between",children:[l.jsx(Oc,{component:"div",count:n.total,rowsPerPage:n.per_page,page:n.current_page-1,onPageChange:(h,m)=>s(m+1),rowsPerPageOptions:[]}),l.jsxs(U,{display:"flex",alignItems:"center",children:[l.jsx(Ae,{color:"primary",variant:"text",onClick:()=>t&&t(),sx:{mr:2},children:"Cancel"}),l.jsx(Ae,{color:"primary",disabled:!i,onClick:()=>r(i),variant:"contained",sx:{mr:2},children:"Select"})]})]})]}):l.jsx(l.Fragment,{children:"- no images found -"})};function Hd(e){return e.toLowerCase()}var jd=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Ud=/[^A-Z0-9]+/gi;function Yd(e,t){t===void 0&&(t={});for(var r=t.splitRegexp,a=r===void 0?jd:r,s=t.stripRegexp,n=s===void 0?Ud:s,i=t.transform,u=i===void 0?Hd:i,o=t.delimiter,d=o===void 0?" ":o,f=_n(_n(e,a,"$1\0$2"),n,"\0"),h=0,m=f.length;f.charAt(h)==="\0";)h++;for(;f.charAt(m-1)==="\0";)m--;return f.slice(h,m).split("\0").map(u).join(d)}function _n(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(a,s){return a.replace(s,r)},e)}function Vd(e,t){var r=e.charAt(0),a=e.substr(1).toLowerCase();return t>0&&r>="0"&&r<="9"?"_"+r+a:""+r.toUpperCase()+a}function ja(e,t){return t===void 0&&(t={}),Yd(e,wa({delimiter:"",transform:Vd},t))}var ps={},$d=Re;Object.defineProperty(ps,"__esModule",{value:!0});var Qi=ps.default=void 0,Wd=$d(Se()),zd=l;Qi=ps.default=(0,Wd.default)((0,zd.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const qd=()=>{const[e,t]=E.useState(),[r,a]=E.useState(),[s,n]=E.useState(),[i,u]=E.useState(),[o,d]=E.useState(!1),f=p=>{t(p.loaded/(p.total||p.loaded))},h=E.useCallback((p,T)=>{d(!0),t(void 0),n(void 0),u(void 0),a(void 0),pi.post(p,T,{onUploadProgress:f}).then(C=>a(C.data)).catch(C=>{var v,A,y,N;u((A=(v=C.response)==null?void 0:v.data)==null?void 0:A.message),n(((N=(y=C.response)==null?void 0:y.data)==null?void 0:N.errors)||void 0)})},[]),m=E.useCallback(()=>{d(!1),t(void 0),n(void 0),u(void 0),a(void 0)},[]);return{progress:e,result:r,errors:s,errorMessage:i,isBusy:o,post:h,reset:m}},Gd=({onCreateNew:e})=>{const[t,r]=E.useState(!0);return l.jsxs($t,{open:t,disableEscapeKeyDown:!0,children:[l.jsx(Zr,{children:"Item exists"}),l.jsx(cr,{children:l.jsx(re,{children:"There was already an item matching your input. Do you want to use the existing item or create a new one?"})}),l.jsxs(lr,{children:[l.jsx(Ae,{onClick:()=>{r(!1),e(!0)},color:"primary",children:"Create new"}),l.jsx(Ae,{onClick:()=>{r(!1),e(!1)},color:"primary",children:"Use existing"})]})]})},hr=({onCreated:e,onError:t,postData:r,disableSubmit:a,children:s,submitTitle:n})=>{const{post:i,result:u,progress:o,errors:d,errorMessage:f}=qd(),[h,m]=E.useState(f),[p,T]=E.useState();E.useEffect(()=>{t&&t(d)},[d,t]),E.useEffect(()=>{m(f)},[f]),E.useEffect(()=>{u&&(u.exists?T(u.item):u.item?e(u.item):m("Unknown error creating item"))},[u,e]);const C=(A=!1)=>{const y=r||new FormData;A&&y.append("force","1"),m(void 0),i(Jr("admin.resourceitems.store"),y)},v=A=>{A?C(!0):e(p)};return l.jsxs(U,{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:2,children:[s,l.jsxs(U,{display:"flex",justifyContent:"space-between",alignItems:"baseline",children:[l.jsx(re,{color:"error",children:h||" "}),l.jsx(Ae,{onClick:()=>C(),color:"primary",variant:"contained",disabled:a,children:n})]}),p&&l.jsx(Gd,{item:p,onCreateNew:v}),l.jsx(U,{margin:-2,marginTop:2,children:l.jsx(jl,{variant:"determinate",value:o?o*100:0})})]})},Kd=({onCreated:e})=>{const t=E.useRef(new FormData),[r,a]=E.useState(""),[s,n]=E.useState(""),[i,u]=E.useState(""),[o,d]=E.useState();return E.useEffect(()=>{t.current.set("subtype","embed"),t.current.set("title",r),t.current.set("blurb",i),t.current.set("post_url",s)},[i,r,s]),l.jsx(U,{minWidth:500,children:l.jsxs(hr,{onCreated:e,onError:d,postData:t.current,disableSubmit:!r||!s,submitTitle:"Create Embed",children:[l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Title*",value:r,onChange:f=>a(f.target.value),error:!!(o!=null&&o.title),helperText:(o==null?void 0:o.title)||" "}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Description (optional)",value:i,onChange:f=>u(f.target.value),error:!!(o!=null&&o.blurb),helperText:(o==null?void 0:o.blurb)||" "}),l.jsx(U,{display:"flex",flexWrap:"nowrap",justifyContent:"space-evenly",children:l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Social Media Post URL",value:s,onChange:f=>n(f.target.value),error:!!(o!=null&&o.post_url),helperText:(o==null?void 0:o.post_url)||" "})})]})})},Qd=({onCreated:e})=>{const t=E.useRef(new FormData),[r,a]=E.useState(""),[s,n]=E.useState(""),i=E.useRef(null),[u,o]=E.useState();E.useEffect(()=>{t.current.set("subtype","file"),t.current.set("title",r),t.current.set("blurb",s)},[s,r]);const d=()=>{var h,m;t.current.delete("files");let f="";if((m=(h=i.current)==null?void 0:h.files)!=null&&m.length){f=i.current.files[0].name;for(let p=0;p<i.current.files.length;++p)t.current.append("files[]",i.current.files[p])}r||a(f)};return l.jsxs(hr,{onCreated:e,onError:o,postData:t.current,disableSubmit:!r,submitTitle:"Upload file",children:[l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Title",value:r,onChange:f=>a(f.target.value),error:!!(u!=null&&u.title),helperText:(u==null?void 0:u.title)||"required"}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Description",value:s,onChange:f=>n(f.target.value),error:!!(u!=null&&u.blurb),helperText:(u==null?void 0:u.blurb)||"optional"}),l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!!(u!=null&&u.files),children:[l.jsx(at,{shrink:!0,children:"File"}),l.jsx(hi,{label:"File",ref:i,onChange:d,multiple:!0}),l.jsx(ut,{children:(u==null?void 0:u.files)||"possible to upload multiple files"})]})]})},Xd=({onCreated:e})=>{const t=E.useRef(new FormData),[r,a]=E.useState("image"),[s,n]=E.useState(""),[i,u]=E.useState(""),[o,d]=E.useState(""),f=E.useRef(null),[h,m]=E.useState(),[p,T]=E.useState(!0),[C,v]=E.useState();E.useEffect(()=>{t.current.set("subtype",r),t.current.set("title",s||""),t.current.set("subtitle",i),t.current.set("blurb",o)},[o,s,i,r]);const A=()=>{var N,D;t.current.delete("files");let y="";if(T(!0),(D=(N=f.current)==null?void 0:N.files)!=null&&D.length){y=f.current.files[0].name,T(!1);for(let P=0;P<f.current.files.length;++P)t.current.set("files[]",f.current.files[P]);f.current.files[0].size>10*1024*1024?v(Math.round(f.current.files[0].size/(1024*1024)*10)/10):v(void 0)}else v(void 0);s||n(y)};return l.jsxs(hr,{onCreated:e,onError:m,postData:t.current,disableSubmit:p,submitTitle:"Upload file",children:[l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Title",value:s,onChange:y=>n(y.target.value),error:!!(h!=null&&h.title),helperText:(h==null?void 0:h.title)||"optional"}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Caption",value:i,onChange:y=>u(y.target.value),error:!!(h!=null&&h.subtitle),helperText:(h==null?void 0:h.subtitle)||"optional, subtitle used as caption"}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Description",value:o,onChange:y=>d(y.target.value),error:!!(h!=null&&h.blurb),helperText:(h==null?void 0:h.blurb)||"optional"}),l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!!(h!=null&&h.subtype),children:[l.jsx(at,{children:"Image type"}),l.jsx(xt,{value:r,onChange:y=>a(y.target.value),label:"Image type",fullWidth:!0,children:Object.entries(ni).map(([y,N],D)=>l.jsx(qe,{value:y,children:N},D))}),(h==null?void 0:h.subtype)&&l.jsx(ut,{children:h==null?void 0:h.subtype})]}),l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!!(h!=null&&h.files)||!!C,children:[l.jsx(at,{shrink:!0,children:"File"}),l.jsx(hi,{label:"File",ref:f,onChange:A,accept:"image/*"}),l.jsx(ut,{children:(h==null?void 0:h.files)||(C?`Large file: ${C} MB`:"upload full size, server resizes")})]})]})},Jd=({onCreated:e})=>{const t=E.useRef(new FormData),[r,a]=E.useState(""),[s,n]=E.useState(""),[i,u]=E.useState(""),[o,d]=E.useState();return E.useEffect(()=>{t.current.set("subtype","link"),t.current.set("title",r),t.current.set("url",s),t.current.set("blurb",i)},[s,i,r]),l.jsxs(hr,{onCreated:e,onError:d,postData:t.current,disableSubmit:!r||!s,submitTitle:"Create link",children:[l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Title",value:r,onChange:f=>a(f.target.value),error:!!(o!=null&&o.title),helperText:(o==null?void 0:o.title)||" "}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Description (optional)",value:i,onChange:f=>u(f.target.value),error:!!(o!=null&&o.blurb),helperText:(o==null?void 0:o.blurb)||" "}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"URL",value:s,onChange:f=>n(f.target.value),error:!!(o!=null&&o.url),helperText:(o==null?void 0:o.url)||" "})]})},Zd=({onCreated:e})=>{const t=E.useRef(new FormData),[r,a]=E.useState(""),[s,n]=E.useState("youtube"),[i,u]=E.useState(""),[o,d]=E.useState(""),[f,h]=E.useState();return E.useEffect(()=>{t.current.set("subtype","video"),t.current.set("title",r),t.current.set("blurb",o),t.current.set("provider",s),t.current.set("provider_id",i)},[o,r,s,i]),l.jsx(U,{minWidth:500,children:l.jsxs(hr,{onCreated:e,onError:h,postData:t.current,disableSubmit:!r||!i,submitTitle:"Create video",children:[l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Title*",value:r,onChange:m=>a(m.target.value),error:!!(f!=null&&f.title),helperText:(f==null?void 0:f.title)||" "}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Description (optional)",value:o,onChange:m=>d(m.target.value),error:!!(f!=null&&f.blurb),helperText:(f==null?void 0:f.blurb)||" "}),l.jsxs(U,{display:"flex",flexWrap:"nowrap",justifyContent:"space-evenly",children:[l.jsx(U,{flexGrow:1,children:l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!!(f!=null&&f.provider),children:[l.jsx(at,{children:"Provider"}),l.jsx(xt,{value:s,onChange:m=>n(m.target.value),label:"Provider",fullWidth:!0,children:oc.map((m,p)=>l.jsx(qe,{value:m,children:m},p))}),(f==null?void 0:f.provider)&&l.jsx(ut,{children:(f==null?void 0:f.provider)??" "})]})}),l.jsx(U,{marginLeft:2,flexGrow:1,children:l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"ID",value:i,onChange:m=>u(m.target.value),error:!!(f!=null&&f.providerId),helperText:(f==null?void 0:f.providerId)||" "})})]})]})})},e0=({type:e,onCreated:t})=>{switch(e){case"video":return l.jsx(Zd,{onCreated:t});case"file":return l.jsx(Qd,{onCreated:t});case"link":return l.jsx(Jd,{onCreated:t});case"image":return l.jsx(Xd,{onCreated:t});case"embed":return l.jsx(Kd,{onCreated:t})}};var t0=n0,r0=/^(?:\w+:)?\/\/(\S+)$/,a0=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,s0=/^[^\s\.]+\.\S{2,}$/;function n0(e){if(typeof e!="string")return!1;var t=e.match(r0);if(!t)return!1;var r=t[1];return r?!!(a0.test(r)||s0.test(r)):!1}const i0=or(t0),u0=({onCreated:e})=>{const[t,r]=E.useState(""),[a,s]=E.useState(""),[n,i]=E.useState();E.useEffect(()=>{r(a),i0(a)?i(o=>{const d={...o};return delete d.url,d}):i(o=>({...o,url:"Invalid url, http included?"}))},[a]);const u=()=>{if(!t||!a)return;e({id:0,type:"resource",subtype:"link",contents:[{lang:"*",title:t,links:[{url:a}]}]})};return l.jsxs(U,{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:2,children:[l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"URL",value:a,placeholder:"http:// or https:// required",onChange:o=>s(o.target.value),error:!!(a&&(n!=null&&n.url)),helperText:a?(n==null?void 0:n.url)||" ":"required",InputLabelProps:{shrink:!0}}),l.jsx(U,{display:"flex",justifyContent:"space-between",alignItems:"baseline",children:l.jsx(Ae,{color:"primary",variant:"contained",disabled:!t||!a,onClick:u,children:"Insert link"})})]})};var Es={},o0=Re;Object.defineProperty(Es,"__esModule",{value:!0});var Xi=Es.default=void 0,c0=o0(Se()),l0=l;Xi=Es.default=(0,c0.default)((0,l0.jsx)("path",{d:"M8 11h8v2H8zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"AddLink");var bs={},d0=Re;Object.defineProperty(bs,"__esModule",{value:!0});var Ji=bs.default=void 0,f0=d0(Se()),h0=l;Ji=bs.default=(0,f0.default)((0,h0.jsx)("path",{d:"M18 13v7H4V6h5.02c.05-.71.22-1.38.48-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5zm-1.5 5h-11l2.75-3.53 1.96 2.36 2.75-3.54zm2.8-9.11c.44-.7.7-1.51.7-2.39C20 4.01 17.99 2 15.5 2S11 4.01 11 6.5s2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7L21 13.42 22.42 12zM15.5 9C14.12 9 13 7.88 13 6.5S14.12 4 15.5 4 18 5.12 18 6.5 16.88 9 15.5 9"}),"ImageSearch");var Ts={},m0=Re;Object.defineProperty(Ts,"__esModule",{value:!0});var Zi=Ts.default=void 0,p0=m0(Se()),E0=l;Zi=Ts.default=(0,p0.default)((0,E0.jsx)("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2m0 14H3V5h18z"}),"PersonalVideo");var gs={},b0=Re;Object.defineProperty(gs,"__esModule",{value:!0});var eu=gs.default=void 0,T0=b0(Se()),g0=l;eu=gs.default=(0,T0.default)((0,g0.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");const _0={value:"image.browse",label:"Find existing image",icon:l.jsx(Ji,{})},v0={value:"image",label:"Upload image",icon:l.jsx(Qi,{})},Ua=[_0,kt,v0],C0={value:"video.browse",label:"Find existing video",icon:l.jsx(ii,{})},_s={value:"video",label:"Create video resource",icon:l.jsx(Zi,{})},A0=[C0,kt,_s],y0={value:"link.browse",label:"Find existing link",icon:l.jsx(ss,{})},tu={value:"link",label:"Create link resource",icon:l.jsx(Xi,{})},N0={value:"link.dummy",label:"Link without resource",icon:l.jsx(ss,{})},I0={value:"contentitem.browse",label:"Link internal item",icon:l.jsx(ui,{})},D0={value:"contentitem.browse",label:"Find existing content item",icon:l.jsx(ui,{})},ru={value:"file",label:"Create file resource",icon:l.jsx(eu,{})},x0={value:"dcproject.browse",label:"Find existing DC Project",icon:l.jsx(Lr,{})},R0={value:"embed",label:"Embed social",icon:l.jsx(cc,{})},Bg=[_s,ru,R0],Fg=[{value:"resource.browse",label:"Find existing resource",icon:l.jsx(Lr,{})},kt,tu,_s,ru,kt,D0,x0],S0=[{field:"id",renderCell:e=>l.jsxs(l.Fragment,{children:[e.row.id," ",l.jsx(gi,{item:e.row})]})},{field:"title",valueGetter:e=>Ei(e.row)||"-untitled-",flex:2},Ti,{field:"created_at",flex:1,valueFormatter:e=>Nt(e.value).format("YYYY-MM-DD HH:mm")},{field:"resource",headerName:"Resource",sortable:!1,renderCell:e=>{const t=e.row;switch(t.subtype){case"link":case"video":case"file":return l.jsx($l,{item:t})}return t.type!=="resource"?l.jsx("span",{children:t.type}):l.jsxs("span",{children:["unknown resource type"," ",t.subtype]})},flex:3,align:"right"},{field:"subtype"}],k0=[{field:"id",renderCell:e=>l.jsxs(l.Fragment,{children:[e.row.id," ",l.jsx(gi,{item:e.row})]})},{field:"title",valueGetter:e=>Ei(e.row)||"-untitled-",flex:2},Zc("created_at"),Ti],Ur=({onPick:e,label:t,buttonIcon:r,menu:a,buttonProps:s})=>{const[n,i]=E.useState(),[u,o]=E.useState(),[d,f]=E.useState(),[h,m]=E.useState(!1),[p,T]=E.useState(),[C,v]=E.useState(!1),A=_c({mode:"xhr",filter:u,search:n,sort:"-created_at",pageSize:42,xhrUrl:u?Jr("admin.resourceitems.index"):void 0}),y=R=>{v(!1),e(R,d!=null&&d.length?d[0]:void 0)};E.useEffect(()=>{var R;if(!d||d.length===0){o(void 0),v(!1);return}switch(d.length>1&&console.warn("options > 1",d),v(!0),d[0]){case"image.browse":o({filter:{subtype:"image,image.icon,image.square,image.portrait"}}),m(!0);break;case"resource.browse":case"video.browse":case"link.browse":case"file.browse":o({filter:{subtype:d[0]==="resource.browse"?"link,video,file":d[0].replace(".browse","")}}),m(!0);break;case"contentitem.browse":o({filter:{type:"article,static,library"}}),m(!0);break;case"dcproject.browse":o({filter:{type:"dcproject"}}),m(!0);break;default:m(!1)}T((R=a.find(({value:M})=>M===d[0]))==null?void 0:R.label)},[d,a]),E.useEffect(()=>{C||f(void 0)},[C,f]);const N=(d==null?void 0:d.at(0))==="video"||(d==null?void 0:d.at(0))==="embed",D=()=>{if(d!=null&&d.length)switch(d[0]){case"image.browse":return l.jsx(Fd,{dataSource:A,onCancel:()=>v(!1),onSelect:R=>{v(!1),e(R,d!=null&&d.length?d[0]:void 0)}});case"resource.browse":case"video.browse":case"link.browse":case"file.browse":return l.jsx(rn,{dataSource:A,columns:S0,selectMode:"single"});case"contentitem.browse":return l.jsx(rn,{dataSource:A,columns:k0,selectMode:"single"});case"link":case"file":case"video":case"image":case"embed":return l.jsx(e0,{type:d[0],onCreated:y});case"link.dummy":return l.jsx(u0,{onCreated:y})}},P=E.useMemo(()=>{if(!(!d||d[0]!=="image.browse"))return[{label:"Portrait images",name:"subtype",value:"image.portrait"}]},[d]);return l.jsx(Bd,{onSearch:h?i:void 0,onSelect:f,onClose:()=>v(!1),label:t,buttonIcon:r,dialog:{title:p,wide:h||N,tall:h},options:a,open:C,buttonProps:s,filterOptions:P,onChangeFilter:o,children:l.jsx(wc,{onSelect:R=>{v(!1),e(R,d!=null&&d.length?d[0]:void 0)},onCancel:()=>v(!1),children:D()})})},P0=new Sd({objectHash:(e,t)=>e.id?`${e.id}`:`${t}`,textDiff:{minLength:Number.MAX_SAFE_INTEGER},propertyFilter:(e,t)=>{var r;return((r=t==null?void 0:t.parent)==null?void 0:r.childName)==="collections"?e==="id":!["pivot","items_count"].includes(e)}}),M0=(e,{lang:t,content:r,fields:a})=>{const s={};a&&a.forEach(i=>{s[i]=""});const n={...s,...r,lang:t,id:void 0};delete n.id;for(const[i,u]of Object.entries(n))if(Array.isArray(u)){const o=u.map(d=>{const f={...d};return delete f.id,delete f.content_id,delete f.item_content_id,f});n[i]=o}return[...e,n]},L0=(e,t)=>t||e&&t,O0=()=>(e,t)=>{let r=[];return t.type==="content_reset"?r=t.contents:t.type==="content_add"?r=M0(e,t):t.type==="content_remove"?r=e.filter(({lang:a})=>a!==t.lang):t.type==="content_update"&&(r=e.map(a=>a.lang!==t.lang?a:{...a,[t.field]:L0(a[t.field],t.value)})),P0.diff(r,e)?r:e},w0=e=>{const[t,r]=E.useState(e.value||"");return E.useEffect(()=>{r(e.value)},[e.value]),Ci(()=>{e.onChange&&e.onChange(t)},oi,[t]),l.jsx(oe,{fullWidth:!0,multiline:!0,maxRows:10,variant:"outlined",InputLabelProps:{shrink:!0},...e,value:t||"",onChange:a=>r(a.target.value||"")})},B0=({contents:e,language:t,showAdd:r,onChange:a,onAdd:s})=>{const[n,i]=E.useState([]),[u,o]=Ra.useState(null),d=T=>{o(T.currentTarget)},f=T=>{o(null),T&&s(T)},h=t&&n.includes(t)?t:n[0];E.useEffect(()=>{i(e.map(T=>T.lang))},[e]);const{subsite:m}=Pa().props;let p=[];return m&&m.languages&&m.languages!==""&&m.languages!="*"?p=da.filter(([T,C])=>m.languages.includes(T)||T=="*"):p=da,l.jsxs(de,{container:!0,alignItems:"center",mt:0,mb:1,children:[r&&l.jsxs(de,{item:!0,xs:1,children:[l.jsx(Ae,{color:"secondary",onClick:d,size:"small",startIcon:l.jsx(ka,{}),children:"language"}),l.jsx(Pr,{anchorEl:u,keepMounted:!0,open:!!u,onClose:()=>f(),children:da.filter(([T,C])=>p.map(([v,A])=>v).includes(T)).map(([T,C],v)=>l.jsx(qe,{onClick:()=>f(T),disabled:n.indexOf(T)>=0,children:C},v))})]}),n.length?l.jsx(de,{item:!0,xs:10,children:l.jsx(ci,{value:h,onChange:(T,C)=>a(C),centered:!0,children:n.map((T,C)=>l.jsx(Ma,{value:T,label:T},C))})}):""]})},F0=({show:e,children:t,...r})=>l.jsx("div",{role:"tabpanel",hidden:!e,...r,children:e&&t}),H0=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),_e="";var b;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(b=b||(b={}));const $e={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function au(e){return e>=55296&&e<=57343}function j0(e){return e>=56320&&e<=57343}function U0(e,t){return(e-55296)*1024+9216+t}function su(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function nu(e){return e>=64976&&e<=65007||H0.has(e)}var x;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(x=x||(x={}));const Y0=65536;class V0{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Y0,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:r,col:a,offset:s}=this;return{code:t,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:s,endOffset:s}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(j0(r))return this.pos++,this._addGap(),U0(t,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,b.EOF;return this._err(x.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,r){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,r){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(t,this.pos);for(let a=0;a<t.length;a++)if((this.html.charCodeAt(this.pos+a)|32)!==t.charCodeAt(a))return!1;return!0}peek(t){const r=this.pos+t;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,b.EOF;const a=this.html.charCodeAt(r);return a===b.CARRIAGE_RETURN?b.LINE_FEED:a}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,b.EOF;let t=this.html.charCodeAt(this.pos);return t===b.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,b.LINE_FEED):t===b.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,au(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===b.LINE_FEED||t===b.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){su(t)?this._err(x.controlCharacterInInputStream):nu(t)&&this._err(x.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var se;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(se=se||(se={}));function iu(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}const mt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),$0=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Ca;const W0=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),z0=(Ca=String.fromCodePoint)!==null&&Ca!==void 0?Ca:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function q0(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=W0.get(e))!==null&&t!==void 0?t:e}var Pe;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Pe||(Pe={}));const G0=32;var ot;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ot||(ot={}));function Ya(e){return e>=Pe.ZERO&&e<=Pe.NINE}function K0(e){return e>=Pe.UPPER_A&&e<=Pe.UPPER_F||e>=Pe.LOWER_A&&e<=Pe.LOWER_F}function Q0(e){return e>=Pe.UPPER_A&&e<=Pe.UPPER_Z||e>=Pe.LOWER_A&&e<=Pe.LOWER_Z||Ya(e)}function X0(e){return e===Pe.EQUALS||Q0(e)}var ke;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ke||(ke={}));var It;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(It||(It={}));class J0{constructor(t,r,a){this.decodeTree=t,this.emitCodePoint=r,this.errors=a,this.state=ke.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=It.Strict}startEntity(t){this.decodeMode=t,this.state=ke.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case ke.EntityStart:return t.charCodeAt(r)===Pe.NUM?(this.state=ke.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=ke.NamedEntity,this.stateNamedEntity(t,r));case ke.NumericStart:return this.stateNumericStart(t,r);case ke.NumericDecimal:return this.stateNumericDecimal(t,r);case ke.NumericHex:return this.stateNumericHex(t,r);case ke.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|G0)===Pe.LOWER_X?(this.state=ke.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=ke.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,a,s){if(r!==a){const n=a-r;this.result=this.result*Math.pow(s,n)+parseInt(t.substr(r,n),s),this.consumed+=n}}stateNumericHex(t,r){const a=r;for(;r<t.length;){const s=t.charCodeAt(r);if(Ya(s)||K0(s))r+=1;else return this.addToNumericResult(t,a,r,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,a,r,16),-1}stateNumericDecimal(t,r){const a=r;for(;r<t.length;){const s=t.charCodeAt(r);if(Ya(s))r+=1;else return this.addToNumericResult(t,a,r,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,a,r,10),-1}emitNumericEntity(t,r){var a;if(this.consumed<=r)return(a=this.errors)===null||a===void 0||a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Pe.SEMI)this.consumed+=1;else if(this.decodeMode===It.Strict)return 0;return this.emitCodePoint(q0(this.result),this.consumed),this.errors&&(t!==Pe.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:a}=this;let s=a[this.treeIndex],n=(s&ot.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const i=t.charCodeAt(r);if(this.treeIndex=ou(a,s,this.treeIndex+Math.max(1,n),i),this.treeIndex<0)return this.result===0||this.decodeMode===It.Attribute&&(n===0||X0(i))?0:this.emitNotTerminatedNamedEntity();if(s=a[this.treeIndex],n=(s&ot.VALUE_LENGTH)>>14,n!==0){if(i===Pe.SEMI)return this.emitNamedEntityData(this.treeIndex,n,this.consumed+this.excess);this.decodeMode!==It.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:a}=this,s=(a[r]&ot.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,a){const{decodeTree:s}=this;return this.emitCodePoint(r===1?s[t]&~ot.VALUE_LENGTH:s[t+1],a),r===3&&this.emitCodePoint(s[t+2],a),a}end(){var t;switch(this.state){case ke.NamedEntity:return this.result!==0&&(this.decodeMode!==It.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ke.NumericDecimal:return this.emitNumericEntity(0,2);case ke.NumericHex:return this.emitNumericEntity(0,3);case ke.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ke.EntityStart:return 0}}}function uu(e){let t="";const r=new J0(e,a=>t+=z0(a));return function(s,n){let i=0,u=0;for(;(u=s.indexOf("&",u))>=0;){t+=s.slice(i,u),r.startEntity(n);const d=r.write(s,u+1);if(d<0){i=u+r.end();break}i=u+d,u=d===0?i+1:i}const o=t+s.slice(i);return t="",o}}function ou(e,t,r,a){const s=(t&ot.BRANCH_LENGTH)>>7,n=t&ot.JUMP_TABLE;if(s===0)return n!==0&&a===n?r:-1;if(n){const o=a-n;return o<0||o>=s?-1:e[r+o]-1}let i=r,u=i+s-1;for(;i<=u;){const o=i+u>>>1,d=e[o];if(d<a)i=o+1;else if(d>a)u=o-1;else return e[o+s]}return-1}uu(mt);uu($0);var S;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(S=S||(S={}));var bt;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(bt=bt||(bt={}));var We;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(We=We||(We={}));var I;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(I=I||(I={}));var c;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(c=c||(c={}));const Z0=new Map([[I.A,c.A],[I.ADDRESS,c.ADDRESS],[I.ANNOTATION_XML,c.ANNOTATION_XML],[I.APPLET,c.APPLET],[I.AREA,c.AREA],[I.ARTICLE,c.ARTICLE],[I.ASIDE,c.ASIDE],[I.B,c.B],[I.BASE,c.BASE],[I.BASEFONT,c.BASEFONT],[I.BGSOUND,c.BGSOUND],[I.BIG,c.BIG],[I.BLOCKQUOTE,c.BLOCKQUOTE],[I.BODY,c.BODY],[I.BR,c.BR],[I.BUTTON,c.BUTTON],[I.CAPTION,c.CAPTION],[I.CENTER,c.CENTER],[I.CODE,c.CODE],[I.COL,c.COL],[I.COLGROUP,c.COLGROUP],[I.DD,c.DD],[I.DESC,c.DESC],[I.DETAILS,c.DETAILS],[I.DIALOG,c.DIALOG],[I.DIR,c.DIR],[I.DIV,c.DIV],[I.DL,c.DL],[I.DT,c.DT],[I.EM,c.EM],[I.EMBED,c.EMBED],[I.FIELDSET,c.FIELDSET],[I.FIGCAPTION,c.FIGCAPTION],[I.FIGURE,c.FIGURE],[I.FONT,c.FONT],[I.FOOTER,c.FOOTER],[I.FOREIGN_OBJECT,c.FOREIGN_OBJECT],[I.FORM,c.FORM],[I.FRAME,c.FRAME],[I.FRAMESET,c.FRAMESET],[I.H1,c.H1],[I.H2,c.H2],[I.H3,c.H3],[I.H4,c.H4],[I.H5,c.H5],[I.H6,c.H6],[I.HEAD,c.HEAD],[I.HEADER,c.HEADER],[I.HGROUP,c.HGROUP],[I.HR,c.HR],[I.HTML,c.HTML],[I.I,c.I],[I.IMG,c.IMG],[I.IMAGE,c.IMAGE],[I.INPUT,c.INPUT],[I.IFRAME,c.IFRAME],[I.KEYGEN,c.KEYGEN],[I.LABEL,c.LABEL],[I.LI,c.LI],[I.LINK,c.LINK],[I.LISTING,c.LISTING],[I.MAIN,c.MAIN],[I.MALIGNMARK,c.MALIGNMARK],[I.MARQUEE,c.MARQUEE],[I.MATH,c.MATH],[I.MENU,c.MENU],[I.META,c.META],[I.MGLYPH,c.MGLYPH],[I.MI,c.MI],[I.MO,c.MO],[I.MN,c.MN],[I.MS,c.MS],[I.MTEXT,c.MTEXT],[I.NAV,c.NAV],[I.NOBR,c.NOBR],[I.NOFRAMES,c.NOFRAMES],[I.NOEMBED,c.NOEMBED],[I.NOSCRIPT,c.NOSCRIPT],[I.OBJECT,c.OBJECT],[I.OL,c.OL],[I.OPTGROUP,c.OPTGROUP],[I.OPTION,c.OPTION],[I.P,c.P],[I.PARAM,c.PARAM],[I.PLAINTEXT,c.PLAINTEXT],[I.PRE,c.PRE],[I.RB,c.RB],[I.RP,c.RP],[I.RT,c.RT],[I.RTC,c.RTC],[I.RUBY,c.RUBY],[I.S,c.S],[I.SCRIPT,c.SCRIPT],[I.SECTION,c.SECTION],[I.SELECT,c.SELECT],[I.SOURCE,c.SOURCE],[I.SMALL,c.SMALL],[I.SPAN,c.SPAN],[I.STRIKE,c.STRIKE],[I.STRONG,c.STRONG],[I.STYLE,c.STYLE],[I.SUB,c.SUB],[I.SUMMARY,c.SUMMARY],[I.SUP,c.SUP],[I.TABLE,c.TABLE],[I.TBODY,c.TBODY],[I.TEMPLATE,c.TEMPLATE],[I.TEXTAREA,c.TEXTAREA],[I.TFOOT,c.TFOOT],[I.TD,c.TD],[I.TH,c.TH],[I.THEAD,c.THEAD],[I.TITLE,c.TITLE],[I.TR,c.TR],[I.TRACK,c.TRACK],[I.TT,c.TT],[I.U,c.U],[I.UL,c.UL],[I.SVG,c.SVG],[I.VAR,c.VAR],[I.WBR,c.WBR],[I.XMP,c.XMP]]);function na(e){var t;return(t=Z0.get(e))!==null&&t!==void 0?t:c.UNKNOWN}const L=c,ef={[S.HTML]:new Set([L.ADDRESS,L.APPLET,L.AREA,L.ARTICLE,L.ASIDE,L.BASE,L.BASEFONT,L.BGSOUND,L.BLOCKQUOTE,L.BODY,L.BR,L.BUTTON,L.CAPTION,L.CENTER,L.COL,L.COLGROUP,L.DD,L.DETAILS,L.DIR,L.DIV,L.DL,L.DT,L.EMBED,L.FIELDSET,L.FIGCAPTION,L.FIGURE,L.FOOTER,L.FORM,L.FRAME,L.FRAMESET,L.H1,L.H2,L.H3,L.H4,L.H5,L.H6,L.HEAD,L.HEADER,L.HGROUP,L.HR,L.HTML,L.IFRAME,L.IMG,L.INPUT,L.LI,L.LINK,L.LISTING,L.MAIN,L.MARQUEE,L.MENU,L.META,L.NAV,L.NOEMBED,L.NOFRAMES,L.NOSCRIPT,L.OBJECT,L.OL,L.P,L.PARAM,L.PLAINTEXT,L.PRE,L.SCRIPT,L.SECTION,L.SELECT,L.SOURCE,L.STYLE,L.SUMMARY,L.TABLE,L.TBODY,L.TD,L.TEMPLATE,L.TEXTAREA,L.TFOOT,L.TH,L.THEAD,L.TITLE,L.TR,L.TRACK,L.UL,L.WBR,L.XMP]),[S.MATHML]:new Set([L.MI,L.MO,L.MN,L.MS,L.MTEXT,L.ANNOTATION_XML]),[S.SVG]:new Set([L.TITLE,L.FOREIGN_OBJECT,L.DESC]),[S.XLINK]:new Set,[S.XML]:new Set,[S.XMLNS]:new Set};function cu(e){return e===L.H1||e===L.H2||e===L.H3||e===L.H4||e===L.H5||e===L.H6}I.STYLE,I.SCRIPT,I.XMP,I.IFRAME,I.NOEMBED,I.NOFRAMES,I.PLAINTEXT;const tf=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var g;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(g||(g={}));const ze={DATA:g.DATA,RCDATA:g.RCDATA,RAWTEXT:g.RAWTEXT,SCRIPT_DATA:g.SCRIPT_DATA,PLAINTEXT:g.PLAINTEXT,CDATA_SECTION:g.CDATA_SECTION};function Jt(e){return e>=b.DIGIT_0&&e<=b.DIGIT_9}function Xt(e){return e>=b.LATIN_CAPITAL_A&&e<=b.LATIN_CAPITAL_Z}function rf(e){return e>=b.LATIN_SMALL_A&&e<=b.LATIN_SMALL_Z}function pt(e){return rf(e)||Xt(e)}function Va(e){return pt(e)||Jt(e)}function lu(e){return e>=b.LATIN_CAPITAL_A&&e<=b.LATIN_CAPITAL_F}function du(e){return e>=b.LATIN_SMALL_A&&e<=b.LATIN_SMALL_F}function af(e){return Jt(e)||lu(e)||du(e)}function Cr(e){return e+32}function fu(e){return e===b.SPACE||e===b.LINE_FEED||e===b.TABULATION||e===b.FORM_FEED}function sf(e){return e===b.EQUALS_SIGN||Va(e)}function vn(e){return fu(e)||e===b.SOLIDUS||e===b.GREATER_THAN_SIGN}class nf{constructor(t,r){this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=g.DATA,this.returnState=g.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new V0(r),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var r,a;(a=(r=this.handler).onParseError)===null||a===void 0||a.call(r,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,r,a){this.active=!0,this.preprocessor.write(t,r),this._runParsingLoop(),this.paused||a==null||a()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,r){this.state=t,this._callState(r)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let r=0;r<t;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,r){return this.preprocessor.startsWith(t,r)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:se.START_TAG,tagName:"",tagID:c.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:se.END_TAG,tagName:"",tagID:c.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:se.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:se.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,r){this.currentCharacterToken={type:t,chars:r,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,r;const a=this.currentToken;if(iu(a,this.currentAttr.name)===null){if(a.attrs.push(this.currentAttr),a.location&&this.currentLocation){const s=(t=(r=a.location).attrs)!==null&&t!==void 0?t:r.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(x.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=na(t.tagName),t.type===se.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(x.endTagWithAttributes),t.selfClosing&&this._err(x.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case se.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case se.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case se.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:se.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=r;return}this._createCharacterToken(t,r)}_emitCodePoint(t){const r=fu(t)?se.WHITESPACE_CHARACTER:t===b.NULL?se.NULL_CHARACTER:se.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(se.CHARACTER,t)}_matchNamedCharacterReference(t){let r=null,a=0,s=!1;for(let n=0,i=mt[0];n>=0&&(n=ou(mt,i,n+1,t),!(n<0));t=this._consume()){a+=1,i=mt[n];const u=i&ot.VALUE_LENGTH;if(u){const o=(u>>14)-1;if(t!==b.SEMICOLON&&this._isCharacterReferenceInAttribute()&&sf(this.preprocessor.peek(1))?(r=[b.AMPERSAND],n+=o):(r=o===0?[mt[n]&~ot.VALUE_LENGTH]:o===1?[mt[++n]]:[mt[++n],mt[++n]],a=0,s=t!==b.SEMICOLON),o===0){this._consume();break}}}return this._unconsume(a),s&&!this.preprocessor.endOfChunkHit&&this._err(x.missingSemicolonAfterCharacterReference),this._unconsume(1),r}_isCharacterReferenceInAttribute(){return this.returnState===g.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===g.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===g.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case g.DATA:{this._stateData(t);break}case g.RCDATA:{this._stateRcdata(t);break}case g.RAWTEXT:{this._stateRawtext(t);break}case g.SCRIPT_DATA:{this._stateScriptData(t);break}case g.PLAINTEXT:{this._statePlaintext(t);break}case g.TAG_OPEN:{this._stateTagOpen(t);break}case g.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case g.TAG_NAME:{this._stateTagName(t);break}case g.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case g.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case g.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case g.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case g.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case g.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case g.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case g.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case g.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case g.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case g.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case g.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case g.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case g.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case g.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case g.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case g.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case g.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case g.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case g.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case g.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case g.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case g.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case g.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case g.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case g.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case g.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case g.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case g.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case g.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case g.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case g.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case g.BOGUS_COMMENT:{this._stateBogusComment(t);break}case g.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case g.COMMENT_START:{this._stateCommentStart(t);break}case g.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case g.COMMENT:{this._stateComment(t);break}case g.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case g.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case g.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case g.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case g.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case g.COMMENT_END:{this._stateCommentEnd(t);break}case g.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case g.DOCTYPE:{this._stateDoctype(t);break}case g.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case g.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case g.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case g.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case g.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case g.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case g.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case g.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case g.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case g.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case g.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case g.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case g.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case g.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case g.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case g.CDATA_SECTION:{this._stateCdataSection(t);break}case g.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case g.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case g.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case g.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case g.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case g.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case g.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case g.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case g.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case g.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case b.LESS_THAN_SIGN:{this.state=g.TAG_OPEN;break}case b.AMPERSAND:{this.returnState=g.DATA,this.state=g.CHARACTER_REFERENCE;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitCodePoint(t);break}case b.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case b.AMPERSAND:{this.returnState=g.RCDATA,this.state=g.CHARACTER_REFERENCE;break}case b.LESS_THAN_SIGN:{this.state=g.RCDATA_LESS_THAN_SIGN;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitChars(_e);break}case b.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case b.LESS_THAN_SIGN:{this.state=g.RAWTEXT_LESS_THAN_SIGN;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitChars(_e);break}case b.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_LESS_THAN_SIGN;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitChars(_e);break}case b.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitChars(_e);break}case b.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(pt(t))this._createStartTagToken(),this.state=g.TAG_NAME,this._stateTagName(t);else switch(t){case b.EXCLAMATION_MARK:{this.state=g.MARKUP_DECLARATION_OPEN;break}case b.SOLIDUS:{this.state=g.END_TAG_OPEN;break}case b.QUESTION_MARK:{this._err(x.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=g.BOGUS_COMMENT,this._stateBogusComment(t);break}case b.EOF:{this._err(x.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(x.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=g.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(pt(t))this._createEndTagToken(),this.state=g.TAG_NAME,this._stateTagName(t);else switch(t){case b.GREATER_THAN_SIGN:{this._err(x.missingEndTagName),this.state=g.DATA;break}case b.EOF:{this._err(x.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(x.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=g.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this.state=g.BEFORE_ATTRIBUTE_NAME;break}case b.SOLIDUS:{this.state=g.SELF_CLOSING_START_TAG;break}case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentTagToken();break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.tagName+=_e;break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(Xt(t)?Cr(t):t)}}_stateRcdataLessThanSign(t){t===b.SOLIDUS?this.state=g.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=g.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){pt(t)?(this.state=g.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=g.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=g.BEFORE_ATTRIBUTE_NAME,!1;case b.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=g.SELF_CLOSING_START_TAG,!1;case b.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=g.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=g.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===b.SOLIDUS?this.state=g.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=g.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){pt(t)?(this.state=g.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=g.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=g.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case b.SOLIDUS:{this.state=g.SCRIPT_DATA_END_TAG_OPEN;break}case b.EXCLAMATION_MARK:{this.state=g.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=g.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){pt(t)?(this.state=g.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=g.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=g.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===b.HYPHEN_MINUS?(this.state=g.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=g.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===b.HYPHEN_MINUS?(this.state=g.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=g.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case b.HYPHEN_MINUS:{this.state=g.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitChars(_e);break}case b.EOF:{this._err(x.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case b.HYPHEN_MINUS:{this.state=g.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.state=g.SCRIPT_DATA_ESCAPED,this._emitChars(_e);break}case b.EOF:{this._err(x.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=g.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case b.HYPHEN_MINUS:{this._emitChars("-");break}case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case b.GREATER_THAN_SIGN:{this.state=g.SCRIPT_DATA,this._emitChars(">");break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.state=g.SCRIPT_DATA_ESCAPED,this._emitChars(_e);break}case b.EOF:{this._err(x.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=g.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===b.SOLIDUS?this.state=g.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:pt(t)?(this._emitChars("<"),this.state=g.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=g.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){pt(t)?(this.state=g.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=g.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=g.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith($e.SCRIPT,!1)&&vn(this.preprocessor.peek($e.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<$e.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=g.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case b.HYPHEN_MINUS:{this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case b.NULL:{this._err(x.unexpectedNullCharacter),this._emitChars(_e);break}case b.EOF:{this._err(x.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case b.HYPHEN_MINUS:{this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_e);break}case b.EOF:{this._err(x.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case b.HYPHEN_MINUS:{this._emitChars("-");break}case b.LESS_THAN_SIGN:{this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case b.GREATER_THAN_SIGN:{this.state=g.SCRIPT_DATA,this._emitChars(">");break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_e);break}case b.EOF:{this._err(x.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===b.SOLIDUS?(this.state=g.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith($e.SCRIPT,!1)&&vn(this.preprocessor.peek($e.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<$e.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=g.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=g.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.SOLIDUS:case b.GREATER_THAN_SIGN:case b.EOF:{this.state=g.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case b.EQUALS_SIGN:{this._err(x.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=g.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=g.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:case b.SOLIDUS:case b.GREATER_THAN_SIGN:case b.EOF:{this._leaveAttrName(),this.state=g.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case b.EQUALS_SIGN:{this._leaveAttrName(),this.state=g.BEFORE_ATTRIBUTE_VALUE;break}case b.QUOTATION_MARK:case b.APOSTROPHE:case b.LESS_THAN_SIGN:{this._err(x.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.currentAttr.name+=_e;break}default:this.currentAttr.name+=String.fromCodePoint(Xt(t)?Cr(t):t)}}_stateAfterAttributeName(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.SOLIDUS:{this.state=g.SELF_CLOSING_START_TAG;break}case b.EQUALS_SIGN:{this.state=g.BEFORE_ATTRIBUTE_VALUE;break}case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentTagToken();break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=g.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.QUOTATION_MARK:{this.state=g.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case b.APOSTROPHE:{this.state=g.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case b.GREATER_THAN_SIGN:{this._err(x.missingAttributeValue),this.state=g.DATA,this.emitCurrentTagToken();break}default:this.state=g.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case b.QUOTATION_MARK:{this.state=g.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case b.AMPERSAND:{this.returnState=g.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=g.CHARACTER_REFERENCE;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.currentAttr.value+=_e;break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case b.APOSTROPHE:{this.state=g.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case b.AMPERSAND:{this.returnState=g.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=g.CHARACTER_REFERENCE;break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.currentAttr.value+=_e;break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this._leaveAttrValue(),this.state=g.BEFORE_ATTRIBUTE_NAME;break}case b.AMPERSAND:{this.returnState=g.ATTRIBUTE_VALUE_UNQUOTED,this.state=g.CHARACTER_REFERENCE;break}case b.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=g.DATA,this.emitCurrentTagToken();break}case b.NULL:{this._err(x.unexpectedNullCharacter),this.currentAttr.value+=_e;break}case b.QUOTATION_MARK:case b.APOSTROPHE:case b.LESS_THAN_SIGN:case b.EQUALS_SIGN:case b.GRAVE_ACCENT:{this._err(x.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this._leaveAttrValue(),this.state=g.BEFORE_ATTRIBUTE_NAME;break}case b.SOLIDUS:{this._leaveAttrValue(),this.state=g.SELF_CLOSING_START_TAG;break}case b.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=g.DATA,this.emitCurrentTagToken();break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:this._err(x.missingWhitespaceBetweenAttributes),this.state=g.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case b.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=g.DATA,this.emitCurrentTagToken();break}case b.EOF:{this._err(x.eofInTag),this._emitEOFToken();break}default:this._err(x.unexpectedSolidusInTag),this.state=g.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const r=this.currentToken;switch(t){case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentComment(r);break}case b.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.data+=_e;break}default:r.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch($e.DASH_DASH,!0)?(this._createCommentToken($e.DASH_DASH.length+1),this.state=g.COMMENT_START):this._consumeSequenceIfMatch($e.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation($e.DOCTYPE.length+1),this.state=g.DOCTYPE):this._consumeSequenceIfMatch($e.CDATA_START,!0)?this.inForeignNode?this.state=g.CDATA_SECTION:(this._err(x.cdataInHtmlContent),this._createCommentToken($e.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=g.BOGUS_COMMENT):this._ensureHibernation()||(this._err(x.incorrectlyOpenedComment),this._createCommentToken(2),this.state=g.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case b.HYPHEN_MINUS:{this.state=g.COMMENT_START_DASH;break}case b.GREATER_THAN_SIGN:{this._err(x.abruptClosingOfEmptyComment),this.state=g.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=g.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const r=this.currentToken;switch(t){case b.HYPHEN_MINUS:{this.state=g.COMMENT_END;break}case b.GREATER_THAN_SIGN:{this._err(x.abruptClosingOfEmptyComment),this.state=g.DATA,this.emitCurrentComment(r);break}case b.EOF:{this._err(x.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=g.COMMENT,this._stateComment(t)}}_stateComment(t){const r=this.currentToken;switch(t){case b.HYPHEN_MINUS:{this.state=g.COMMENT_END_DASH;break}case b.LESS_THAN_SIGN:{r.data+="<",this.state=g.COMMENT_LESS_THAN_SIGN;break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.data+=_e;break}case b.EOF:{this._err(x.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const r=this.currentToken;switch(t){case b.EXCLAMATION_MARK:{r.data+="!",this.state=g.COMMENT_LESS_THAN_SIGN_BANG;break}case b.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=g.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===b.HYPHEN_MINUS?this.state=g.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=g.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===b.HYPHEN_MINUS?this.state=g.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=g.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==b.GREATER_THAN_SIGN&&t!==b.EOF&&this._err(x.nestedComment),this.state=g.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const r=this.currentToken;switch(t){case b.HYPHEN_MINUS:{this.state=g.COMMENT_END;break}case b.EOF:{this._err(x.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=g.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const r=this.currentToken;switch(t){case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentComment(r);break}case b.EXCLAMATION_MARK:{this.state=g.COMMENT_END_BANG;break}case b.HYPHEN_MINUS:{r.data+="-";break}case b.EOF:{this._err(x.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=g.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const r=this.currentToken;switch(t){case b.HYPHEN_MINUS:{r.data+="--!",this.state=g.COMMENT_END_DASH;break}case b.GREATER_THAN_SIGN:{this._err(x.incorrectlyClosedComment),this.state=g.DATA,this.emitCurrentComment(r);break}case b.EOF:{this._err(x.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=g.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this.state=g.BEFORE_DOCTYPE_NAME;break}case b.GREATER_THAN_SIGN:{this.state=g.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case b.EOF:{this._err(x.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingWhitespaceBeforeDoctypeName),this.state=g.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Xt(t))this._createDoctypeToken(String.fromCharCode(Cr(t))),this.state=g.DOCTYPE_NAME;else switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.NULL:{this._err(x.unexpectedNullCharacter),this._createDoctypeToken(_e),this.state=g.DOCTYPE_NAME;break}case b.GREATER_THAN_SIGN:{this._err(x.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.EOF:{this._err(x.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=g.DOCTYPE_NAME}}_stateDoctypeName(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this.state=g.AFTER_DOCTYPE_NAME;break}case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.name+=_e;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(Xt(t)?Cr(t):t)}}_stateAfterDoctypeName(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch($e.PUBLIC,!1)?this.state=g.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch($e.SYSTEM,!1)?this.state=g.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(x.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this.state=g.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case b.QUOTATION_MARK:{this._err(x.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=g.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case b.APOSTROPHE:{this._err(x.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=g.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case b.GREATER_THAN_SIGN:{this._err(x.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.QUOTATION_MARK:{r.publicId="",this.state=g.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case b.APOSTROPHE:{r.publicId="",this.state=g.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case b.GREATER_THAN_SIGN:{this._err(x.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case b.QUOTATION_MARK:{this.state=g.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.publicId+=_e;break}case b.GREATER_THAN_SIGN:{this._err(x.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case b.APOSTROPHE:{this.state=g.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.publicId+=_e;break}case b.GREATER_THAN_SIGN:{this._err(x.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this.state=g.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case b.GREATER_THAN_SIGN:{this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.QUOTATION_MARK:{this._err(x.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case b.APOSTROPHE:{this._err(x.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.QUOTATION_MARK:{r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case b.APOSTROPHE:{r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:{this.state=g.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case b.QUOTATION_MARK:{this._err(x.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case b.APOSTROPHE:{this._err(x.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case b.GREATER_THAN_SIGN:{this._err(x.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.QUOTATION_MARK:{r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case b.APOSTROPHE:{r.systemId="",this.state=g.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case b.GREATER_THAN_SIGN:{this._err(x.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=g.DATA,this.emitCurrentDoctype(r);break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case b.QUOTATION_MARK:{this.state=g.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.systemId+=_e;break}case b.GREATER_THAN_SIGN:{this._err(x.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case b.APOSTROPHE:{this.state=g.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case b.NULL:{this._err(x.unexpectedNullCharacter),r.systemId+=_e;break}case b.GREATER_THAN_SIGN:{this._err(x.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case b.SPACE:case b.LINE_FEED:case b.TABULATION:case b.FORM_FEED:break;case b.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.EOF:{this._err(x.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(x.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=g.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const r=this.currentToken;switch(t){case b.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=g.DATA;break}case b.NULL:{this._err(x.unexpectedNullCharacter);break}case b.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case b.RIGHT_SQUARE_BRACKET:{this.state=g.CDATA_SECTION_BRACKET;break}case b.EOF:{this._err(x.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===b.RIGHT_SQUARE_BRACKET?this.state=g.CDATA_SECTION_END:(this._emitChars("]"),this.state=g.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case b.GREATER_THAN_SIGN:{this.state=g.DATA;break}case b.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=g.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===b.NUMBER_SIGN?this.state=g.NUMERIC_CHARACTER_REFERENCE:Va(t)?(this.state=g.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(b.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const r=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(r){for(let a=0;a<r.length;a++)this._flushCodePointConsumedAsCharacterReference(r[a]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(b.AMPERSAND),this.state=g.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){Va(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===b.SEMICOLON&&this._err(x.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===b.LATIN_SMALL_X||t===b.LATIN_CAPITAL_X?this.state=g.HEXADEMICAL_CHARACTER_REFERENCE_START:Jt(t)?(this.state=g.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(x.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(b.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(b.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){af(t)?(this.state=g.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(x.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(b.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(b.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){lu(t)?this.charRefCode=this.charRefCode*16+t-55:du(t)?this.charRefCode=this.charRefCode*16+t-87:Jt(t)?this.charRefCode=this.charRefCode*16+t-48:t===b.SEMICOLON?this.state=g.NUMERIC_CHARACTER_REFERENCE_END:(this._err(x.missingSemicolonAfterCharacterReference),this.state=g.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){Jt(t)?this.charRefCode=this.charRefCode*10+t-48:t===b.SEMICOLON?this.state=g.NUMERIC_CHARACTER_REFERENCE_END:(this._err(x.missingSemicolonAfterCharacterReference),this.state=g.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===b.NULL)this._err(x.nullCharacterReference),this.charRefCode=b.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(x.characterReferenceOutsideUnicodeRange),this.charRefCode=b.REPLACEMENT_CHARACTER;else if(au(this.charRefCode))this._err(x.surrogateCharacterReference),this.charRefCode=b.REPLACEMENT_CHARACTER;else if(nu(this.charRefCode))this._err(x.noncharacterCharacterReference);else if(su(this.charRefCode)||this.charRefCode===b.CARRIAGE_RETURN){this._err(x.controlCharacterReference);const r=tf.get(this.charRefCode);r!==void 0&&(this.charRefCode=r)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const hu=new Set([c.DD,c.DT,c.LI,c.OPTGROUP,c.OPTION,c.P,c.RB,c.RP,c.RT,c.RTC]),Cn=new Set([...hu,c.CAPTION,c.COLGROUP,c.TBODY,c.TD,c.TFOOT,c.TH,c.THEAD,c.TR]),Ar=new Map([[c.APPLET,S.HTML],[c.CAPTION,S.HTML],[c.HTML,S.HTML],[c.MARQUEE,S.HTML],[c.OBJECT,S.HTML],[c.TABLE,S.HTML],[c.TD,S.HTML],[c.TEMPLATE,S.HTML],[c.TH,S.HTML],[c.ANNOTATION_XML,S.MATHML],[c.MI,S.MATHML],[c.MN,S.MATHML],[c.MO,S.MATHML],[c.MS,S.MATHML],[c.MTEXT,S.MATHML],[c.DESC,S.SVG],[c.FOREIGN_OBJECT,S.SVG],[c.TITLE,S.SVG]]),uf=[c.H1,c.H2,c.H3,c.H4,c.H5,c.H6],of=[c.TR,c.TEMPLATE,c.HTML],cf=[c.TBODY,c.TFOOT,c.THEAD,c.TEMPLATE,c.HTML],lf=[c.TABLE,c.TEMPLATE,c.HTML],df=[c.TD,c.TH];class ff{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,r,a){this.treeAdapter=r,this.handler=a,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=c.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===c.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===S.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,r){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,r,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,r){const a=this._indexOf(t);this.items[a]=r,a===this.stackTop&&(this.current=r)}insertAfter(t,r,a){const s=this._indexOf(t)+1;this.items.splice(s,0,r),this.tagIDs.splice(s,0,a),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(t){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(t,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==S.HTML);this.shortenToLength(r<0?0:r)}shortenToLength(t){for(;this.stackTop>=t;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<t)}}popUntilElementPopped(t){const r=this._indexOf(t);this.shortenToLength(r<0?0:r)}popUntilPopped(t,r){const a=this._indexOfTagNames(t,r);this.shortenToLength(a<0?0:a)}popUntilNumberedHeaderPopped(){this.popUntilPopped(uf,S.HTML)}popUntilTableCellPopped(){this.popUntilPopped(df,S.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,r){for(let a=this.stackTop;a>=0;a--)if(t.includes(this.tagIDs[a])&&this.treeAdapter.getNamespaceURI(this.items[a])===r)return a;return-1}clearBackTo(t,r){const a=this._indexOfTagNames(t,r);this.shortenToLength(a+1)}clearBackToTableContext(){this.clearBackTo(lf,S.HTML)}clearBackToTableBodyContext(){this.clearBackTo(cf,S.HTML)}clearBackToTableRowContext(){this.clearBackTo(of,S.HTML)}remove(t){const r=this._indexOf(t);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===c.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const r=this._indexOf(t)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===c.HTML}hasInScope(t){for(let r=this.stackTop;r>=0;r--){const a=this.tagIDs[r],s=this.treeAdapter.getNamespaceURI(this.items[r]);if(a===t&&s===S.HTML)return!0;if(Ar.get(a)===s)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const r=this.tagIDs[t],a=this.treeAdapter.getNamespaceURI(this.items[t]);if(cu(r)&&a===S.HTML)return!0;if(Ar.get(r)===a)return!1}return!0}hasInListItemScope(t){for(let r=this.stackTop;r>=0;r--){const a=this.tagIDs[r],s=this.treeAdapter.getNamespaceURI(this.items[r]);if(a===t&&s===S.HTML)return!0;if((a===c.UL||a===c.OL)&&s===S.HTML||Ar.get(a)===s)return!1}return!0}hasInButtonScope(t){for(let r=this.stackTop;r>=0;r--){const a=this.tagIDs[r],s=this.treeAdapter.getNamespaceURI(this.items[r]);if(a===t&&s===S.HTML)return!0;if(a===c.BUTTON&&s===S.HTML||Ar.get(a)===s)return!1}return!0}hasInTableScope(t){for(let r=this.stackTop;r>=0;r--){const a=this.tagIDs[r];if(this.treeAdapter.getNamespaceURI(this.items[r])===S.HTML){if(a===t)return!0;if(a===c.TABLE||a===c.TEMPLATE||a===c.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const r=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===S.HTML){if(r===c.TBODY||r===c.THEAD||r===c.TFOOT)return!0;if(r===c.TABLE||r===c.HTML)return!1}}return!0}hasInSelectScope(t){for(let r=this.stackTop;r>=0;r--){const a=this.tagIDs[r];if(this.treeAdapter.getNamespaceURI(this.items[r])===S.HTML){if(a===t)return!0;if(a!==c.OPTION&&a!==c.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;hu.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Cn.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Cn.has(this.currentTagId);)this.pop()}}const Aa=3;var tt;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(tt=tt||(tt={}));const An={type:tt.Marker};class hf{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,r){const a=[],s=r.length,n=this.treeAdapter.getTagName(t),i=this.treeAdapter.getNamespaceURI(t);for(let u=0;u<this.entries.length;u++){const o=this.entries[u];if(o.type===tt.Marker)break;const{element:d}=o;if(this.treeAdapter.getTagName(d)===n&&this.treeAdapter.getNamespaceURI(d)===i){const f=this.treeAdapter.getAttrList(d);f.length===s&&a.push({idx:u,attrs:f})}}return a}_ensureNoahArkCondition(t){if(this.entries.length<Aa)return;const r=this.treeAdapter.getAttrList(t),a=this._getNoahArkConditionCandidates(t,r);if(a.length<Aa)return;const s=new Map(r.map(i=>[i.name,i.value]));let n=0;for(let i=0;i<a.length;i++){const u=a[i];u.attrs.every(o=>s.get(o.name)===o.value)&&(n+=1,n>=Aa&&this.entries.splice(u.idx,1))}}insertMarker(){this.entries.unshift(An)}pushElement(t,r){this._ensureNoahArkCondition(t),this.entries.unshift({type:tt.Element,element:t,token:r})}insertElementAfterBookmark(t,r){const a=this.entries.indexOf(this.bookmark);this.entries.splice(a,0,{type:tt.Element,element:t,token:r})}removeEntry(t){const r=this.entries.indexOf(t);r>=0&&this.entries.splice(r,1)}clearToLastMarker(){const t=this.entries.indexOf(An);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const r=this.entries.find(a=>a.type===tt.Marker||this.treeAdapter.getTagName(a.element)===t);return r&&r.type===tt.Element?r:null}getElementEntry(t){return this.entries.find(r=>r.type===tt.Element&&r.element===t)}}function yn(e){return{nodeName:"#text",value:e,parentNode:null}}const Bt={createDocument(){return{nodeName:"#document",mode:We.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,r){return{nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const a=e.childNodes.indexOf(r);e.childNodes.splice(a,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,r,a){const s=e.childNodes.find(n=>n.nodeName==="#documentType");if(s)s.name=t,s.publicId=r,s.systemId=a;else{const n={nodeName:"#documentType",name:t,publicId:r,systemId:a,parentNode:null};Bt.appendChild(e,n)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(Bt.isTextNode(r)){r.value+=t;return}}Bt.appendChild(e,yn(t))},insertTextBefore(e,t,r){const a=e.childNodes[e.childNodes.indexOf(r)-1];a&&Bt.isTextNode(a)?a.value+=t:Bt.insertBefore(e,yn(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(a=>a.name));for(let a=0;a<t.length;a++)r.has(t[a].name)||e.attrs.push(t[a])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},mu="html",mf="about:legacy-compat",pf="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",pu=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Ef=[...pu,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],bf=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Eu=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Tf=[...Eu,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Nn(e,t){return t.some(r=>e.startsWith(r))}function gf(e){return e.name===mu&&e.publicId===null&&(e.systemId===null||e.systemId===mf)}function _f(e){if(e.name!==mu)return We.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===pf)return We.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),bf.has(r))return We.QUIRKS;let a=t===null?Ef:pu;if(Nn(r,a))return We.QUIRKS;if(a=t===null?Eu:Tf,Nn(r,a))return We.LIMITED_QUIRKS}return We.NO_QUIRKS}const In={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},vf="definitionurl",Cf="definitionURL",Af=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),yf=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:S.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:S.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:S.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:S.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:S.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:S.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:S.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:S.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:S.XML}],["xml:space",{prefix:"xml",name:"space",namespace:S.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:S.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:S.XMLNS}]]),Nf=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),If=new Set([c.B,c.BIG,c.BLOCKQUOTE,c.BODY,c.BR,c.CENTER,c.CODE,c.DD,c.DIV,c.DL,c.DT,c.EM,c.EMBED,c.H1,c.H2,c.H3,c.H4,c.H5,c.H6,c.HEAD,c.HR,c.I,c.IMG,c.LI,c.LISTING,c.MENU,c.META,c.NOBR,c.OL,c.P,c.PRE,c.RUBY,c.S,c.SMALL,c.SPAN,c.STRONG,c.STRIKE,c.SUB,c.SUP,c.TABLE,c.TT,c.U,c.UL,c.VAR]);function Df(e){const t=e.tagID;return t===c.FONT&&e.attrs.some(({name:a})=>a===bt.COLOR||a===bt.SIZE||a===bt.FACE)||If.has(t)}function bu(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===vf){e.attrs[t].name=Cf;break}}function Tu(e){for(let t=0;t<e.attrs.length;t++){const r=Af.get(e.attrs[t].name);r!=null&&(e.attrs[t].name=r)}}function vs(e){for(let t=0;t<e.attrs.length;t++){const r=yf.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function xf(e){const t=Nf.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=na(e.tagName))}function Rf(e,t){return t===S.MATHML&&(e===c.MI||e===c.MO||e===c.MN||e===c.MS||e===c.MTEXT)}function Sf(e,t,r){if(t===S.MATHML&&e===c.ANNOTATION_XML){for(let a=0;a<r.length;a++)if(r[a].name===bt.ENCODING){const s=r[a].value.toLowerCase();return s===In.TEXT_HTML||s===In.APPLICATION_XML}}return t===S.SVG&&(e===c.FOREIGN_OBJECT||e===c.DESC||e===c.TITLE)}function kf(e,t,r,a){return(!a||a===S.HTML)&&Sf(e,t,r)||(!a||a===S.MATHML)&&Rf(e,t)}const Pf="hidden",Mf=8,Lf=3;var _;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(_||(_={}));const Of={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},gu=new Set([c.TABLE,c.TBODY,c.TFOOT,c.THEAD,c.TR]),Dn={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Bt,onParseError:null};class wf{constructor(t,r,a=null,s=null){this.fragmentContext=a,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=_.INITIAL,this.originalInsertionMode=_.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Dn,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new nf(this.options,this),this.activeFormattingElements=new hf(this.treeAdapter),this.fragmentContextID=a?na(this.treeAdapter.getTagName(a)):c.UNKNOWN,this._setContextModes(a??this.document,this.fragmentContextID),this.openElements=new ff(this.document,this.treeAdapter,this)}static parse(t,r){const a=new this(r);return a.tokenizer.write(t,!0),a.document}static getFragmentParser(t,r){const a={...Dn,...r};t??(t=a.treeAdapter.createElement(I.TEMPLATE,S.HTML,[]));const s=a.treeAdapter.createElement("documentmock",S.HTML,[]),n=new this(a,s,t);return n.fragmentContextID===c.TEMPLATE&&n.tmplInsertionModeStack.unshift(_.IN_TEMPLATE),n._initTokenizerForFragmentParsing(),n._insertFakeRootElement(),n._resetInsertionMode(),n._findFormInFragmentContext(),n}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,r),r}_err(t,r,a){var s;if(!this.onParseError)return;const n=(s=t.location)!==null&&s!==void 0?s:Of,i={code:r,startLine:n.startLine,startCol:n.startCol,startOffset:n.startOffset,endLine:a?n.startLine:n.endLine,endCol:a?n.startCol:n.endCol,endOffset:a?n.startOffset:n.endOffset};this.onParseError(i)}onItemPush(t,r,a){var s,n;(n=(s=this.treeAdapter).onItemPush)===null||n===void 0||n.call(s,t),a&&this.openElements.stackTop>0&&this._setContextModes(t,r)}onItemPop(t,r){var a,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(s=(a=this.treeAdapter).onItemPop)===null||s===void 0||s.call(a,t,this.openElements.current),r){let n,i;this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,i=this.fragmentContextID):{current:n,currentTagId:i}=this.openElements,this._setContextModes(n,i)}}_setContextModes(t,r){const a=t===this.document||this.treeAdapter.getNamespaceURI(t)===S.HTML;this.currentNotInHTML=!a,this.tokenizer.inForeignNode=!a&&!this._isIntegrationPoint(r,t)}_switchToTextParsing(t,r){this._insertElement(t,S.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=_.TEXT}switchToPlaintextParsing(){this.insertionMode=_.TEXT,this.originalInsertionMode=_.IN_BODY,this.tokenizer.state=ze.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===I.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==S.HTML))switch(this.fragmentContextID){case c.TITLE:case c.TEXTAREA:{this.tokenizer.state=ze.RCDATA;break}case c.STYLE:case c.XMP:case c.IFRAME:case c.NOEMBED:case c.NOFRAMES:case c.NOSCRIPT:{this.tokenizer.state=ze.RAWTEXT;break}case c.SCRIPT:{this.tokenizer.state=ze.SCRIPT_DATA;break}case c.PLAINTEXT:{this.tokenizer.state=ze.PLAINTEXT;break}}}_setDocumentType(t){const r=t.name||"",a=t.publicId||"",s=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,a,s),t.location){const i=this.treeAdapter.getChildNodes(this.document).find(u=>this.treeAdapter.isDocumentTypeNode(u));i&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}}_attachElementToTree(t,r){if(this.options.sourceCodeLocationInfo){const a=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(t,a)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const a=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(a,t)}}_appendElement(t,r){const a=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(a,t.location)}_insertElement(t,r){const a=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(a,t.location),this.openElements.push(a,t.tagID)}_insertFakeElement(t,r){const a=this.treeAdapter.createElement(t,S.HTML,[]);this._attachElementToTree(a,null),this.openElements.push(a,r)}_insertTemplate(t){const r=this.treeAdapter.createElement(t.tagName,S.HTML,t.attrs),a=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,a),this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(I.HTML,S.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,c.HTML)}_appendCommentNode(t,r){const a=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(r,a),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}_insertCharacters(t){let r,a;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:a}=this._findFosterParentingLocation(),a?this.treeAdapter.insertTextBefore(r,t.chars,a):this.treeAdapter.insertText(r,t.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,t.chars)),!t.location)return;const s=this.treeAdapter.getChildNodes(r),n=a?s.lastIndexOf(a):s.length,i=s[n-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:o,endCol:d,endOffset:f}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:o,endCol:d,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_adoptNodes(t,r){for(let a=this.treeAdapter.getFirstChild(t);a;a=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(a),this.treeAdapter.appendChild(r,a)}_setEndLocation(t,r){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&r.location){const a=r.location,s=this.treeAdapter.getTagName(t),n=r.type===se.END_TAG&&s===r.tagName?{endTag:{...a},endLine:a.endLine,endCol:a.endCol,endOffset:a.endOffset}:{endLine:a.startLine,endCol:a.startCol,endOffset:a.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,n)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let r,a;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,a=this.fragmentContextID):{current:r,currentTagId:a}=this.openElements,t.tagID===c.SVG&&this.treeAdapter.getTagName(r)===I.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===S.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===c.MGLYPH||t.tagID===c.MALIGNMARK)&&!this._isIntegrationPoint(a,r,S.HTML)}_processToken(t){switch(t.type){case se.CHARACTER:{this.onCharacter(t);break}case se.NULL_CHARACTER:{this.onNullCharacter(t);break}case se.COMMENT:{this.onComment(t);break}case se.DOCTYPE:{this.onDoctype(t);break}case se.START_TAG:{this._processStartTag(t);break}case se.END_TAG:{this.onEndTag(t);break}case se.EOF:{this.onEof(t);break}case se.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,r,a){const s=this.treeAdapter.getNamespaceURI(r),n=this.treeAdapter.getAttrList(r);return kf(t,s,n,a)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const r=this.activeFormattingElements.entries.findIndex(s=>s.type===tt.Marker||this.openElements.contains(s.element)),a=r<0?t-1:r-1;for(let s=a;s>=0;s--){const n=this.activeFormattingElements.entries[s];this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=_.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(c.P),this.openElements.popUntilTagNamePopped(c.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case c.TR:{this.insertionMode=_.IN_ROW;return}case c.TBODY:case c.THEAD:case c.TFOOT:{this.insertionMode=_.IN_TABLE_BODY;return}case c.CAPTION:{this.insertionMode=_.IN_CAPTION;return}case c.COLGROUP:{this.insertionMode=_.IN_COLUMN_GROUP;return}case c.TABLE:{this.insertionMode=_.IN_TABLE;return}case c.BODY:{this.insertionMode=_.IN_BODY;return}case c.FRAMESET:{this.insertionMode=_.IN_FRAMESET;return}case c.SELECT:{this._resetInsertionModeForSelect(t);return}case c.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case c.HTML:{this.insertionMode=this.headElement?_.AFTER_HEAD:_.BEFORE_HEAD;return}case c.TD:case c.TH:{if(t>0){this.insertionMode=_.IN_CELL;return}break}case c.HEAD:{if(t>0){this.insertionMode=_.IN_HEAD;return}break}}this.insertionMode=_.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let r=t-1;r>0;r--){const a=this.openElements.tagIDs[r];if(a===c.TEMPLATE)break;if(a===c.TABLE){this.insertionMode=_.IN_SELECT_IN_TABLE;return}}this.insertionMode=_.IN_SELECT}_isElementCausesFosterParenting(t){return gu.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case c.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===S.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case c.TABLE:{const a=this.treeAdapter.getParentNode(r);return a?{parent:a,beforeElement:r}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,t,r.beforeElement):this.treeAdapter.appendChild(r.parent,t)}_isSpecialElement(t,r){const a=this.treeAdapter.getNamespaceURI(t);return ef[a].has(r)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){f1(this,t);return}switch(this.insertionMode){case _.INITIAL:{Gt(this,t);break}case _.BEFORE_HTML:{Zt(this,t);break}case _.BEFORE_HEAD:{er(this,t);break}case _.IN_HEAD:{tr(this,t);break}case _.IN_HEAD_NO_SCRIPT:{rr(this,t);break}case _.AFTER_HEAD:{ar(this,t);break}case _.IN_BODY:case _.IN_CAPTION:case _.IN_CELL:case _.IN_TEMPLATE:{vu(this,t);break}case _.TEXT:case _.IN_SELECT:case _.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case _.IN_TABLE:case _.IN_TABLE_BODY:case _.IN_ROW:{ya(this,t);break}case _.IN_TABLE_TEXT:{Du(this,t);break}case _.IN_COLUMN_GROUP:{Yr(this,t);break}case _.AFTER_BODY:{Vr(this,t);break}case _.AFTER_AFTER_BODY:{Sr(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){d1(this,t);return}switch(this.insertionMode){case _.INITIAL:{Gt(this,t);break}case _.BEFORE_HTML:{Zt(this,t);break}case _.BEFORE_HEAD:{er(this,t);break}case _.IN_HEAD:{tr(this,t);break}case _.IN_HEAD_NO_SCRIPT:{rr(this,t);break}case _.AFTER_HEAD:{ar(this,t);break}case _.TEXT:{this._insertCharacters(t);break}case _.IN_TABLE:case _.IN_TABLE_BODY:case _.IN_ROW:{ya(this,t);break}case _.IN_COLUMN_GROUP:{Yr(this,t);break}case _.AFTER_BODY:{Vr(this,t);break}case _.AFTER_AFTER_BODY:{Sr(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){$a(this,t);return}switch(this.insertionMode){case _.INITIAL:case _.BEFORE_HTML:case _.BEFORE_HEAD:case _.IN_HEAD:case _.IN_HEAD_NO_SCRIPT:case _.AFTER_HEAD:case _.IN_BODY:case _.IN_TABLE:case _.IN_CAPTION:case _.IN_COLUMN_GROUP:case _.IN_TABLE_BODY:case _.IN_ROW:case _.IN_CELL:case _.IN_SELECT:case _.IN_SELECT_IN_TABLE:case _.IN_TEMPLATE:case _.IN_FRAMESET:case _.AFTER_FRAMESET:{$a(this,t);break}case _.IN_TABLE_TEXT:{Kt(this,t);break}case _.AFTER_BODY:{Vf(this,t);break}case _.AFTER_AFTER_BODY:case _.AFTER_AFTER_FRAMESET:{$f(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case _.INITIAL:{Wf(this,t);break}case _.BEFORE_HEAD:case _.IN_HEAD:case _.IN_HEAD_NO_SCRIPT:case _.AFTER_HEAD:{this._err(t,x.misplacedDoctype);break}case _.IN_TABLE_TEXT:{Kt(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,x.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?h1(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case _.INITIAL:{Gt(this,t);break}case _.BEFORE_HTML:{zf(this,t);break}case _.BEFORE_HEAD:{Gf(this,t);break}case _.IN_HEAD:{st(this,t);break}case _.IN_HEAD_NO_SCRIPT:{Xf(this,t);break}case _.AFTER_HEAD:{Zf(this,t);break}case _.IN_BODY:{Fe(this,t);break}case _.IN_TABLE:{Yt(this,t);break}case _.IN_TABLE_TEXT:{Kt(this,t);break}case _.IN_CAPTION:{Kh(this,t);break}case _.IN_COLUMN_GROUP:{ys(this,t);break}case _.IN_TABLE_BODY:{oa(this,t);break}case _.IN_ROW:{ca(this,t);break}case _.IN_CELL:{Jh(this,t);break}case _.IN_SELECT:{Su(this,t);break}case _.IN_SELECT_IN_TABLE:{e1(this,t);break}case _.IN_TEMPLATE:{r1(this,t);break}case _.AFTER_BODY:{s1(this,t);break}case _.IN_FRAMESET:{n1(this,t);break}case _.AFTER_FRAMESET:{u1(this,t);break}case _.AFTER_AFTER_BODY:{c1(this,t);break}case _.AFTER_AFTER_FRAMESET:{l1(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?m1(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case _.INITIAL:{Gt(this,t);break}case _.BEFORE_HTML:{qf(this,t);break}case _.BEFORE_HEAD:{Kf(this,t);break}case _.IN_HEAD:{Qf(this,t);break}case _.IN_HEAD_NO_SCRIPT:{Jf(this,t);break}case _.AFTER_HEAD:{eh(this,t);break}case _.IN_BODY:{ua(this,t);break}case _.TEXT:{Hh(this,t);break}case _.IN_TABLE:{ir(this,t);break}case _.IN_TABLE_TEXT:{Kt(this,t);break}case _.IN_CAPTION:{Qh(this,t);break}case _.IN_COLUMN_GROUP:{Xh(this,t);break}case _.IN_TABLE_BODY:{Wa(this,t);break}case _.IN_ROW:{Ru(this,t);break}case _.IN_CELL:{Zh(this,t);break}case _.IN_SELECT:{ku(this,t);break}case _.IN_SELECT_IN_TABLE:{t1(this,t);break}case _.IN_TEMPLATE:{a1(this,t);break}case _.AFTER_BODY:{Mu(this,t);break}case _.IN_FRAMESET:{i1(this,t);break}case _.AFTER_FRAMESET:{o1(this,t);break}case _.AFTER_AFTER_BODY:{Sr(this,t);break}}}onEof(t){switch(this.insertionMode){case _.INITIAL:{Gt(this,t);break}case _.BEFORE_HTML:{Zt(this,t);break}case _.BEFORE_HEAD:{er(this,t);break}case _.IN_HEAD:{tr(this,t);break}case _.IN_HEAD_NO_SCRIPT:{rr(this,t);break}case _.AFTER_HEAD:{ar(this,t);break}case _.IN_BODY:case _.IN_TABLE:case _.IN_CAPTION:case _.IN_COLUMN_GROUP:case _.IN_TABLE_BODY:case _.IN_ROW:case _.IN_CELL:case _.IN_SELECT:case _.IN_SELECT_IN_TABLE:{Nu(this,t);break}case _.TEXT:{jh(this,t);break}case _.IN_TABLE_TEXT:{Kt(this,t);break}case _.IN_TEMPLATE:{Pu(this,t);break}case _.AFTER_BODY:case _.IN_FRAMESET:case _.AFTER_FRAMESET:case _.AFTER_AFTER_BODY:case _.AFTER_AFTER_FRAMESET:{As(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===b.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case _.IN_HEAD:case _.IN_HEAD_NO_SCRIPT:case _.AFTER_HEAD:case _.TEXT:case _.IN_COLUMN_GROUP:case _.IN_SELECT:case _.IN_SELECT_IN_TABLE:case _.IN_FRAMESET:case _.AFTER_FRAMESET:{this._insertCharacters(t);break}case _.IN_BODY:case _.IN_CAPTION:case _.IN_CELL:case _.IN_TEMPLATE:case _.AFTER_BODY:case _.AFTER_AFTER_BODY:case _.AFTER_AFTER_FRAMESET:{_u(this,t);break}case _.IN_TABLE:case _.IN_TABLE_BODY:case _.IN_ROW:{ya(this,t);break}case _.IN_TABLE_TEXT:{Iu(this,t);break}}}}function Bf(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):yu(e,t),r}function Ff(e,t){let r=null,a=e.openElements.stackTop;for(;a>=0;a--){const s=e.openElements.items[a];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[a])&&(r=s)}return r||(e.openElements.shortenToLength(a<0?0:a),e.activeFormattingElements.removeEntry(t)),r}function Hf(e,t,r){let a=t,s=e.openElements.getCommonAncestor(t);for(let n=0,i=s;i!==r;n++,i=s){s=e.openElements.getCommonAncestor(i);const u=e.activeFormattingElements.getElementEntry(i),o=u&&n>=Lf;!u||o?(o&&e.activeFormattingElements.removeEntry(u),e.openElements.remove(i)):(i=jf(e,u),a===t&&(e.activeFormattingElements.bookmark=u),e.treeAdapter.detachNode(a),e.treeAdapter.appendChild(i,a),a=i)}return a}function jf(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),a=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,a),t.element=a,a}function Uf(e,t,r){const a=e.treeAdapter.getTagName(t),s=na(a);if(e._isElementCausesFosterParenting(s))e._fosterParentElement(r);else{const n=e.treeAdapter.getNamespaceURI(t);s===c.TEMPLATE&&n===S.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function Yf(e,t,r){const a=e.treeAdapter.getNamespaceURI(r.element),{token:s}=r,n=e.treeAdapter.createElement(s.tagName,a,s.attrs);e._adoptNodes(t,n),e.treeAdapter.appendChild(t,n),e.activeFormattingElements.insertElementAfterBookmark(n,s),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,n,s.tagID)}function Cs(e,t){for(let r=0;r<Mf;r++){const a=Bf(e,t);if(!a)break;const s=Ff(e,a);if(!s)break;e.activeFormattingElements.bookmark=a;const n=Hf(e,s,a.element),i=e.openElements.getCommonAncestor(a.element);e.treeAdapter.detachNode(n),i&&Uf(e,i,n),Yf(e,s,a)}}function $a(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Vf(e,t){e._appendCommentNode(t,e.openElements.items[0])}function $f(e,t){e._appendCommentNode(t,e.document)}function As(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let a=e.openElements.stackTop;a>=r;a--)e._setEndLocation(e.openElements.items[a],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const a=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(a);if(s&&!s.endTag&&(e._setEndLocation(a,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(n);i&&!i.endTag&&e._setEndLocation(n,t)}}}}function Wf(e,t){e._setDocumentType(t);const r=t.forceQuirks?We.QUIRKS:_f(t);gf(t)||e._err(t,x.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=_.BEFORE_HTML}function Gt(e,t){e._err(t,x.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,We.QUIRKS),e.insertionMode=_.BEFORE_HTML,e._processToken(t)}function zf(e,t){t.tagID===c.HTML?(e._insertElement(t,S.HTML),e.insertionMode=_.BEFORE_HEAD):Zt(e,t)}function qf(e,t){const r=t.tagID;(r===c.HTML||r===c.HEAD||r===c.BODY||r===c.BR)&&Zt(e,t)}function Zt(e,t){e._insertFakeRootElement(),e.insertionMode=_.BEFORE_HEAD,e._processToken(t)}function Gf(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.HEAD:{e._insertElement(t,S.HTML),e.headElement=e.openElements.current,e.insertionMode=_.IN_HEAD;break}default:er(e,t)}}function Kf(e,t){const r=t.tagID;r===c.HEAD||r===c.BODY||r===c.HTML||r===c.BR?er(e,t):e._err(t,x.endTagWithoutMatchingOpenElement)}function er(e,t){e._insertFakeElement(I.HEAD,c.HEAD),e.headElement=e.openElements.current,e.insertionMode=_.IN_HEAD,e._processToken(t)}function st(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.BASE:case c.BASEFONT:case c.BGSOUND:case c.LINK:case c.META:{e._appendElement(t,S.HTML),t.ackSelfClosing=!0;break}case c.TITLE:{e._switchToTextParsing(t,ze.RCDATA);break}case c.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ze.RAWTEXT):(e._insertElement(t,S.HTML),e.insertionMode=_.IN_HEAD_NO_SCRIPT);break}case c.NOFRAMES:case c.STYLE:{e._switchToTextParsing(t,ze.RAWTEXT);break}case c.SCRIPT:{e._switchToTextParsing(t,ze.SCRIPT_DATA);break}case c.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=_.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(_.IN_TEMPLATE);break}case c.HEAD:{e._err(t,x.misplacedStartTagForHeadElement);break}default:tr(e,t)}}function Qf(e,t){switch(t.tagID){case c.HEAD:{e.openElements.pop(),e.insertionMode=_.AFTER_HEAD;break}case c.BODY:case c.BR:case c.HTML:{tr(e,t);break}case c.TEMPLATE:{Lt(e,t);break}default:e._err(t,x.endTagWithoutMatchingOpenElement)}}function Lt(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==c.TEMPLATE&&e._err(t,x.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(c.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,x.endTagWithoutMatchingOpenElement)}function tr(e,t){e.openElements.pop(),e.insertionMode=_.AFTER_HEAD,e._processToken(t)}function Xf(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.BASEFONT:case c.BGSOUND:case c.HEAD:case c.LINK:case c.META:case c.NOFRAMES:case c.STYLE:{st(e,t);break}case c.NOSCRIPT:{e._err(t,x.nestedNoscriptInHead);break}default:rr(e,t)}}function Jf(e,t){switch(t.tagID){case c.NOSCRIPT:{e.openElements.pop(),e.insertionMode=_.IN_HEAD;break}case c.BR:{rr(e,t);break}default:e._err(t,x.endTagWithoutMatchingOpenElement)}}function rr(e,t){const r=t.type===se.EOF?x.openElementsLeftAfterEof:x.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=_.IN_HEAD,e._processToken(t)}function Zf(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.BODY:{e._insertElement(t,S.HTML),e.framesetOk=!1,e.insertionMode=_.IN_BODY;break}case c.FRAMESET:{e._insertElement(t,S.HTML),e.insertionMode=_.IN_FRAMESET;break}case c.BASE:case c.BASEFONT:case c.BGSOUND:case c.LINK:case c.META:case c.NOFRAMES:case c.SCRIPT:case c.STYLE:case c.TEMPLATE:case c.TITLE:{e._err(t,x.abandonedHeadElementChild),e.openElements.push(e.headElement,c.HEAD),st(e,t),e.openElements.remove(e.headElement);break}case c.HEAD:{e._err(t,x.misplacedStartTagForHeadElement);break}default:ar(e,t)}}function eh(e,t){switch(t.tagID){case c.BODY:case c.HTML:case c.BR:{ar(e,t);break}case c.TEMPLATE:{Lt(e,t);break}default:e._err(t,x.endTagWithoutMatchingOpenElement)}}function ar(e,t){e._insertFakeElement(I.BODY,c.BODY),e.insertionMode=_.IN_BODY,ia(e,t)}function ia(e,t){switch(t.type){case se.CHARACTER:{vu(e,t);break}case se.WHITESPACE_CHARACTER:{_u(e,t);break}case se.COMMENT:{$a(e,t);break}case se.START_TAG:{Fe(e,t);break}case se.END_TAG:{ua(e,t);break}case se.EOF:{Nu(e,t);break}}}function _u(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function vu(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function th(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function rh(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function ah(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,S.HTML),e.insertionMode=_.IN_FRAMESET)}function sh(e,t){e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._insertElement(t,S.HTML)}function nh(e,t){e.openElements.hasInButtonScope(c.P)&&e._closePElement(),cu(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,S.HTML)}function ih(e,t){e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._insertElement(t,S.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function uh(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._insertElement(t,S.HTML),r||(e.formElement=e.openElements.current))}function oh(e,t){e.framesetOk=!1;const r=t.tagID;for(let a=e.openElements.stackTop;a>=0;a--){const s=e.openElements.tagIDs[a];if(r===c.LI&&s===c.LI||(r===c.DD||r===c.DT)&&(s===c.DD||s===c.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==c.ADDRESS&&s!==c.DIV&&s!==c.P&&e._isSpecialElement(e.openElements.items[a],s))break}e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._insertElement(t,S.HTML)}function ch(e,t){e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._insertElement(t,S.HTML),e.tokenizer.state=ze.PLAINTEXT}function lh(e,t){e.openElements.hasInScope(c.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(c.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML),e.framesetOk=!1}function dh(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(I.A);r&&(Cs(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function fh(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function hh(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(c.NOBR)&&(Cs(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,S.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function mh(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function ph(e,t){e.treeAdapter.getDocumentMode(e.document)!==We.QUIRKS&&e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._insertElement(t,S.HTML),e.framesetOk=!1,e.insertionMode=_.IN_TABLE}function Cu(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,S.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Au(e){const t=iu(e,bt.TYPE);return t!=null&&t.toLowerCase()===Pf}function Eh(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,S.HTML),Au(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function bh(e,t){e._appendElement(t,S.HTML),t.ackSelfClosing=!0}function Th(e,t){e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._appendElement(t,S.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function gh(e,t){t.tagName=I.IMG,t.tagID=c.IMG,Cu(e,t)}function _h(e,t){e._insertElement(t,S.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ze.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=_.TEXT}function vh(e,t){e.openElements.hasInButtonScope(c.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ze.RAWTEXT)}function Ch(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ze.RAWTEXT)}function xn(e,t){e._switchToTextParsing(t,ze.RAWTEXT)}function Ah(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===_.IN_TABLE||e.insertionMode===_.IN_CAPTION||e.insertionMode===_.IN_TABLE_BODY||e.insertionMode===_.IN_ROW||e.insertionMode===_.IN_CELL?_.IN_SELECT_IN_TABLE:_.IN_SELECT}function yh(e,t){e.openElements.currentTagId===c.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML)}function Nh(e,t){e.openElements.hasInScope(c.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,S.HTML)}function Ih(e,t){e.openElements.hasInScope(c.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(c.RTC),e._insertElement(t,S.HTML)}function Dh(e,t){e._reconstructActiveFormattingElements(),bu(t),vs(t),t.selfClosing?e._appendElement(t,S.MATHML):e._insertElement(t,S.MATHML),t.ackSelfClosing=!0}function xh(e,t){e._reconstructActiveFormattingElements(),Tu(t),vs(t),t.selfClosing?e._appendElement(t,S.SVG):e._insertElement(t,S.SVG),t.ackSelfClosing=!0}function Rn(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,S.HTML)}function Fe(e,t){switch(t.tagID){case c.I:case c.S:case c.B:case c.U:case c.EM:case c.TT:case c.BIG:case c.CODE:case c.FONT:case c.SMALL:case c.STRIKE:case c.STRONG:{fh(e,t);break}case c.A:{dh(e,t);break}case c.H1:case c.H2:case c.H3:case c.H4:case c.H5:case c.H6:{nh(e,t);break}case c.P:case c.DL:case c.OL:case c.UL:case c.DIV:case c.DIR:case c.NAV:case c.MAIN:case c.MENU:case c.ASIDE:case c.CENTER:case c.FIGURE:case c.FOOTER:case c.HEADER:case c.HGROUP:case c.DIALOG:case c.DETAILS:case c.ADDRESS:case c.ARTICLE:case c.SECTION:case c.SUMMARY:case c.FIELDSET:case c.BLOCKQUOTE:case c.FIGCAPTION:{sh(e,t);break}case c.LI:case c.DD:case c.DT:{oh(e,t);break}case c.BR:case c.IMG:case c.WBR:case c.AREA:case c.EMBED:case c.KEYGEN:{Cu(e,t);break}case c.HR:{Th(e,t);break}case c.RB:case c.RTC:{Nh(e,t);break}case c.RT:case c.RP:{Ih(e,t);break}case c.PRE:case c.LISTING:{ih(e,t);break}case c.XMP:{vh(e,t);break}case c.SVG:{xh(e,t);break}case c.HTML:{th(e,t);break}case c.BASE:case c.LINK:case c.META:case c.STYLE:case c.TITLE:case c.SCRIPT:case c.BGSOUND:case c.BASEFONT:case c.TEMPLATE:{st(e,t);break}case c.BODY:{rh(e,t);break}case c.FORM:{uh(e,t);break}case c.NOBR:{hh(e,t);break}case c.MATH:{Dh(e,t);break}case c.TABLE:{ph(e,t);break}case c.INPUT:{Eh(e,t);break}case c.PARAM:case c.TRACK:case c.SOURCE:{bh(e,t);break}case c.IMAGE:{gh(e,t);break}case c.BUTTON:{lh(e,t);break}case c.APPLET:case c.OBJECT:case c.MARQUEE:{mh(e,t);break}case c.IFRAME:{Ch(e,t);break}case c.SELECT:{Ah(e,t);break}case c.OPTION:case c.OPTGROUP:{yh(e,t);break}case c.NOEMBED:{xn(e,t);break}case c.FRAMESET:{ah(e,t);break}case c.TEXTAREA:{_h(e,t);break}case c.NOSCRIPT:{e.options.scriptingEnabled?xn(e,t):Rn(e,t);break}case c.PLAINTEXT:{ch(e,t);break}case c.COL:case c.TH:case c.TD:case c.TR:case c.HEAD:case c.FRAME:case c.TBODY:case c.TFOOT:case c.THEAD:case c.CAPTION:case c.COLGROUP:break;default:Rn(e,t)}}function Rh(e,t){if(e.openElements.hasInScope(c.BODY)&&(e.insertionMode=_.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function Sh(e,t){e.openElements.hasInScope(c.BODY)&&(e.insertionMode=_.AFTER_BODY,Mu(e,t))}function kh(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function Ph(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(c.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(c.FORM):r&&e.openElements.remove(r))}function Mh(e){e.openElements.hasInButtonScope(c.P)||e._insertFakeElement(I.P,c.P),e._closePElement()}function Lh(e){e.openElements.hasInListItemScope(c.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(c.LI),e.openElements.popUntilTagNamePopped(c.LI))}function Oh(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function wh(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Bh(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function Fh(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(I.BR,c.BR),e.openElements.pop(),e.framesetOk=!1}function yu(e,t){const r=t.tagName,a=t.tagID;for(let s=e.openElements.stackTop;s>0;s--){const n=e.openElements.items[s],i=e.openElements.tagIDs[s];if(a===i&&(a!==c.UNKNOWN||e.treeAdapter.getTagName(n)===r)){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.stackTop>=s&&e.openElements.shortenToLength(s);break}if(e._isSpecialElement(n,i))break}}function ua(e,t){switch(t.tagID){case c.A:case c.B:case c.I:case c.S:case c.U:case c.EM:case c.TT:case c.BIG:case c.CODE:case c.FONT:case c.NOBR:case c.SMALL:case c.STRIKE:case c.STRONG:{Cs(e,t);break}case c.P:{Mh(e);break}case c.DL:case c.UL:case c.OL:case c.DIR:case c.DIV:case c.NAV:case c.PRE:case c.MAIN:case c.MENU:case c.ASIDE:case c.BUTTON:case c.CENTER:case c.FIGURE:case c.FOOTER:case c.HEADER:case c.HGROUP:case c.DIALOG:case c.ADDRESS:case c.ARTICLE:case c.DETAILS:case c.SECTION:case c.SUMMARY:case c.LISTING:case c.FIELDSET:case c.BLOCKQUOTE:case c.FIGCAPTION:{kh(e,t);break}case c.LI:{Lh(e);break}case c.DD:case c.DT:{Oh(e,t);break}case c.H1:case c.H2:case c.H3:case c.H4:case c.H5:case c.H6:{wh(e);break}case c.BR:{Fh(e);break}case c.BODY:{Rh(e,t);break}case c.HTML:{Sh(e,t);break}case c.FORM:{Ph(e);break}case c.APPLET:case c.OBJECT:case c.MARQUEE:{Bh(e,t);break}case c.TEMPLATE:{Lt(e,t);break}default:yu(e,t)}}function Nu(e,t){e.tmplInsertionModeStack.length>0?Pu(e,t):As(e,t)}function Hh(e,t){var r;t.tagID===c.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function jh(e,t){e._err(t,x.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function ya(e,t){if(gu.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=_.IN_TABLE_TEXT,t.type){case se.CHARACTER:{Du(e,t);break}case se.WHITESPACE_CHARACTER:{Iu(e,t);break}}else mr(e,t)}function Uh(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,S.HTML),e.insertionMode=_.IN_CAPTION}function Yh(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,S.HTML),e.insertionMode=_.IN_COLUMN_GROUP}function Vh(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(I.COLGROUP,c.COLGROUP),e.insertionMode=_.IN_COLUMN_GROUP,ys(e,t)}function $h(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,S.HTML),e.insertionMode=_.IN_TABLE_BODY}function Wh(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(I.TBODY,c.TBODY),e.insertionMode=_.IN_TABLE_BODY,oa(e,t)}function zh(e,t){e.openElements.hasInTableScope(c.TABLE)&&(e.openElements.popUntilTagNamePopped(c.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function qh(e,t){Au(t)?e._appendElement(t,S.HTML):mr(e,t),t.ackSelfClosing=!0}function Gh(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,S.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Yt(e,t){switch(t.tagID){case c.TD:case c.TH:case c.TR:{Wh(e,t);break}case c.STYLE:case c.SCRIPT:case c.TEMPLATE:{st(e,t);break}case c.COL:{Vh(e,t);break}case c.FORM:{Gh(e,t);break}case c.TABLE:{zh(e,t);break}case c.TBODY:case c.TFOOT:case c.THEAD:{$h(e,t);break}case c.INPUT:{qh(e,t);break}case c.CAPTION:{Uh(e,t);break}case c.COLGROUP:{Yh(e,t);break}default:mr(e,t)}}function ir(e,t){switch(t.tagID){case c.TABLE:{e.openElements.hasInTableScope(c.TABLE)&&(e.openElements.popUntilTagNamePopped(c.TABLE),e._resetInsertionMode());break}case c.TEMPLATE:{Lt(e,t);break}case c.BODY:case c.CAPTION:case c.COL:case c.COLGROUP:case c.HTML:case c.TBODY:case c.TD:case c.TFOOT:case c.TH:case c.THEAD:case c.TR:break;default:mr(e,t)}}function mr(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,ia(e,t),e.fosterParentingEnabled=r}function Iu(e,t){e.pendingCharacterTokens.push(t)}function Du(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Kt(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)mr(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const xu=new Set([c.CAPTION,c.COL,c.COLGROUP,c.TBODY,c.TD,c.TFOOT,c.TH,c.THEAD,c.TR]);function Kh(e,t){const r=t.tagID;xu.has(r)?e.openElements.hasInTableScope(c.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(c.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=_.IN_TABLE,Yt(e,t)):Fe(e,t)}function Qh(e,t){const r=t.tagID;switch(r){case c.CAPTION:case c.TABLE:{e.openElements.hasInTableScope(c.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(c.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=_.IN_TABLE,r===c.TABLE&&ir(e,t));break}case c.BODY:case c.COL:case c.COLGROUP:case c.HTML:case c.TBODY:case c.TD:case c.TFOOT:case c.TH:case c.THEAD:case c.TR:break;default:ua(e,t)}}function ys(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.COL:{e._appendElement(t,S.HTML),t.ackSelfClosing=!0;break}case c.TEMPLATE:{st(e,t);break}default:Yr(e,t)}}function Xh(e,t){switch(t.tagID){case c.COLGROUP:{e.openElements.currentTagId===c.COLGROUP&&(e.openElements.pop(),e.insertionMode=_.IN_TABLE);break}case c.TEMPLATE:{Lt(e,t);break}case c.COL:break;default:Yr(e,t)}}function Yr(e,t){e.openElements.currentTagId===c.COLGROUP&&(e.openElements.pop(),e.insertionMode=_.IN_TABLE,e._processToken(t))}function oa(e,t){switch(t.tagID){case c.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,S.HTML),e.insertionMode=_.IN_ROW;break}case c.TH:case c.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(I.TR,c.TR),e.insertionMode=_.IN_ROW,ca(e,t);break}case c.CAPTION:case c.COL:case c.COLGROUP:case c.TBODY:case c.TFOOT:case c.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE,Yt(e,t));break}default:Yt(e,t)}}function Wa(e,t){const r=t.tagID;switch(t.tagID){case c.TBODY:case c.TFOOT:case c.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE);break}case c.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE,ir(e,t));break}case c.BODY:case c.CAPTION:case c.COL:case c.COLGROUP:case c.HTML:case c.TD:case c.TH:case c.TR:break;default:ir(e,t)}}function ca(e,t){switch(t.tagID){case c.TH:case c.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,S.HTML),e.insertionMode=_.IN_CELL,e.activeFormattingElements.insertMarker();break}case c.CAPTION:case c.COL:case c.COLGROUP:case c.TBODY:case c.TFOOT:case c.THEAD:case c.TR:{e.openElements.hasInTableScope(c.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE_BODY,oa(e,t));break}default:Yt(e,t)}}function Ru(e,t){switch(t.tagID){case c.TR:{e.openElements.hasInTableScope(c.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE_BODY);break}case c.TABLE:{e.openElements.hasInTableScope(c.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE_BODY,Wa(e,t));break}case c.TBODY:case c.TFOOT:case c.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(c.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=_.IN_TABLE_BODY,Wa(e,t));break}case c.BODY:case c.CAPTION:case c.COL:case c.COLGROUP:case c.HTML:case c.TD:case c.TH:break;default:ir(e,t)}}function Jh(e,t){const r=t.tagID;xu.has(r)?(e.openElements.hasInTableScope(c.TD)||e.openElements.hasInTableScope(c.TH))&&(e._closeTableCell(),ca(e,t)):Fe(e,t)}function Zh(e,t){const r=t.tagID;switch(r){case c.TD:case c.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=_.IN_ROW);break}case c.TABLE:case c.TBODY:case c.TFOOT:case c.THEAD:case c.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),Ru(e,t));break}case c.BODY:case c.CAPTION:case c.COL:case c.COLGROUP:case c.HTML:break;default:ua(e,t)}}function Su(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.OPTION:{e.openElements.currentTagId===c.OPTION&&e.openElements.pop(),e._insertElement(t,S.HTML);break}case c.OPTGROUP:{e.openElements.currentTagId===c.OPTION&&e.openElements.pop(),e.openElements.currentTagId===c.OPTGROUP&&e.openElements.pop(),e._insertElement(t,S.HTML);break}case c.INPUT:case c.KEYGEN:case c.TEXTAREA:case c.SELECT:{e.openElements.hasInSelectScope(c.SELECT)&&(e.openElements.popUntilTagNamePopped(c.SELECT),e._resetInsertionMode(),t.tagID!==c.SELECT&&e._processStartTag(t));break}case c.SCRIPT:case c.TEMPLATE:{st(e,t);break}}}function ku(e,t){switch(t.tagID){case c.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===c.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===c.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===c.OPTGROUP&&e.openElements.pop();break}case c.OPTION:{e.openElements.currentTagId===c.OPTION&&e.openElements.pop();break}case c.SELECT:{e.openElements.hasInSelectScope(c.SELECT)&&(e.openElements.popUntilTagNamePopped(c.SELECT),e._resetInsertionMode());break}case c.TEMPLATE:{Lt(e,t);break}}}function e1(e,t){const r=t.tagID;r===c.CAPTION||r===c.TABLE||r===c.TBODY||r===c.TFOOT||r===c.THEAD||r===c.TR||r===c.TD||r===c.TH?(e.openElements.popUntilTagNamePopped(c.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Su(e,t)}function t1(e,t){const r=t.tagID;r===c.CAPTION||r===c.TABLE||r===c.TBODY||r===c.TFOOT||r===c.THEAD||r===c.TR||r===c.TD||r===c.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(c.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ku(e,t)}function r1(e,t){switch(t.tagID){case c.BASE:case c.BASEFONT:case c.BGSOUND:case c.LINK:case c.META:case c.NOFRAMES:case c.SCRIPT:case c.STYLE:case c.TEMPLATE:case c.TITLE:{st(e,t);break}case c.CAPTION:case c.COLGROUP:case c.TBODY:case c.TFOOT:case c.THEAD:{e.tmplInsertionModeStack[0]=_.IN_TABLE,e.insertionMode=_.IN_TABLE,Yt(e,t);break}case c.COL:{e.tmplInsertionModeStack[0]=_.IN_COLUMN_GROUP,e.insertionMode=_.IN_COLUMN_GROUP,ys(e,t);break}case c.TR:{e.tmplInsertionModeStack[0]=_.IN_TABLE_BODY,e.insertionMode=_.IN_TABLE_BODY,oa(e,t);break}case c.TD:case c.TH:{e.tmplInsertionModeStack[0]=_.IN_ROW,e.insertionMode=_.IN_ROW,ca(e,t);break}default:e.tmplInsertionModeStack[0]=_.IN_BODY,e.insertionMode=_.IN_BODY,Fe(e,t)}}function a1(e,t){t.tagID===c.TEMPLATE&&Lt(e,t)}function Pu(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(c.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):As(e,t)}function s1(e,t){t.tagID===c.HTML?Fe(e,t):Vr(e,t)}function Mu(e,t){var r;if(t.tagID===c.HTML){if(e.fragmentContext||(e.insertionMode=_.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===c.HTML){e._setEndLocation(e.openElements.items[0],t);const a=e.openElements.items[1];a&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(a))===null||r===void 0)&&r.endTag)&&e._setEndLocation(a,t)}}else Vr(e,t)}function Vr(e,t){e.insertionMode=_.IN_BODY,ia(e,t)}function n1(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.FRAMESET:{e._insertElement(t,S.HTML);break}case c.FRAME:{e._appendElement(t,S.HTML),t.ackSelfClosing=!0;break}case c.NOFRAMES:{st(e,t);break}}}function i1(e,t){t.tagID===c.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==c.FRAMESET&&(e.insertionMode=_.AFTER_FRAMESET))}function u1(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.NOFRAMES:{st(e,t);break}}}function o1(e,t){t.tagID===c.HTML&&(e.insertionMode=_.AFTER_AFTER_FRAMESET)}function c1(e,t){t.tagID===c.HTML?Fe(e,t):Sr(e,t)}function Sr(e,t){e.insertionMode=_.IN_BODY,ia(e,t)}function l1(e,t){switch(t.tagID){case c.HTML:{Fe(e,t);break}case c.NOFRAMES:{st(e,t);break}}}function d1(e,t){t.chars=_e,e._insertCharacters(t)}function f1(e,t){e._insertCharacters(t),e.framesetOk=!1}function Lu(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==S.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function h1(e,t){if(Df(t))Lu(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),a=e.treeAdapter.getNamespaceURI(r);a===S.MATHML?bu(t):a===S.SVG&&(xf(t),Tu(t)),vs(t),t.selfClosing?e._appendElement(t,a):e._insertElement(t,a),t.ackSelfClosing=!0}}function m1(e,t){if(t.tagID===c.P||t.tagID===c.BR){Lu(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const a=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(a)===S.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(a);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(r);break}}}I.AREA,I.BASE,I.BASEFONT,I.BGSOUND,I.BR,I.COL,I.EMBED,I.FRAME,I.HR,I.IMG,I.INPUT,I.KEYGEN,I.LINK,I.META,I.PARAM,I.SOURCE,I.TRACK,I.WBR;function Ou(e,t){return wf.parse(e,t)}var le;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(le||(le={}));function p1(e){return e.type===le.Tag||e.type===le.Script||e.type===le.Style}le.Root;le.Text;le.Directive;le.Comment;le.Script;le.Style;le.Tag;le.CDATA;le.Doctype;class wu{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return Vu(this,t)}}class Ns extends wu{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}class Bu extends Ns{constructor(){super(...arguments),this.type=le.Text}get nodeType(){return 3}}class Fu extends Ns{constructor(){super(...arguments),this.type=le.Comment}get nodeType(){return 8}}class Hu extends Ns{constructor(t,r){super(r),this.name=t,this.type=le.Directive}get nodeType(){return 1}}class Is extends wu{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class E1 extends Is{constructor(){super(...arguments),this.type=le.CDATA}get nodeType(){return 4}}class za extends Is{constructor(){super(...arguments),this.type=le.Root}get nodeType(){return 9}}class ju extends Is{constructor(t,r,a=[],s=t==="script"?le.Script:t==="style"?le.Style:le.Tag){super(a),this.name=t,this.attribs=r,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var r,a;return{name:t,value:this.attribs[t],namespace:(r=this["x-attribsNamespace"])===null||r===void 0?void 0:r[t],prefix:(a=this["x-attribsPrefix"])===null||a===void 0?void 0:a[t]}})}}function Uu(e){return p1(e)}function b1(e){return e.type===le.CDATA}function kr(e){return e.type===le.Text}function Yu(e){return e.type===le.Comment}function qa(e){return e.type===le.Directive}function T1(e){return e.type===le.Root}function Vu(e,t=!1){let r;if(kr(e))r=new Bu(e.data);else if(Yu(e))r=new Fu(e.data);else if(Uu(e)){const a=t?Na(e.children):[],s=new ju(e.name,{...e.attribs},a);a.forEach(n=>n.parent=s),e.namespace!=null&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...e["x-attribsPrefix"]}),r=s}else if(b1(e)){const a=t?Na(e.children):[],s=new E1(a);a.forEach(n=>n.parent=s),r=s}else if(T1(e)){const a=t?Na(e.children):[],s=new za(a);a.forEach(n=>n.parent=s),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),r=s}else if(qa(e)){const a=new Hu(e.name,e.data);e["x-name"]!=null&&(a["x-name"]=e["x-name"],a["x-publicId"]=e["x-publicId"],a["x-systemId"]=e["x-systemId"]),r=a}else throw new Error(`Not implemented yet: ${e.type}`);return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}function Na(e){const t=e.map(r=>Vu(r,!0));for(let r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}function Sn(e){return new Bu(e)}function kn(e){const t=e.includes('"')?"'":'"';return t+e+t}function g1(e,t,r){let a="!DOCTYPE ";return e&&(a+=e),t?a+=` PUBLIC ${kn(t)}`:r&&(a+=" SYSTEM"),r&&(a+=` ${kn(r)}`),a}const Ft={isCommentNode:Yu,isElementNode:Uu,isTextNode:kr,createDocument(){const e=new za([]);return e["x-mode"]=We.NO_QUIRKS,e},createDocumentFragment(){return new za([])},createElement(e,t,r){const a=Object.create(null),s=Object.create(null),n=Object.create(null);for(let u=0;u<r.length;u++){const o=r[u].name;a[o]=r[u].value,s[o]=r[u].namespace,n[o]=r[u].prefix}const i=new ju(e,a,[]);return i.namespace=t,i["x-attribsNamespace"]=s,i["x-attribsPrefix"]=n,i},createCommentNode(e){return new Fu(e)},appendChild(e,t){const r=e.children[e.children.length-1];r&&(r.next=t,t.prev=r),e.children.push(t),t.parent=e},insertBefore(e,t,r){const a=e.children.indexOf(r),{prev:s}=r;s&&(s.next=t,t.prev=s),r.prev=t,t.next=r,e.children.splice(a,0,t),t.parent=e},setTemplateContent(e,t){Ft.appendChild(e,t)},getTemplateContent(e){return e.children[0]},setDocumentType(e,t,r,a){const s=g1(t,r,a);let n=e.children.find(i=>qa(i)&&i.name==="!doctype");n?n.data=s??null:(n=new Hu("!doctype",s),Ft.appendChild(e,n)),n["x-name"]=t??void 0,n["x-publicId"]=r??void 0,n["x-systemId"]=a??void 0},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode(e){return e["x-mode"]},detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:r,next:a}=e;e.prev=null,e.next=null,r&&(r.next=a),a&&(a.prev=r),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const r=e.children[e.children.length-1];r&&kr(r)?r.data+=t:Ft.appendChild(e,Sn(t))},insertTextBefore(e,t,r){const a=e.children[e.children.indexOf(r)-1];a&&kr(a)?a.data+=t:Ft.insertBefore(e,Sn(t),r)},adoptAttributes(e,t){for(let r=0;r<t.length;r++){const a=t[r].name;typeof e.attribs[a]>"u"&&(e.attribs[a]=t[r].value,e["x-attribsNamespace"][a]=t[r].namespace,e["x-attribsPrefix"][a]=t[r].prefix)}},getFirstChild(e){return e.children[0]},getChildNodes(e){return e.children},getParentNode(e){return e.parent},getAttrList(e){return e.attributes},getTagName(e){return e.name},getNamespaceURI(e){return e.namespace},getTextNodeContent(e){return e.data},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){var t;return(t=e["x-name"])!==null&&t!==void 0?t:""},getDocumentTypeNodePublicId(e){var t;return(t=e["x-publicId"])!==null&&t!==void 0?t:""},getDocumentTypeNodeSystemId(e){var t;return(t=e["x-systemId"])!==null&&t!==void 0?t:""},isDocumentTypeNode(e){return qa(e)&&e.name==="!doctype"},setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){t.endOffset!=null&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},$u=e=>{var t;return!!(e.tagName=="figure"&&((t=e.attribs.class)!=null&&t.includes("image")||e.childNodes.find(r=>r.name==="img")))},Wu=e=>{const t=e.childNodes.find(i=>i.name==="img");let r,a;t&&(r=t.attribs.src,a="");const s=[],n=e.childNodes.find(i=>i.name==="figcaption");return n?s[0]=Be("element",{type:"caption"},n.childNodes.map(ft)):s[0]=Be("element",{type:"caption"},[{text:a??""}]),Be("element",{...pr(e),type:"image",url:r},s)},Pn="image",zu=e=>e.tagName==="a",qu=e=>{var a,s;const t=pr(e),r=(a=e.attribs.class)!=null&&a.includes("internal-item")?"internal-item":(s=e.attribs.class)!=null&&s.includes("internal-collection")?"internal-collection":t.dataType==="link"?"resource":"external";return Be("element",{...t,type:"link",url:e.attribs.href,linkType:r},Array.from(e.childNodes).map(ft))},Mn="link",Ds=e=>e.tagName==="ul"||e.tagName==="ol"||e.tagName==="li",_1=e=>{var t,r;return(t=e.attribs.class)!=null&&t.includes("variant-a")?{variant:"variant-a"}:(r=e.attribs.class)!=null&&r.includes("variant-b")?{variant:"variant-b"}:{}},xs=e=>{if(e.tagName==="li")return Be("element",{type:"list-item"},[...e.childNodes].map(ft));const t=[...e.children].filter(a=>a.name==="li").map(ft),r=e.tagName==="ol"?"ordered-list":"unordered-list";return Be("element",{...pr(e),..._1(e),type:r},t)},Ln="ordered-list",Gu=e=>{var t;return e.tagName==="section"&&((t=e.attribs.class)==null?void 0:t.includes("social-embed"))},Ku=e=>Be("element",{type:"oembed",url:e.attribs["data-url"]},[]),On="oembed",Qu=e=>{var t;return!!(e.tagName=="figure"&&((t=e.attribs.class)!=null&&t.includes("quote")||e.childNodes.find(r=>r.name==="blockquote")))},Xu=e=>{const t=[],r=e.childNodes.find(s=>s.name==="blockquote"),a=e.childNodes.find(s=>s.name==="figcaption");return r&&(t[0]=Be("element",{type:"blockquote"},r.childNodes.map(ft))),a&&(t[1]=Be("element",{type:"caption"},a.childNodes.map(ft))),Be("element",{...pr(e),type:"quote"},t)},Ga="quote",Ju=e=>{var t;return!!(e.tagName==="figure"&&((t=e.attribs.class)!=null&&t.includes("video")||e.childNodes.find(r=>r.name==="iframe"))||e.tagName==="p"&&e.childNodes.find(r=>r.name==="iframe")||e.tagName==="iframe")},Zu=e=>{const t=e.tagName==="iframe"?e:e.childNodes.find(a=>a.name==="iframe");let r;return t&&(r=t.attribs.src),Be("element",{...pr(e),type:"video",url:r},[Be("element",{type:"caption"},[{text:""}])])},wn="video",v1=e=>{const t=e.attribs["data-type"],r=e.attribs["data-id"],a={};return t&&(a.dataType=t),r&&(a.dataId=r),a},C1=e=>{var r,a;const t=(r=e.attribs.class)!=null&&r.includes("float-left")?"left":(a=e.attribs.class)!=null&&a.includes("float-right")?"right":void 0;return t?{float:t}:{}},pr=e=>({...v1(e),...C1(e)}),Bn={blockquote:()=>({type:"blockquote"}),cite:()=>({type:"cite"}),h3:()=>({type:"heading",level:3}),h4:()=>({type:"heading",level:4}),h5:()=>({type:"heading",level:5}),h6:()=>({type:"heading",level:6}),p:()=>({type:"paragraph"})},Fn={em:()=>({italic:!0}),i:()=>({italic:!0}),strong:()=>({bold:!0}),q:()=>({quote:!0}),span:()=>({})},A1={[Ga]:{type:Ga,deserialize:Xu,canDeserialize:Qu},[Mn]:{type:Mn,deserialize:qu,canDeserialize:zu},[Pn]:{type:Pn,deserialize:Wu,canDeserialize:$u},[wn]:{type:wn,deserialize:Zu,canDeserialize:Ju},[On]:{type:On,deserialize:Ku,canDeserialize:Gu},[Ln]:{type:Ln,deserialize:xs,canDeserialize:Ds}},ft=e=>{if(!e)return;if(e.nodeType===3)return e.data.trim();if(e.nodeType!==1)return null;if(e.name==="br")return`
`;const t=e;for(const s of Object.values(A1))if(s.canDeserialize(t))return s.deserialize(t);const{tagName:r}=t,a=Array.from(t.childNodes).map(ft).flat().filter(s=>s);if(r==="body"){const s=a.map(n=>n.type?n:n.text?Be("element",{type:"paragraph"},n):void 0).filter(n=>n);return Be("fragment",{},s)}if(Bn[r]){const s=Bn[r](t);return Be("element",s,a!=null&&a.length?a:[{text:""}])}if(Fn[r]){const s=Fn[r](t);return a.map(n=>ie.isElement(n)?(n.children.forEach(i=>nr.isText(i)?{...i,...s}:i),n):Be("text",s,n))}return a},y1=e=>{const r=Ou(e,{treeAdapter:Ft}).firstChild.lastChild;return ft(r)},N1=({attributes:e,element:t,children:r})=>{const a=ht(),s=gt();if(t.type!=="quote")return l.jsx(l.Fragment,{});const{float:n}=t,i=n?`float-${n}`:void 0,u=o=>{K.setNodes(s,{showSocialShare:o},{at:[],match:d=>d===t})};return l.jsxs("figure",{...e,className:Ue("quote",i,{selected:a}),children:[r,a&&l.jsx(U,{contentEditable:!1,sx:{position:"absolute"},children:l.jsx(La,{control:l.jsx(Oa,{checked:!!t.showSocialShare,onChange:(o,d)=>u(d),size:"small"}),componentsProps:{typography:{variant:"caption"}},label:"Show social share panel"})})]})},I1=(e,t)=>{if(e.type!=="quote")return"";const{float:r}=e,a=r?`float-${r}`:"";return`<figure class="${Ue("quote",a)}">${t}</figure>`};var Rs={},D1=Re;Object.defineProperty(Rs,"__esModule",{value:!0});var eo=Rs.default=void 0,x1=D1(Se()),R1=l;eo=Rs.default=(0,x1.default)((0,R1.jsx)("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"}),"FormatQuote");const Hn=["ordered-list","unordered-list"],to=(e,t)=>{if(!t)return!0;for(const[r,a]of Object.entries(t))if(e[r]!==a)return!1;for(const[r,a]of Object.entries(e))if(!(r==="type"||r==="children")&&t[r]!==a)return!1;return!0},St=(e,t,r)=>{const[a]=ce.nodes(e,{match:s=>!ce.isEditor(s)&&ie.isElement(s)&&s.type===t&&to(s,r)});return!!a},S1=(e,t,r)=>{const[a]=ce.nodes(e,{match:s=>!ce.isEditor(s)&&ie.isElement(s)&&t.includes(s.type)&&to(s,r)});return!!a},k1=(e,t,r,a)=>{const s=St(e,t),n=St(e,t,r);if(n&&a){a(e);return}if(!s){const[...i]=ce.nodes(e,{match:u=>ie.isElement(u)&&u.type==="paragraph"});if(!i.length)return}ce.withoutNormalizing(e,()=>{const i=Hn.includes(t);K.unwrapNodes(e,{match:u=>!ce.isEditor(u)&&ie.isElement(u)&&Hn.includes(u.type),split:!0}),r?s?n?i?K.wrapNodes(e,{type:t,children:[]}):(K.unsetNodes(e,Object.keys(r)),K.setNodes(e,{type:"paragraph"})):i?(K.setNodes(e,{type:"list-item"}),K.wrapNodes(e,{...r,type:t,children:[]})):K.setNodes(e,{...r,type:t}):i?(K.setNodes(e,{type:"list-item"}),K.wrapNodes(e,{...r,type:t,children:[]})):K.setNodes(e,{...r,type:t}):s?K.setNodes(e,{type:"paragraph"}):i?(K.setNodes(e,{type:"list-item"}),K.wrapNodes(e,{type:t,children:[]})):K.setNodes(e,{type:t})})},Ke=({format:e,removeBlockFunction:t,attributes:r,tooltip:a,children:s})=>{const n=gt(),i=St(n,e,r),u=St(n,e),o=St(n,"paragraph"),d=l.jsx(Me,{color:i?"primary":void 0,sx:{borderRadius:"0.1em",backgroundColor:i?"action.selected":void 0},disabled:!o&&!u,onMouseDown:f=>{f.preventDefault(),f.stopPropagation(),k1(n,e,r,t)},size:"small",children:s});return a?l.jsx(os,{title:a,placement:"top",children:l.jsx("span",{children:d})}):d},P1=()=>{const e=E.useCallback(t=>{ce.withoutNormalizing(t,()=>{const r=t.selection.anchor.path.slice(0,1);K.removeNodes(t,{match:a=>!ce.isEditor(a)&&ie.isElement(a)&&a.type==="caption",mode:"highest",at:[...r,1]}),K.unwrapNodes(t,{match:a=>!ce.isEditor(a)&&ie.isElement(a)&&(a.type==="blockquote"||a.type==="quote"),mode:"all",at:r})})},[]);return l.jsx(Ke,{format:"quote",removeBlockFunction:e,children:l.jsx(eo,{})})},M1=e=>{const{normalizeNode:t,isInline:r}=e;return e.normalizeNode=a=>{const[s,n]=a;if(ie.isElement(s)&&s.type==="quote"){s.children.length<1&&K.insertNodes(e,{type:"blockquote",children:[{type:"paragraph",children:[{text:"Quote"}]}]},{at:n.concat(0)}),s.children.length<2&&K.insertNodes(e,{type:"caption",children:[{text:""}]},{at:n.concat(1)}),s.children.length>2,s.children[0].type!=="blockquote"&&K.wrapNodes(e,{type:"blockquote",children:[]},{at:n.concat(0)});return}if(ie.isElement(s)&&s.type==="blockquote"){for(const[i,u]of Je.children(e,n))(!ie.isElement(i)||i.type!=="paragraph")&&K.wrapNodes(e,{type:"paragraph",children:[]},{at:u});return}t(a)},e.isInline=a=>a.type==="cite"?!0:r(a),e},Ka={type:Ga,serialize:I1,deserialize:Xu,canDeserialize:Qu,Render:N1,ToolbarButton:P1,withEditor:M1},Ss="footnote",ks="footnote-anchor",L1=({attributes:e,element:t,children:r})=>{const a=ht(),s=gt();if(t.type!==Ss)return l.jsx(l.Fragment,{});const{uuid:n}=t,i=s.footnoteOrder(n);return l.jsxs("div",{...e,className:Ue({selected:a}),"data-footnote-order":`[${i>0?i:"_"}]`,children:[l.jsxs(U,{contentEditable:!1,sx:{float:"left",pr:1},children:["[",i>0?i:"_","]"]}),r]})},O1=({attributes:e,element:t,children:r})=>{const a=ht(),s=gt();if(t.type!==ks)return l.jsx(l.Fragment,{});const{ref:n}=t,i=s.footnoteOrder(n);return l.jsxs("a",{...e,href:`#footnote_${n}`,className:Ue("footnote-anchor",{selected:a}),children:["[",i,"]",r]})};var Ps={},w1=Re;Object.defineProperty(Ps,"__esModule",{value:!0});var ro=Ps.default=void 0,B1=w1(Se()),F1=l;ro=Ps.default=(0,B1.default)((0,F1.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark");var Ms={},H1=Re;Object.defineProperty(Ms,"__esModule",{value:!0});var ao=Ms.default=void 0,j1=H1(Se()),U1=l;ao=Ms.default=(0,j1.default)((0,U1.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help");const Y1=({open:e,title:t,text:r,label:a,children:s,onClose:n})=>l.jsxs($t,{open:e,onClose:n,children:[l.jsx(Zr,{children:t}),l.jsxs(cr,{children:[l.jsx(Ai,{children:r}),s]}),l.jsx(lr,{children:l.jsx(Ae,{onClick:n,autoFocus:!0,children:a??"Ok"})})]}),so=()=>{const e=gt(),[t,r]=E.useState(null),[a,s]=E.useState(null),[n,i]=E.useState(!1),[u,o]=E.useState(!1),[d,f]=E.useState(!1),[h,m]=E.useState(e.selection),[p,T]=E.useState([]),C=()=>{r(null),e.insertFootnote(h||void 0)},v=N=>{K.insertNodes(e,[{type:"footnote-anchor",ref:N,children:[{text:""}]}],{at:h||void 0}),r(null),s(null)},A=()=>{T(e.footnotes().map(([N])=>({uuid:N.uuid,text:Je.string(N).substr(0,50)})))};E.useEffect(()=>{di.isFocused(e)&&(m(e.selection),o(St(e,Ss)),f(St(e,ks)))},[e,e.selection]);const y=u||d;return l.jsxs(l.Fragment,{children:[l.jsx(Me,{color:y?"primary":void 0,sx:{borderRadius:"0.1em",backgroundColor:y?"action.selected":void 0},disabled:u,onMouseDown:N=>{N.preventDefault(),N.stopPropagation(),r(N.currentTarget)},size:"small",children:l.jsx(ro,{})}),l.jsxs(Pr,{anchorEl:t,keepMounted:!0,open:!!t,onClose:()=>{r(null),s(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:[l.jsxs(qe,{onClick:()=>i(!0),children:[l.jsx(xr,{children:l.jsx(ao,{})}),l.jsx(ha,{children:"Footnotes help"})]}),l.jsx(si,{}),l.jsxs(qe,{onClick:N=>{N.stopPropagation(),C()},children:[l.jsx(xr,{children:l.jsx(Bc,{})}),l.jsx(ha,{children:"Insert new footnote"})]}),l.jsxs(qe,{onClick:N=>{N.stopPropagation(),A(),s(N.currentTarget)},children:[l.jsx(xr,{children:l.jsx(lc,{})}),l.jsx(ha,{children:"Reference existing footnote"})]})]}),l.jsx(Pr,{anchorEl:a,open:!!a,onClose:()=>{r(null),s(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:p.map(({uuid:N,text:D})=>l.jsx(qe,{onClick:()=>v(N),children:D},N))}),l.jsxs(Y1,{open:n,onClose:()=>i(!1),title:"Footnotes",children:["The footnotes will be placed at the bottom of the content and will be automatically placed in the order of appearance in the content above, i.e. the order they appear here in the editor is not the right order per se. ",l.jsx("br",{}),"It is possible that a footnote is referenced multiple times, in the reference they will then get the same number. If a footnote is not referenced, it will be placed last with [_] in front. Note that it is possible to insert a reference to it, placing it back in the normal order.",l.jsx("br",{}),"When a footnote is removed, its reference in the text is removed as well."]})]})};function V1(e,t,r,a){for(var s=e.length,n=r+(a?1:-1);a?n--:++n<s;)if(t(e[n],n,e))return n;return-1}var $1=V1;function W1(e){return e!==e}var z1=W1;function q1(e,t,r){for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}var G1=q1,K1=$1,Q1=z1,X1=G1;function J1(e,t,r){return t===t?X1(e,t,r):K1(e,Q1,r)}var Z1=J1,em=Z1;function tm(e,t){var r=e==null?0:e.length;return!!r&&em(e,t,0)>-1}var rm=tm;function am(e,t,r){for(var a=-1,s=e==null?0:e.length;++a<s;)if(r(t,e[a]))return!0;return!1}var sm=am;function nm(){}var im=nm,Ia=kc,um=im,om=fi,cm=1/0,lm=Ia&&1/om(new Ia([,-0]))[1]==cm?function(e){return new Ia(e)}:um,dm=lm,fm=Pc,hm=rm,mm=sm,pm=Mc,Em=dm,bm=fi,Tm=200;function gm(e,t,r){var a=-1,s=hm,n=e.length,i=!0,u=[],o=u;if(r)i=!1,s=mm;else if(n>=Tm){var d=t?null:Em(e);if(d)return bm(d);i=!1,s=pm,o=new fm}else o=t?[]:u;e:for(;++a<n;){var f=e[a],h=t?t(f):f;if(f=r||f!==0?f:0,i&&h===h){for(var m=o.length;m--;)if(o[m]===h)continue e;t&&o.push(h),u.push(f)}else s(o,h,r)||(o!==u&&o.push(h),u.push(f))}return u}var _m=gm,vm=Lc,Cm=_m;function Am(e,t){return e&&e.length?Cm(e,vm(t)):[]}var ym=Am;const Nm=or(ym);let yr;const Im=new Uint8Array(16);function Dm(){if(!yr&&(yr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yr(Im)}const Oe=[];for(let e=0;e<256;++e)Oe.push((e+256).toString(16).slice(1));function xm(e,t=0){return Oe[e[t+0]]+Oe[e[t+1]]+Oe[e[t+2]]+Oe[e[t+3]]+"-"+Oe[e[t+4]]+Oe[e[t+5]]+"-"+Oe[e[t+6]]+Oe[e[t+7]]+"-"+Oe[e[t+8]]+Oe[e[t+9]]+"-"+Oe[e[t+10]]+Oe[e[t+11]]+Oe[e[t+12]]+Oe[e[t+13]]+Oe[e[t+14]]+Oe[e[t+15]]}const Rm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jn={randomUUID:Rm};function Sm(e,t,r){if(jn.randomUUID&&!t&&!e)return jn.randomUUID();e=e||{};const a=e.random||(e.rng||Dm)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,xm(a)}const km=e=>{const{isInline:t,isVoid:r,normalizeNode:a}=e;return e.isInline=s=>s.type==="footnote-anchor"?!0:t(s),e.isVoid=s=>s.type==="footnote-anchor"?!0:r(s),e.normalizeNode=s=>{const[n,i]=s;if(ie.isElement(n)&&n.type==="footnote")for(const[o,d]of Je.children(e,i))ie.isElement(o)||K.wrapNodes(e,{type:"paragraph",children:[]},{at:d}),ie.isElement(o)&&o.type!=="paragraph"&&(K.unwrapNodes(e,{at:d}),K.wrapNodes(e,{type:"paragraph",children:[]},{at:d}));const u=e.footnotes().map(([{uuid:o}])=>o);K.removeNodes(e,{at:i,match:o=>ie.isElement(o)&&o.type==="footnote-anchor"&&!u.includes(o.ref)}),a(s)},e.footnoteOrder=s=>{let[...n]=ce.nodes(e,{at:[],match:u=>ie.isElement(u)&&u.type==="footnote-anchor"});n=Nm(n,([{ref:u}])=>u);const i=n.findIndex(([{ref:u}])=>u===s)+1;return i||-1},e.footnotes=()=>{const[...s]=ce.nodes(e,{at:[],match:n=>ie.isElement(n)&&n.type==="footnote"});return s},e.insertFootnote=s=>{ce.withoutNormalizing(e,()=>{const n=Sm();K.insertNodes(e,[{type:"footnote-anchor",ref:n,children:[{text:""}]}],{at:s}),K.insertNodes(e,[{type:"footnote",uuid:n,children:[{type:"paragraph",children:[{text:"A footnote"}]}]}],{at:[e.children.length]})})},e},Qa={type:Ss,serialize:()=>"",deserialize:()=>{},canDeserialize:()=>!1,Render:L1,ToolbarButton:so,withEditor:km},Un={type:ks,serialize:()=>"",deserialize:()=>{},canDeserialize:()=>!1,Render:O1,ToolbarButton:so,withEditor:e=>e},Pm=({attributes:e,element:t,children:r})=>{if(t.type!=="link")return l.jsx(l.Fragment,{});const{url:a,linkType:s}=t;return l.jsx("a",{href:a,onClick:()=>{console.log("ToDo preview")},className:s,...e,children:r})},Ls=e=>{if(!(e.type==="image"||e.type==="video"||e.type==="link"))return"";const{dataType:t,dataId:r}=e;let a="";return t&&r&&(a+=` data-type="${t}" data-id="${r}"`),a},Mm=(e,t)=>{if(e.type!=="link")return"";const{url:r,linkType:a}=e,s=a?` class="${a}"`:"",n=a!=="internal-item"&&a!=="internal-collection"?' rel="noopener"':"";return`<a href="${r}"${s}${Ls(e)}${n}>${t}</a>`};var Os={},Lm=Re;Object.defineProperty(Os,"__esModule",{value:!0});var no=Os.default=void 0,Om=Lm(Se()),wm=l;no=Os.default=(0,Om.default)((0,wm.jsx)("path",{d:"M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4m5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20z"}),"FindReplace");const Bm=e=>{const[t,r]=E.useState(),a=E.useCallback(()=>{e&&pi.get(Jr("admin.resourceitems.show",{id:e})).then(n=>{console.log(n),r(n.data)}).catch(n=>{console.error(n)})},[e]);return E.useEffect(()=>{a()},[a]),[t,a]},Yn=(e,t)=>{const[r]=ce.nodes(e,{match:a=>!ce.isEditor(a)&&ie.isElement(a)&&a.type===t});return!!r},Fm=(e,t)=>{const[r]=ce.nodes(e,{match:a=>!ce.isEditor(a)&&ie.isElement(a)&&a.type===t});return r},qt=({icon:e,elementType:t,pickerMenu:r,EditPane:a,itemToElementMappers:s})=>{const n=gt(),[i,u]=E.useState(!1),[o,d]=E.useState(!1),[f,h]=E.useState(),[m,p]=E.useState(),[T]=Bm(m),[C,v]=E.useState(),[A,y]=E.useState(),[N,D]=E.useState(n.selection);E.useEffect(()=>{di.isFocused(n)&&(D(n.selection),d(Yn(n,t.type)))},[n,n.selection,t.type]);const P=()=>{if(!Yn(n,t.type)){y(void 0),u(!0);return}const[F]=Fm(n,t.type),O=F&&ie.isElement(F)?F:void 0;(O==null?void 0:O.type)==="image"&&O.dataId&&(!f||f.id!==Number(O.dataId))&&(p(Number(O.dataId)),h(void 0)),((O==null?void 0:O.type)==="link"||(O==null?void 0:O.type)==="oembed"||(O==null?void 0:O.type)==="iframe")&&y(O),u(!0)};E.useEffect(()=>{h(T)},[T]);const R=()=>{p(void 0),u(!1)},M=()=>{p(void 0),C&&w(C),u(!1)},w=F=>{if(console.log("setting item",o,N,F),o&&N){const[O]=ce.nodes(n,{match:H=>!ce.isEditor(H)&&ie.isElement(H)&&H.type===F.type,at:N}),[,z]=O;K.setNodes(n,F,{at:z})}else{const O=N&&Dr.isCollapsed(N);!N||O?K.insertNodes(n,[F],{at:N||void 0}):K.wrapNodes(n,F,{at:N,split:!0})}},B=(F,O)=>{if(O&&s&&s[O]){const z=s[O](F);if(z){w(z);return}}h(F),u(!0)},Y=E.useCallback(F=>{v(F)},[]);return l.jsxs(l.Fragment,{children:[o||!(r!=null&&r.length)?l.jsx(Me,{color:o?"primary":void 0,size:"small",sx:{borderRadius:"0.1em",backgroundColor:o?"action.selected":void 0},onMouseDown:F=>{F.preventDefault(),P()},children:e}):l.jsx(Ur,{menu:r,buttonIcon:e,onPick:B,buttonProps:{color:void 0,sx:{borderRadius:"0.1em"}}}),i&&l.jsxs($t,{open:!!i,onClose:R,maxWidth:!1,children:[l.jsxs(Zr,{children:[o?"Modify":"Insert"," ",t.type]}),l.jsxs(cr,{children:[r!=null&&r.length?l.jsx(U,{display:"flex",children:l.jsx(Ur,{menu:r,onPick:B,label:`Replace with another ${t.type}`,buttonIcon:l.jsx(no,{}),buttonProps:{size:"medium"}})}):l.jsx(l.Fragment,{}),f!=null&&f.id&&a?l.jsx(a,{item:f,elementIn:void 0,onChange:Y}):!(f!=null&&f.id)&&A&&a?l.jsx(a,{elementIn:A,item:void 0,onChange:Y}):r!=null&&r.length?l.jsx(l.Fragment,{}):l.jsx(a,{elementIn:void 0,item:void 0,onChange:Y})]}),l.jsxs(lr,{children:[o&&!1,l.jsx(Ae,{onClick:R,children:"Cancel"}),l.jsx(Ae,{onClick:M,color:"primary",children:o?"Update":"Insert"})]})]})]})},Hm=({elementIn:e,onChange:t})=>{const[r,a]=E.useState({}),[s,n]=E.useState(!1),[i,u]=E.useState("");return E.useEffect(()=>{console.log("elementIncoming",e),e&&a(o=>({...o,dataId:e.dataId,dataType:e.dataType,url:e.url,linkType:e.linkType}))},[e]),E.useEffect(()=>{n(r.linkType==="external"),u(r.linkType==="external"?"Link (without resource)":r.linkType==="resource"?"Link resource":"Internal link")},[r]),E.useEffect(()=>{t({...r,type:"link",children:(e==null?void 0:e.children)||[{text:""}]})},[r,t,e]),l.jsx(l.Fragment,{children:l.jsx(U,{children:l.jsx(U,{display:"flex",flexDirection:"column",width:400,children:e?l.jsxs(l.Fragment,{children:[l.jsx(re,{variant:"subtitle1",children:i}),s?l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"URL",value:r.url||"",placeholder:"http:// or https:// required",onChange:o=>a(d=>({...d,url:o.target.value})),InputLabelProps:{shrink:!0}}):r.linkType==="resource"?l.jsxs(U,{display:"flex",justifyContent:"space-between",children:[l.jsx(os,{title:r.url||!1,children:l.jsx("div",{children:l.jsx(Ae,{variant:"text",endIcon:l.jsx(as,{}),disabled:!r.url,fullWidth:!1,component:li,target:"_blank",href:r.url,rel:"noopener noreferrer",children:"Preview"})})}),r.dataId&&!1]}):l.jsx(l.Fragment,{})]}):l.jsx(re,{variant:"subtitle1",children:"Invalid link"})})})})},jm=()=>{const e=Xr(),t=[y0,tu,kt,I0,kt,N0];return l.jsx(qt,{elementType:$r,icon:l.jsx(ss,{}),pickerMenu:t,EditPane:Hm,itemToElementMappers:{"link.dummy":r=>{const a=Et(r,e);if(a!=null&&a.links.length)return{type:"link",url:a==null?void 0:a.links[0].url,children:[{text:a==null?void 0:a.title}],linkType:"external"}},"contentitem.browse":r=>{const a=Et(r,e);return{type:"link",url:`/${e||"en"}/item/${r.id}:${(a==null?void 0:a.slug)||"_"}`,linkType:"internal-item",dataId:`${r.id}`,dataType:"link-internal",children:[{text:a==null?void 0:a.title}]}},link:r=>{const a=Et(r,e);if(a!=null&&a.links.length)return{type:"link",url:a==null?void 0:a.links[0].url,dataId:`${r.id}`,dataType:"link",linkType:"resource",children:[{text:a==null?void 0:a.title}]}},"link.browse":r=>{const a=Et(r,e);if(a!=null&&a.links.length)return{type:"link",url:a==null?void 0:a.links[0].url,dataId:`${r.id}`,dataType:"link",linkType:"resource",children:[{text:a==null?void 0:a.title}]}}}})},Um=e=>{const{isInline:t}=e;return e.isInline=r=>r.type==="link"?!0:t(r),e},$r={type:"link",serialize:Mm,deserialize:qu,canDeserialize:zu,Render:Pm,ToolbarButton:jm,withEditor:Um},io=({attributes:e,element:t,children:r})=>{const a=ht();if(t.type!=="ordered-list"&&t.type!=="unordered-list")return l.jsx(l.Fragment,{});const{variant:s}=t,n={...e,"data-slate-type":`${t.type} ${s||" normal"}`};return t.type==="ordered-list"?l.jsx("ol",{...n,className:Ue(t.type,t.variant,{selected:a}),children:r}):l.jsx("ul",{...n,className:Ue(t.type,t.variant,{selected:a}),children:r})},uo=(e,t)=>{if(e.type==="list-item")return`<li>${t}</li>`;if(e.type!=="ordered-list"&&e.type!=="unordered-list")return"";const{variant:r}=e,a=e.type==="ordered-list"?"ol":"ul";return`<${a}${r?` class="${r}"`:""}>${t}</${a}>`},ws=({formats:e,baseButton:t,children:r})=>{const a=gt(),s=S1(a,e);return l.jsx(l.Fragment,{children:l.jsxs(U,{display:"flex",flexWrap:"nowrap",children:[t,l.jsx(U,{sx:{backgroundColor:"background.paper",boxSizing:"border-box",position:"relative",maxWidth:s?150:0,borderRight:s?"1px solid transparent":void 0,borderRightColor:"divider",overflow:"hidden",display:"flex",alignItems:"center",flexWrap:"nowrap",transition:"all 0.2s linear"},children:r})]})})},Ym=()=>l.jsxs(ws,{formats:["ordered-list"],baseButton:l.jsx(Ke,{format:"ordered-list",children:l.jsx(vc,{})}),children:[l.jsx(Ke,{tooltip:"Default",format:"ordered-list",attributes:{},children:"O"})," ",l.jsx(Ke,{tooltip:"Variant A",format:"ordered-list",attributes:{variant:"variant-a"},children:"A"})," ",l.jsx(Ke,{tooltip:"Variant B",format:"ordered-list",attributes:{variant:"variant-b"},children:"B"})]}),Vm=()=>l.jsxs(ws,{formats:["unordered-list"],baseButton:l.jsx(Ke,{format:"unordered-list",children:l.jsx(Cc,{})}),children:[l.jsx(Ke,{tooltip:"Default",format:"unordered-list",attributes:{},children:"O"}),l.jsx(Ke,{tooltip:"Variant A",format:"unordered-list",attributes:{variant:"variant-a"},children:"A"}),l.jsx(Ke,{tooltip:"Variant B",format:"unordered-list",attributes:{variant:"variant-b"},children:"B"})]}),oo=e=>e,Xa={type:"ordered-list",serialize:uo,deserialize:xs,canDeserialize:Ds,Render:io,ToolbarButton:Ym,withEditor:oo},Ja={type:"unordered-list",serialize:uo,deserialize:xs,canDeserialize:Ds,Render:io,ToolbarButton:Vm,withEditor:oo},$m=({attributes:e,element:t,children:r})=>{const a=ht();if(t.type!=="image")return l.jsx(l.Fragment,{});const{url:s,float:n}=t,i=n?`float-${n}`:void 0;return l.jsxs("figure",{...e,className:Ue("image",i,{selected:a}),children:[l.jsx("img",{src:s??"https://picsum.photos/300/150"}),r]})},Wm=(e,t)=>{if(e.type!=="image")return"";const{url:r,float:a}=e,s=a?`float-${a}`:void 0,n=t,i=e.children.map(u=>nr.isText(u)?u.text:"").join(" ");return`<figure class="${Ue("image",s)}"${Ls(e)}><img src="${r}" alt="${i||""}" />${n||""}</figure>`};var Bs={},zm=Re;Object.defineProperty(Bs,"__esModule",{value:!0});var co=Bs.default=void 0,qm=zm(Se()),Gm=l;co=Bs.default=(0,qm.default)((0,Gm.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"InsertPhoto");const Km=({value:e="",onChange:t})=>l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!1,children:[l.jsx(at,{children:"Float"}),l.jsx(xt,{value:e,onChange:r=>t(r.target.value),label:"Float",fullWidth:!0,children:Object.entries(dc).map(([r,a],s)=>l.jsx(qe,{value:r,children:a},s))}),l.jsx(ut,{})]}),Qm=({item:e,onChange:t})=>{const[r,a]=E.useState(),[s,n]=E.useState(),[i,u]=E.useState("full"),[o,d]=E.useState(),[f,h]=E.useState({dataType:"image"}),m=Xr(),p=Ki(o);return E.useEffect(()=>{if(!e)return;const T=Et(e,m||"*");if(!T){a("No image content found, this is an error");return}const C=T.images[0];if(!C){a("No image details found, this is an error");return}a(void 0),d(C),n(T.subtitle),h(v=>({...v,dataType:"image",dataId:String(e.id)}))},[e,m]),E.useEffect(()=>{h(T=>({...T,url:p}))},[p]),E.useEffect(()=>{h(T=>({...T,float:i}))},[i]),E.useEffect(()=>{t({...f,type:"image",children:[{type:"caption",children:[{text:s||""}]}]})},[f,s,t]),l.jsx(l.Fragment,{children:l.jsxs(U,{children:[r&&l.jsx(re,{color:"error",children:r}),l.jsxs(U,{display:"flex",flexDirection:"column",children:[l.jsx("img",{src:f.url,style:{maxWidth:200,maxHeight:200}}),l.jsx(Km,{value:i,onChange:u})]})]})})},Xm=()=>l.jsx(qt,{elementType:Wr,icon:l.jsx(co,{}),pickerMenu:Ua,EditPane:Qm}),Jm=e=>e,Wr={type:"image",serialize:Wm,deserialize:Wu,canDeserialize:$u,Render:$m,ToolbarButton:Xm,withEditor:Jm},Zm=({attributes:e,element:t,children:r})=>{const a=ht();if(t.type!=="video")return l.jsx(l.Fragment,{});const{url:s}=t;return l.jsxs("figure",{...e,className:Ue("video",{selected:a}),children:[l.jsx("iframe",{src:s}),r]})},ep=e=>{if(e.type!=="video")return"";const{url:t,float:r}=e,a=r?`float-${r}`:void 0;return`<figure class="${Ue("video",a)}"${Ls(e)}><iframe src="${t}" allow="fullscreen; picture-in-picture" allowfullscreen="true"></iframe></figure>`},tp=({item:e,onChange:t})=>{const[r,a]=E.useState(),[s,n]=E.useState(),[i,u]=E.useState(),[o,d]=E.useState({dataType:"video"}),f=Xr();return E.useEffect(()=>{if(!e)return;const h=Et(e,f||"*");if(!h){u("No video content found, this is an error");return}const m=h.videos[0];if(!m){u("No video details found, this is an error");return}u(void 0),a(m.provider),n(m.provider_id),d(p=>({...p,dataId:String(e.id)}))},[e,f]),E.useEffect(()=>{switch(r){case"youtube":d(h=>({...h,url:`https://www.youtube.com/embed/${s}`}));break;case"vimeo":d(h=>({...h,url:`https://player.vimeo.com/video/${s}`}));break}},[r,s]),E.useEffect(()=>{t({...o,type:"video",children:[{type:"caption",children:[{text:""}]}]})},[o,t]),l.jsx(l.Fragment,{children:l.jsxs(U,{children:[i&&l.jsx(re,{color:"error",children:i}),l.jsx(U,{children:l.jsx("iframe",{src:o.url,style:{maxWidth:200,maxHeight:200}})}),r," ",s]})})},rp=()=>l.jsx(qt,{elementType:zr,icon:l.jsx(ii,{}),pickerMenu:A0,EditPane:tp}),ap=e=>{const{isVoid:t}=e;return e.isVoid=r=>r.type==="video"?!1:t(r),e},zr={type:"video",serialize:ep,deserialize:Zu,canDeserialize:Ju,Render:Zm,ToolbarButton:rp,withEditor:ap},sp=({attributes:e,element:t,children:r})=>{if(t.type!=="oembed")return l.jsx(l.Fragment,{});const{url:a}=t;return l.jsxs("section",{...e,className:"selected",children:[l.jsxs("p",{children:["url: ",a]}),r]})},np=e=>{if(e.type!=="oembed")return"";const{url:t}=e;return`<section class="social-embed" data-url="${t}">&nbsp;</section>`},ip=({elementIn:e,onChange:t})=>{const[r,a]=E.useState({});return E.useEffect(()=>{e&&a(s=>({...s,url:e.url}))},[e]),E.useEffect(()=>{t({...r,type:"oembed",children:(e==null?void 0:e.children)||[{text:""}]})},[r,t,e]),l.jsx(l.Fragment,{children:l.jsx(U,{children:l.jsxs(U,{display:"flex",flexDirection:"column",width:400,children:[l.jsx(re,{variant:"subtitle1",children:"Embed social links via OEmbed mechanism"}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"URL",value:r.url||"",helperText:"Full URL, e.g. of a tweet",onChange:s=>a(n=>({...n,url:s.target.value})),InputLabelProps:{shrink:!0}}),l.jsx(Ae,{variant:"text",endIcon:l.jsx(as,{}),disabled:!r.url,fullWidth:!1,component:li,target:"_blank",href:r.url,rel:"noopener noreferrer",children:"Preview"})]})})})},up=()=>l.jsx(qt,{elementType:qr,icon:l.jsx(Uc,{}),pickerMenu:[],EditPane:ip}),op=e=>{const{isVoid:t}=e;return e.isVoid=r=>r.type==="oembed"?!0:t(r),e},qr={type:"oembed",serialize:np,deserialize:Ku,canDeserialize:Gu,Render:sp,ToolbarButton:up,withEditor:op},cp=({attributes:e,element:t,children:r})=>{const a=ht();if(t.type!=="map")return l.jsx(l.Fragment,{});const{mapId:s}=t;return l.jsxs("figure",{...e,className:Ue("map",{selected:a}),children:[l.jsx("div",{contentEditable:!1,children:s}),r]})},lp=({onChange:e})=>{const[t]=E.useState(),[r]=E.useState(),[a,s]=E.useState(2);return E.useEffect(()=>{e({mapId:a,type:"map",showLegend:"none",children:[{type:"caption",children:[{text:r||""}]}]})},[r,a,e]),l.jsx(l.Fragment,{children:l.jsxs(U,{children:[t&&l.jsx(re,{color:"error",children:t}),l.jsx(U,{display:"flex",flexDirection:"column",children:l.jsx(oe,{value:a,onChange:n=>{Number(n.currentTarget.value)&&s(Number(n.currentTarget.value))}})})]})})},dp=()=>l.jsx(qt,{elementType:Gr,icon:l.jsx(fc,{}),EditPane:lp}),fp=e=>e,Gr={type:"map",serialize:()=>"",deserialize:()=>null,canDeserialize:()=>!1,Render:cp,ToolbarButton:dp,withEditor:fp},hp=({attributes:e,element:t,children:r})=>{if(t.type!=="iframe")return l.jsx(l.Fragment,{});const{url:a,layout:s}=t;return l.jsxs("section",{...e,className:"selected",children:[l.jsxs("p",{children:["url: ",a,l.jsx("br",{}),"layout: ",s]}),r]})};var Fs={},mp=Re;Object.defineProperty(Fs,"__esModule",{value:!0});var lo=Fs.default=void 0,pp=mp(Se()),Ep=l;lo=Fs.default=(0,pp.default)((0,Ep.jsx)("path",{d:"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2m0 14H5V8h14z"}),"WebAsset");const bp=({value:e="",onChange:t})=>l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!1,children:[l.jsx(at,{children:"Layout"}),l.jsx(xt,{value:e,onChange:r=>t(r.target.value),label:"Layout",fullWidth:!0,children:Object.entries(hc).map(([r,a],s)=>l.jsx(qe,{value:r,children:a},s))}),l.jsx(ut,{})]}),Tp=({elementIn:e,onChange:t})=>{const[r,a]=E.useState({});return E.useEffect(()=>{e&&a(s=>({...s,url:e.url,height:e.height,layout:e.layout}))},[e]),E.useEffect(()=>{t({...r,type:"iframe",children:(e==null?void 0:e.children)||[{text:""}]})},[r,t,e]),l.jsx(l.Fragment,{children:l.jsx(U,{children:l.jsxs(U,{display:"flex",flexDirection:"column",width:400,children:[l.jsx(re,{variant:"subtitle1",children:"Embed IFrames by URL"}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"URL",value:r.url||"",helperText:"Full URL including https://",onChange:s=>a(n=>({...n,url:s.target.value})),InputLabelProps:{shrink:!0}}),l.jsx(oe,{fullWidth:!0,variant:"outlined",label:"Height",value:r.height||300,type:"number",helperText:"",onChange:s=>a(n=>({...n,height:parseInt(s.target.value)})),InputLabelProps:{shrink:!0}}),l.jsx(bp,{value:r.layout||"full",onChange:s=>a(n=>({...n,layout:s}))})]})})})},gp=()=>l.jsx(qt,{elementType:Kr,icon:l.jsx(lo,{}),pickerMenu:[],EditPane:Tp}),_p=e=>{const{isVoid:t,normalizeNode:r}=e;return e.isVoid=a=>a.type==="iframe"?!0:t(a),e.normalizeNode=a=>{const[s,n]=a;if(ie.isElement(s)&&s.type==="iframe"&&!et.isParent([],n)){K.liftNodes(e,{at:n,mode:"highest"});return}r(a)},e},Kr={type:"iframe",serialize:()=>"",deserialize:()=>{},canDeserialize:()=>!1,Render:hp,ToolbarButton:gp,withEditor:_p},fo=()=>({[Ka.type]:Ka,[$r.type]:$r,[Wr.type]:Wr,[zr.type]:zr,[qr.type]:qr,[Xa.type]:Xa,[Ja.type]:Ja,[Qa.type]:Qa,[Un.type]:Un,[Kr.type]:Kr,[Gr.type]:Gr}),vp=e=>{const t=fo();for(const r of Object.values(t))e=r.withEditor?r.withEditor(e):e;return e},Da=fo(),Cp=({element:e,attributes:t,children:r})=>{const s=ht()?"selected":"",n={...t,className:s,"data-slate-type":e.type};switch(e.type){case"blockquote":case"cite":return l.jsx(e.type,{...n,children:r});case"caption":return e.children.find(i=>nr.isText(i)&&i.text)||(n.className+=" empty"),l.jsx("figcaption",{...n,children:r});case"heading":switch(e.level){case 3:return l.jsx("h3",{...n,"data-slate-type":"heading-3",children:r});case 4:return l.jsx("h4",{...n,"data-slate-type":"heading-4",children:r});case 5:return l.jsx("h5",{...n,"data-slate-type":"heading-5",children:r});case 6:return l.jsx("h6",{...n,"data-slate-type":"heading-6",children:r})}break;case"list-item":return l.jsx("li",{...n,children:r});case"ordered-list":return e.variant&&(n.className+=" "+e.variant),l.jsx("ol",{...n,children:r});case"unordered-list":return l.jsx("ul",{...n,children:r});default:return l.jsx("p",{...n,children:r})}return l.jsx("p",{...n,children:r})},Ap=e=>{const{element:t}=e,a=ht()?"selected":void 0,s={...e.attributes,className:a,"data-slate-type":t.type};if(Da[t.type]&&Da[t.type].Render){const n=Da[t.type].Render;return l.jsx(n,{...e,attributes:s})}else return l.jsx(Cp,{...e,attributes:s})},yp=e=>{let{children:t}=e;const{attributes:r,leaf:a}=e;return a.bold&&(t=l.jsx("strong",{children:t})),a.italic&&(t=l.jsx("em",{children:t})),a.quote&&(t=l.jsx("q",{children:t})),l.jsx("span",{...r,children:t})};var Hs={},Np=Re;Object.defineProperty(Hs,"__esModule",{value:!0});var ho=Hs.default=void 0,Ip=Np(Se()),Dp=l;ho=Hs.default=(0,Ip.default)((0,Dp.jsx)("path",{d:"M9 4v3h5v12h3V7h5V4zm-6 8h3v7h3v-7h3V9H3z"}),"FormatSize");var js={},xp=Re;Object.defineProperty(js,"__esModule",{value:!0});var mo=js.default=void 0,Rp=xp(Se()),Sp=l;mo=js.default=(0,Rp.default)((0,Sp.jsx)("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen");var Us={},kp=Re;Object.defineProperty(Us,"__esModule",{value:!0});var po=Us.default=void 0,Pp=kp(Se()),Mp=l;po=Us.default=(0,Pp.default)((0,Mp.jsx)("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"}),"FullscreenExit");var Ys={},Lp=Re;Object.defineProperty(Ys,"__esModule",{value:!0});var Eo=Ys.default=void 0,Op=Lp(Se()),wp=l;Eo=Ys.default=(0,Op.default)((0,wp.jsx)("path",{d:"M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15c0 1.11-.9 2-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4c1.1 0 2 .89 2 2z"}),"Looks3");var Vs={},Bp=Re;Object.defineProperty(Vs,"__esModule",{value:!0});var bo=Vs.default=void 0,Fp=Bp(Se()),Hp=l;bo=Vs.default=(0,Fp.default)((0,Hp.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-4 14h-2v-4H9V7h2v4h2V7h2z"}),"Looks4");var $s={},jp=Re;Object.defineProperty($s,"__esModule",{value:!0});var To=$s.default=void 0,Up=jp(Se()),Yp=l;To=$s.default=(0,Up.default)((0,Yp.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2H9v-2h4v-2H9V7h6z"}),"Looks5");var Ws={},Vp=Re;Object.defineProperty(Ws,"__esModule",{value:!0});var go=Ws.default=void 0,$p=Vp(Se()),Wp=l;go=Ws.default=(0,$p.default)((0,Wp.jsx)("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo");var zs={},zp=Re;Object.defineProperty(zs,"__esModule",{value:!0});var _o=zs.default=void 0,qp=zp(Se()),Gp=l;_o=zs.default=(0,qp.default)((0,Gp.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo");const Vn=({undo:e=!1})=>{const t=Ac();return l.jsx(Me,{sx:{borderRadius:"0.1em"},size:"small",onMouseDown:r=>{r.preventDefault(),e?t.undo():t.redo()},children:e?l.jsx(_o,{}):l.jsx(go,{})})},Kp=(e,t)=>{vo(e,t)?ce.removeMark(e,t):ce.addMark(e,t,!0)},vo=(e,t)=>{const r=ce.marks(e);return r?r[t]===!0:!1},Co=({format:e,children:t})=>{const r=gt(),a=vo(r,e);return l.jsx(Me,{color:a?"primary":void 0,sx:{borderRadius:"0.1em",backgroundColor:a?"action.selected":void 0},onMouseDown:s=>{s.preventDefault(),Kp(r,e)},size:"small",children:t})},Qp=()=>l.jsx(Co,{format:"italic",children:l.jsx(yc,{})}),Xp=()=>l.jsx(Co,{format:"bold",children:l.jsx(Nc,{})}),Jp=({mode:e="full",fullscreen:t,setFullscreen:r,sx:a})=>l.jsxs(U,{display:"flex",justifyContent:"space-between",sx:a,children:[l.jsxs(U,{display:"flex",children:[l.jsx(Vn,{undo:!0}),l.jsx(Vn,{redo:!0}),l.jsx(Xp,{}),l.jsx(Qp,{}),l.jsx(Xa.ToolbarButton,{}),l.jsx(Ja.ToolbarButton,{}),l.jsxs(ws,{formats:["heading"],baseButton:l.jsx(Ke,{format:"heading",attributes:{level:3},children:l.jsx(ho,{})}),children:[l.jsx(Ke,{format:"heading",attributes:{level:3},children:l.jsx(Eo,{})}),l.jsx(Ke,{format:"heading",attributes:{level:4},children:l.jsx(bo,{})}),l.jsx(Ke,{format:"heading",attributes:{level:5},children:l.jsx(To,{})})]}),l.jsx($r.ToolbarButton,{}),l.jsx(Ka.ToolbarButton,{}),e==="full"&&l.jsxs(l.Fragment,{children:[l.jsx(Wr.ToolbarButton,{}),l.jsx(zr.ToolbarButton,{}),l.jsx(qr.ToolbarButton,{}),l.jsx(Kr.ToolbarButton,{}),l.jsx(Qa.ToolbarButton,{}),l.jsx(Gr.ToolbarButton,{})]})]}),l.jsx(U,{display:"flex",children:r&&l.jsx(Me,{onClick:()=>r(!t),size:"small",children:t?l.jsx(po,{}):l.jsx(mo,{})})})]}),Zp=e=>{const{insertData:t,normalizeNode:r,insertBreak:a,deleteBackward:s,deleteForward:n}=e;return e.insertData=i=>{const u=i.getData("text/html");if(u){const d=Ou(u,{treeAdapter:Ft}).firstChild.lastChild,f=ft(d);K.insertFragment(e,f);return}t(i)},e.normalizeNode=([i,u])=>{if(ie.isElement(i)){if(i.type,i.type==="list-item"){const o=Je.parent(e,u);(!ie.isElement(o)||o.type!=="ordered-list"&&o.type!=="unordered-list")&&K.unwrapNodes(e,{at:u})}if(i.type==="caption"&&et.hasPrevious(u)){const o=et.previous(u),[d]=ce.node(e,o);if(ie.isElement(d)&&d.type==="caption"){K.setNodes(e,{type:"paragraph"},{at:u}),K.liftNodes(e,{at:u,mode:"highest"});return}}if(ie.isElement(i)){const o=Je.parent(e,u);if(o&&ie.isElement(o)&&ce.isVoid(e,o)){const d=et.parent(u);K.moveNodes(e,{at:u,to:d,mode:"highest",voids:!0});return}}}r([i,u])},e.insertBreak=()=>{if(!e.selection||!Dr.isCollapsed(e.selection))return a();const i=et.parent(e.selection.anchor.path),u=Je.get(e,i);if(ie.isElement(u)&&ce.isVoid(e,u)){if(!et.hasPrevious(i)){K.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:i});return}ce.insertNode(e,{type:"paragraph",children:[{text:""}]});return}a()},e.deleteBackward=i=>{if(!e.selection||!Dr.isCollapsed(e.selection)||e.selection.anchor.offset!==0)return s(i);const u=et.parent(e.selection.anchor.path),o=Je.get(e,u);if(Je.string(o).length===0&&et.hasPrevious(u)){const f=et.previous(u),h=Je.get(e,f);if(ie.isElement(h)&&ce.isVoid(e,h))return K.removeNodes(e)}return s(i)},e.deleteForward=i=>{if(!e.selection||!Dr.isCollapsed(e.selection)||e.selection.anchor.offset!==0)return n(i);const u=et.parent(e.selection.anchor.path),o=Je.get(e,u);if(Je.string(o).length===0){const f=et.next(u),h=Je.get(e,f);if(ie.isElement(h)&&ce.isVoid(e,h))return K.removeNodes(e)}return n(i)},e},eE=V(Ic)(({theme:e})=>({minHeight:"20vh",maxHeight:"60vh",overflowY:"auto",zIndex:10,paddingRight:"calc(100% - 600px)","& .selected":{background:"rgba(200,200,200,0.5)",position:"relative"},"& .selected .selected":{position:"relative"},"& .selected .selected .selected":{position:"relative"},"&  > .selected::before":{content:"attr(data-slate-type)",fontStyle:"italic",fontSize:e.typography.fontSize*.7,lineHeight:1,color:e.palette.text.disabled,position:"absolute",top:"-1.3em",backgroundColor:"rgba(255,255,255,0.5)"},"& a[data-slate-type=link]":{textDecoration:"underline",color:e.palette.primary.main},"& figure":{clear:"both",position:"relative"},"& figure.selected::before":{content:"'Actual embedded content will be shown larger'",fontStyle:"italic",fontSize:e.typography.caption.fontSize,color:e.palette.primary.light,position:"absolute",top:"-1.3em"},"& figure.quote.selected::before":{content:"'quote'"},"& figure img":{maxHeight:100,pointerEvents:"none"},"& figure iframe":{height:100,pointerEvents:"none"},"& figure.float-left":{float:"left",width:"50%"},"& figure.float-right":{float:"right",width:"50%"},"& figcaption.empty":{position:"relative","&::after":{content:"'caption (optional)'",fontStyle:"italic",fontSize:e.typography.fontSize*.7,color:e.palette.primary.light,position:"absolute",top:0}}})),tE=({text:e,json:t,mode:r,onChangeJson:a})=>{const s=Wt(),[n]=E.useState(e),[i]=E.useState(t),[u]=E.useState(JSON.parse(t||"[]")),o=E.useMemo(()=>vp(Zp(Dc(xc(Sc())))),[]),[d,f]=E.useState(),h=tn(d),[m,p]=E.useState([]),[T,C]=E.useState(!1),v=tn(n),A=Gc();E.useEffect(()=>{if(n&&!i){if(n!==v){const N=y1(n||"");f(D=>Tr(D,N)?D:N)}}else if(i){const N=JSON.parse(i);N!=null&&N.length?f(D=>Tr(D,N)?D:N):f([{type:"paragraph",children:[{text:""}]}])}else f([{type:"paragraph",children:[{text:""}]}])},[n,v,i]),E.useEffect(()=>{d&&(Tr(d,h)||(o.children=d.filter(N=>N.type==="paragraph"?!!N.children.find(D=>ie.isElement(D)||nr.isText(D)&&D.text.trim()):!0),o.children.length||(o.children=[{type:"paragraph",children:[{text:""}]}]),o.selection&&K.deselect(o),ce.normalize(o,{force:!0}),p(o.children)))},[d,h,o]);const[,y]=Ci(()=>{if(!Tr(m,u))if(m.length===1&&ie.isElement(m[0])&&m[0].children.length===1&&nr.isText(m[0].children[0])&&m[0].children[0].text==="")a(null);else{const N=JSON.stringify(m);a(N)}},oi,[m]);return E.useEffect(()=>y,[y]),l.jsxs(U,{pl:2,pt:1,pb:2,pr:0,sx:T?{position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:s.zIndex.drawer+10,backgroundColor:"background.paper","& $editarea":{maxHeight:`calc(100% - ${s.spacing(4)})`},"& $toolbar":{position:"relative"}}:{},children:[l.jsx(U,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,border:"1px solid",borderColor:A!=null&&A.focused?"primary.main":"divider",borderRadius:1,pointerEvents:"none","&:hover":{borderColor:"text.primary"},borderWidth:A!=null&&A.focused&&!T?2:void 0,zIndex:A!=null&&A.focused?s.zIndex.appBar+5:void 0}}),l.jsxs(Rc,{editor:o,initialValue:m,onChange:p,children:[l.jsx(Jp,{mode:r,fullscreen:T,setFullscreen:C,sx:{height:s.spacing(4),marginLeft:-2,marginRight:0,marginTop:-.8,paddingRight:2,paddingLeft:2,paddingTop:0,paddingBottom:0,borderColor:"divider",borderStyle:"solid",borderWidth:1,borderTopWidth:0,position:T?"relative":"sticky",top:0,backgroundColor:"background.paper",zIndex:s.zIndex.appBar+1}}),l.jsx(eE,{onFocus:A==null?void 0:A.onFocus,onBlur:A==null?void 0:A.onBlur,renderElement:Ap,renderLeaf:yp})]})]})},Hg=({contents:e,fields:t,htmlFields:r,itemSubtype:a,additionalEditor:s,onChange:n})=>{var A;const[i,u]=E.useState((A=e.at(0))==null?void 0:A.lang),[o,d]=E.useReducer(O0(),e),[f]=hl(t),[h]=E.useState(r),m=Wt(),p=E.useMemo(()=>{const y=new Map;return i&&[...f,...Object.keys(h||[]).map(D=>`${D}_json`)].forEach(D=>y.set(D,P=>{var M;const R=(M=P==null?void 0:P.target)!=null&&M.value?P.target.value:P;d({type:"content_update",field:D,value:R,lang:i})})),y},[f,h,i]),T=E.useCallback((y,N)=>{d({type:"content_update",field:y,value:N,lang:i})},[i]),C=y=>{d({type:"content_add",lang:y,content:o.find(N=>N.lang===i),fields:f}),u(y)},v=y=>{var D;const N=o.filter(P=>P.lang!==y);if(!N.length){console.warn("don't allow remove all");return}i===y&&u((D=N.at(0))==null?void 0:D.lang),d({type:"content_remove",lang:y})};return E.useEffect(()=>{const y=setTimeout(()=>{d({type:"content_reset",contents:e}),u(N=>e.find(D=>D.lang===N)?N:e.length?e[0].lang:void 0)},100);return()=>clearTimeout(y)},[e]),E.useEffect(()=>{n(o)},[n,o]),l.jsxs(us,{sx:{px:2},children:[!(o!=null&&o.length)&&l.jsx(re,{color:"warning",variant:"body1",children:"No contents yet, add a language"}),l.jsxs(ic,{language:i,children:[l.jsx(B0,{onChange:u,onAdd:C,language:i,contents:o,showAdd:!0}),o.map((y,N)=>l.jsxs(F0,{show:y.lang===i,children:[l.jsx(U,{display:"flex",flexDirection:"row-reverse",children:l.jsx(Ha,{label:`Remove this language variant (${i})`,color:"secondary",onConfirm:()=>v(y.lang),icon:l.jsx(Sa,{}),buttonProps:{size:"small",disabled:o.length===1},children:"Removing cannot be undone."})}),l.jsxs(U,{display:"flex",flexDirection:"column",children:[f.map((D,P)=>h&&h[D]?void 0:l.jsx(w0,{label:ja(D),value:y[D]||"",onChange:p.get(D)},P)),s&&l.jsx(l.Fragment,{children:l.jsx(s,{content:y,itemSubtype:a,onChange:T})}),f.map((D,P)=>h&&h[D]?l.jsxs(rt,{variant:"outlined",fullWidth:!0,children:[l.jsx(at,{sx:{backgroundColor:"background.paper",paddingLeft:"5px",marginLeft:"-5px",paddingRight:"5px",marginRight:"-5px",zIndex:m.zIndex.appBar+10},shrink:!0,children:ja(D)}),l.jsx(tE,{text:y[D],json:y[`${D}_json`],mode:h[D],onChangeJson:p.get(`${D}_json`)})]},P):void 0)]})]},N))]})]})},qs=E.createContext(null),jg=({dispatch:e,children:t})=>l.jsx(qs.Provider,{value:e,children:t}),rE=()=>E.useContext(qs),Ug=()=>E.useContext(qs),Ao=()=>{const e=rE();return E.useCallback((r,a)=>{e({type:"patch",field:r,value:a})},[e])},yo=({contents:e})=>l.jsx(de,{container:!0,children:e.map(({title:t,text:r,component:a},s)=>l.jsx(de,{item:!0,xs:4,children:l.jsxs(U,{display:"flex",flexDirection:"column",alignItems:"flex-start",children:[l.jsx(re,{variant:"subtitle2",children:t}),l.jsx(re,{variant:"body2",color:"textSecondary",children:r}),a]})},s))}),aE=({images:e,addImageButton:t,support_color:r})=>{let a=[];return e.length===0?a.push({title:"No images",component:t}):(a=e.slice(0,2).map(s=>{var n;return{title:ja(((n=s.subtype)==null?void 0:n.replace("image.",""))||""),component:l.jsx(U,{sx:{width:"100%",maxWidth:200},children:l.jsx(jr,{image:s,imageOnly:!0,support_color:r})})}}),a.push({title:"Add image",text:e.length===1?"1 image":`${e.length} images`,component:t})),l.jsx(yo,{contents:a})},Yg=({images:e,support_color:t,disableSupportColor:r=!1,singleImage:a=!1})=>{const s=Ao(),n=a?e.length===0:!0,i=f=>{s("all_images",e.filter(h=>h.id!==f.id))},u=f=>{s("all_images",[...e,f])},o=t?`#${t}`:void 0,d=f=>{s("support_color",(f==null?void 0:f.replace("#",""))||"")};return l.jsx(ai,{title:`Image${a?"":"s"}${r?"":" and support color"}`,open:a&&!e.length,summary:l.jsx(aE,{images:e,support_color:o,addImageButton:n?l.jsx(Ur,{label:"Add image",onPick:u,menu:Ua}):void 0}),children:l.jsxs(de,{container:!0,spacing:2,children:[e.map((f,h)=>l.jsx(de,{item:!0,xs:3,children:l.jsx(jr,{image:f,onRemoved:()=>i(f),support_color:o})},h)),n&&l.jsx(de,{item:!0,xs:3,container:!0,spacing:0,alignSelf:"center",justifyContent:"center",children:l.jsx(Ur,{label:"Add image",onPick:u,menu:Ua})}),!r&&l.jsxs(de,{item:!0,xs:12,children:[l.jsx(tl,{label:"Support color",color:o,onChange:f=>d(f)}),l.jsx("br",{}),l.jsx(re,{variant:"caption",children:"The support color is used in certain situations to provide extra visual differentation."})]})]})})};var Gs={},sE=Re;Object.defineProperty(Gs,"__esModule",{value:!0});var Za=Gs.default=void 0,nE=sE(Se()),iE=l;Za=Gs.default=(0,nE.default)((0,iE.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch");const Er=()=>{const e=E.useContext(mc);if(e===null)throw new Error("MUI: Can not find utils in context. It looks like you forgot to wrap your component in LocalizationProvider, or pass dateAdapter prop directly.");return e},ye=()=>Er().utils,la=()=>Er().defaultDates,vt=()=>Er().localeText,br=()=>{const e=ye();return E.useRef(e.date()).current},sr=({date:e,disableFuture:t,disablePast:r,maxDate:a,minDate:s,isDateDisabled:n,utils:i})=>{const u=i.startOfDay(i.date());r&&i.isBefore(s,u)&&(s=u),t&&i.isAfter(a,u)&&(a=u);let o=e,d=e;for(i.isBefore(e,s)&&(o=i.date(s),d=null),i.isAfter(e,a)&&(d&&(d=i.date(a)),o=null);o||d;){if(o&&i.isAfter(o,a)&&(o=null),d&&i.isBefore(d,s)&&(d=null),o){if(!n(o))return o;o=i.addDays(o,1)}if(d){if(!n(d))return d;d=i.addDays(d,-1)}}return null},uE=(e,t)=>{const r=e.date(t);return e.isValid(r)?r:null},lt=(e,t,r)=>{if(t==null)return r;const a=e.date(t);return e.isValid(a)?a:r};function No(e,t){var r,a,s,n,i;const u=xe({props:e,name:t}),o=ye(),d=la(),f=(r=u.ampm)!=null?r:o.is12HourCycleInCurrentLocale();if(u.orientation!=null&&u.orientation!=="portrait")throw new Error("We are not supporting custom orientation for DateTimePicker yet :(");return k({ampm:f,orientation:"portrait",openTo:"day",views:["year","day","hours","minutes"],ampmInClock:!0,acceptRegex:f?/[\dap]/gi:/\d/gi,disableMaskedInput:!1,inputFormat:f?o.formats.keyboardDateTime12h:o.formats.keyboardDateTime24h,disableIgnoringDatePartForTimeValidation:!!(u.minDateTime||u.maxDateTime),disablePast:!1,disableFuture:!1},u,{minDate:lt(o,(a=u.minDateTime)!=null?a:u.minDate,d.minDate),maxDate:lt(o,(s=u.maxDateTime)!=null?s:u.maxDate,d.maxDate),minTime:(n=u.minDateTime)!=null?n:u.minTime,maxTime:(i=u.maxDateTime)!=null?i:u.maxTime})}const Io={emptyValue:null,getTodayValue:e=>e.date(),parseInput:uE,areValuesEqual:(e,t,r)=>e.isEqual(t,r)},oE=e=>{switch(e){case"year":case"month":case"day":return"calendar";default:return"clock"}};function Do(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Do(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function De(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=Do(e))&&(a&&(a+=" "),a+=t);return a}function cE(e){return Te("PrivatePickersToolbarText",e)}const $n=ge("PrivatePickersToolbarText",["root","selected"]),lE=["className","selected","value"],dE=e=>{const{classes:t,selected:r}=e;return he({root:["root",r&&"selected"]},cE,t)},fE=V(re,{name:"PrivatePickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${$n.selected}`]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:e.palette.text.secondary,[`&.${$n.selected}`]:{color:e.palette.text.primary}})),xo=E.forwardRef(function(t,r){const{className:a,value:s}=t,n=fe(t,lE),i=dE(t);return l.jsx(fE,k({ref:r,className:De(a,i.root),component:"span"},n,{children:s}))}),hE=_t(l.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),mE=_t(l.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),pE=_t(l.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),Ro=_t(l.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),EE=_t(l.jsxs(E.Fragment,{children:[l.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),l.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),bE=_t(l.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),TE=_t(l.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Pen"),gE=_t(l.jsxs(E.Fragment,{children:[l.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),l.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");function So(e){return Te("MuiPickersToolbar",e)}const ko=ge("MuiPickersToolbar",["root","content","penIconButton","penIconButtonLandscape"]),_E=e=>{const{classes:t,isLandscape:r}=e;return he({root:["root"],content:["content"],penIconButton:["penIconButton",r&&"penIconButtonLandscape"]},So,t)},vE=V("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>k({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3)},t.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),CE=V(de,{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})(({ownerState:e})=>k({flex:1},!e.isLandscape&&{alignItems:"center"})),AE=V(Me,{name:"MuiPickersToolbar",slot:"PenIconButton",overridesResolver:(e,t)=>[{[`&.${ko.penIconButtonLandscape}`]:t.penIconButtonLandscape},t.penIconButton]})({}),yE=e=>e==="clock"?l.jsx(EE,{color:"inherit"}):l.jsx(Ro,{color:"inherit"}),NE=E.forwardRef(function(t,r){const a=xe({props:t,name:"MuiPickersToolbar"}),{children:s,className:n,getMobileKeyboardInputViewButtonText:i,isLandscape:u,isMobileKeyboardViewOpen:o,landscapeDirection:d="column",toggleMobileKeyboardView:f,toolbarTitle:h,viewType:m="calendar"}=a,p=a,T=vt(),C=_E(p);return l.jsxs(vE,{ref:r,className:De(C.root,n),ownerState:p,children:[l.jsx(re,{color:"text.secondary",variant:"overline",children:h}),l.jsxs(CE,{container:!0,justifyContent:"space-between",className:C.content,ownerState:p,direction:u?d:"row",alignItems:u?"flex-start":"flex-end",children:[s,l.jsx(AE,{onClick:f,className:C.penIconButton,ownerState:p,color:"inherit","aria-label":i?i(o,m):T.inputModeToggleButtonAriaLabel(o,m),children:o?yE(m):l.jsx(TE,{color:"inherit"})})]})]})}),IE=["align","className","selected","typographyClassName","value","variant"],DE=e=>{const{classes:t}=e;return he({root:["root"]},So,t)},xE=V(Ae,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),Qt=E.forwardRef(function(t,r){const a=xe({props:t,name:"MuiPickersToolbarButton"}),{align:s,className:n,selected:i,typographyClassName:u,value:o,variant:d}=a,f=fe(a,IE),h=DE(a);return l.jsx(xE,k({variant:"text",ref:r,className:De(n,h.root)},f,{children:l.jsx(xo,{align:s,className:u,variant:d,value:o,selected:i})}))});function RE(e){return Te("MuiDateTimePickerToolbar",e)}ge("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","separator"]);const SE=["ampm","parsedValue","isMobileKeyboardViewOpen","onChange","openView","setOpenView","toggleMobileKeyboardView","toolbarFormat","toolbarPlaceholder","toolbarTitle","views"],kE=e=>{const{classes:t}=e;return he({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer"],separator:["separator"]},RE,t)},PE=V(NE,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",[`& .${ko.penIconButton}`]:k({position:"absolute",top:8},e.direction==="rtl"?{left:8}:{right:8})})),ME=V("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),LE=V("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})({display:"flex"}),Wn=V(xo,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({margin:"0 4px 0 2px",cursor:"default"});function Po(e){const t=xe({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:r,parsedValue:a,isMobileKeyboardViewOpen:s,openView:n,setOpenView:i,toggleMobileKeyboardView:u,toolbarFormat:o,toolbarPlaceholder:d="",toolbarTitle:f,views:h}=t,m=fe(t,SE),p=t,T=ye(),C=vt(),v=kE(p),A=f??C.dateTimePickerDefaultToolbarTitle,y=D=>r?T.format(D,"hours12h"):T.format(D,"hours24h"),N=E.useMemo(()=>a?o?T.formatByString(a,o):T.format(a,"shortDate"):d,[a,o,d,T]);return l.jsxs(PE,k({toolbarTitle:A,isMobileKeyboardViewOpen:s,toggleMobileKeyboardView:u,className:v.root,viewType:oE(n)},m,{isLandscape:!1,ownerState:p,children:[l.jsxs(ME,{className:v.dateContainer,ownerState:p,children:[h.includes("year")&&l.jsx(Qt,{tabIndex:-1,variant:"subtitle1",onClick:()=>i("year"),selected:n==="year",value:a?T.format(a,"year"):""}),h.includes("day")&&l.jsx(Qt,{tabIndex:-1,variant:"h4",onClick:()=>i("day"),selected:n==="day",value:N})]}),l.jsxs(LE,{className:v.timeContainer,ownerState:p,children:[h.includes("hours")&&l.jsx(Qt,{variant:"h3",onClick:()=>i("hours"),selected:n==="hours",value:a?y(a):"--"}),h.includes("minutes")&&l.jsxs(E.Fragment,{children:[l.jsx(Wn,{variant:"h3",value:":",className:v.separator,ownerState:p}),l.jsx(Qt,{variant:"h3",onClick:()=>i("minutes"),selected:n==="minutes",value:a?T.format(a,"minutes"):"--"})]}),h.includes("seconds")&&l.jsxs(E.Fragment,{children:[l.jsx(Wn,{variant:"h3",value:":",className:v.separator,ownerState:p}),l.jsx(Qt,{variant:"h3",onClick:()=>i("seconds"),selected:n==="seconds",value:a?T.format(a,"seconds"):"--"})]})]})]}))}const Ct=E.createContext(null),OE=["onAccept","onClear","onCancel","onSetToday","actions"],Mo=e=>{const{onAccept:t,onClear:r,onCancel:a,onSetToday:s,actions:n}=e,i=fe(e,OE),u=E.useContext(Ct),o=vt(),d=typeof n=="function"?n(u):n;if(d==null||d.length===0)return null;const f=d==null?void 0:d.map(h=>{switch(h){case"clear":return l.jsx(Ae,{onClick:r,children:o.clearButtonLabel},h);case"cancel":return l.jsx(Ae,{onClick:a,children:o.cancelButtonLabel},h);case"accept":return l.jsx(Ae,{onClick:t,children:o.okButtonLabel},h);case"today":return l.jsx(Ae,{onClick:s,children:o.todayButtonLabel},h);default:return null}});return l.jsx(lr,k({},i,{children:f}))};function wE(e){return Te("MuiPickersPopper",e)}ge("MuiPickersPopper",["root","paper"]);function Lo(e,t){return Array.isArray(t)?t.every(r=>e.indexOf(r)!==-1):e.indexOf(t)!==-1}const Oo=(e,t)=>r=>{(r.key==="Enter"||r.key===" ")&&(e(r),r.preventDefault(),r.stopPropagation())},wo=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?wo(t.shadowRoot):t:null},BE=["onClick","onTouchStart"],FE=e=>{const{classes:t}=e;return he({root:["root"],paper:["paper"]},wE,t)},HE=V(sl,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({zIndex:e.zIndex.modal})),jE=V(us,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({ownerState:e})=>k({transformOrigin:"top center",outline:0},e.placement==="top"&&{transformOrigin:"bottom center"}));function UE(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function YE(e,t){const r=E.useRef(!1),a=E.useRef(!1),s=E.useRef(null),n=E.useRef(!1);E.useEffect(()=>{if(!e)return;function o(){n.current=!0}return document.addEventListener("mousedown",o,!0),document.addEventListener("touchstart",o,!0),()=>{document.removeEventListener("mousedown",o,!0),document.removeEventListener("touchstart",o,!0),n.current=!1}},[e]);const i=ta(o=>{if(!n.current)return;const d=a.current;a.current=!1;const f=ma(s.current);if(!s.current||"clientX"in o&&UE(o,f))return;if(r.current){r.current=!1;return}let h;o.composedPath?h=o.composedPath().indexOf(s.current)>-1:h=!f.documentElement.contains(o.target)||s.current.contains(o.target),!h&&!d&&t(o)}),u=()=>{a.current=!0};return E.useEffect(()=>{if(e){const o=ma(s.current),d=()=>{r.current=!0};return o.addEventListener("touchstart",i),o.addEventListener("touchmove",d),()=>{o.removeEventListener("touchstart",i),o.removeEventListener("touchmove",d)}}},[e,i]),E.useEffect(()=>{if(e){const o=ma(s.current);return o.addEventListener("click",i),()=>{o.removeEventListener("click",i),a.current=!1}}},[e,i]),[s,u,u]}function VE(e){var t;const r=xe({props:e,name:"MuiPickersPopper"}),{anchorEl:a,children:s,containerRef:n=null,onBlur:i,onClose:u,onClear:o,onAccept:d,onCancel:f,onSetToday:h,open:m,PopperProps:p,role:T,TransitionComponent:C=qc,TrapFocusProps:v,PaperProps:A={},components:y,componentsProps:N}=r;E.useEffect(()=>{function te(W){m&&(W.key==="Escape"||W.key==="Esc")&&u()}return document.addEventListener("keydown",te),()=>{document.removeEventListener("keydown",te)}},[u,m]);const D=E.useRef(null);E.useEffect(()=>{T!=="tooltip"&&(m?D.current=wo(document):D.current&&D.current instanceof HTMLElement&&setTimeout(()=>{D.current instanceof HTMLElement&&D.current.focus()}))},[m,T]);const[P,R,M]=YE(m,i??u),w=E.useRef(null),B=jt(w,n),Y=jt(B,P),F=r,O=FE(F),{onClick:z,onTouchStart:H}=A,q=fe(A,BE),Q=te=>{te.key==="Escape"&&(te.stopPropagation(),u())},ee=(t=y==null?void 0:y.ActionBar)!=null?t:Mo,me=(y==null?void 0:y.PaperContent)||E.Fragment;return l.jsx(HE,k({transition:!0,role:T,open:m,anchorEl:a,onKeyDown:Q,className:O.root},p,{children:({TransitionProps:te,placement:W})=>l.jsx(jc,k({open:m,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:T==="tooltip",isEnabled:()=>!0},v,{children:l.jsx(C,k({},te,{children:l.jsx(jE,k({tabIndex:-1,elevation:8,ref:Y,onClick:ae=>{R(ae),z&&z(ae)},onTouchStart:ae=>{M(ae),H&&H(ae)},ownerState:k({},F,{placement:W}),className:O.paper},q,{children:l.jsxs(me,k({},N==null?void 0:N.paperContent,{children:[s,l.jsx(ee,k({onAccept:d,onClear:o,onCancel:f,onSetToday:h,actions:[]},N==null?void 0:N.actionBar))]}))}))}))}))}))}function $E(e){const{children:t,DateInputProps:r,KeyboardDateInputComponent:a,onClear:s,onDismiss:n,onCancel:i,onAccept:u,onSetToday:o,open:d,PopperProps:f,PaperProps:h,TransitionComponent:m,components:p,componentsProps:T}=e,C=E.useRef(null),v=jt(r.inputRef,C);return l.jsxs(Ct.Provider,{value:"desktop",children:[l.jsx(a,k({},r,{inputRef:v})),l.jsx(VE,{role:"dialog",open:d,anchorEl:C.current,TransitionComponent:m,PopperProps:f,PaperProps:h,onClose:n,onCancel:i,onClear:s,onAccept:u,onSetToday:o,components:p,componentsProps:T,children:t})]})}function Ks({onChange:e,onViewChange:t,openTo:r,view:a,views:s}){var n,i;const[u,o]=ra({name:"Picker",state:"view",controlled:a,default:r&&Lo(s,r)?r:s[0]}),d=(n=s[s.indexOf(u)-1])!=null?n:null,f=(i=s[s.indexOf(u)+1])!=null?i:null,h=E.useCallback(T=>{o(T),t&&t(T)},[o,t]),m=E.useCallback(()=>{f&&h(f)},[f,h]);return{handleChangeAndOpenNext:E.useCallback((T,C)=>{const v=C==="finish";e(T,v&&f?"partial":C),v&&m()},[f,e,m]),nextView:f,previousView:d,openNext:m,openView:u,setOpenView:h}}const Vt=220,Tt=36,ur={x:Vt/2,y:Vt/2},Bo={x:ur.x,y:0},WE=Bo.x-ur.x,zE=Bo.y-ur.y,qE=e=>e*(180/Math.PI),Fo=(e,t,r)=>{const a=t-ur.x,s=r-ur.y,n=Math.atan2(WE,zE)-Math.atan2(a,s);let i=qE(n);i=Math.round(i/e)*e,i%=360;const u=Math.floor(i/e)||0,o=a**2+s**2,d=Math.sqrt(o);return{value:u,distance:d}},GE=(e,t,r=1)=>{const a=r*6;let{value:s}=Fo(a,e,t);return s=s*r%60,s},KE=(e,t,r)=>{const{value:a,distance:s}=Fo(30,e,t);let n=a||12;return r?n%=12:s<Vt/2-Tt&&(n+=12,n%=24),n};function QE(e){return Te("MuiClockPointer",e)}ge("MuiClockPointer",["root","thumb"]);const XE=["className","hasSelected","isInner","type","value"],JE=e=>{const{classes:t}=e;return he({root:["root"],thumb:["thumb"]},QE,t)},ZE=V("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>k({width:2,backgroundColor:e.palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},t.shouldAnimate&&{transition:e.transitions.create(["transform","height"])})),eb=V("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e,ownerState:t})=>k({width:4,height:4,backgroundColor:e.palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:`calc(50% - ${Tt/2}px)`,border:`${(Tt-4)/2}px solid ${e.palette.primary.main}`,boxSizing:"content-box"},t.hasSelected&&{backgroundColor:e.palette.primary.main}));function tb(e){const t=xe({props:e,name:"MuiClockPointer"}),{className:r,isInner:a,type:s,value:n}=t,i=fe(t,XE),u=E.useRef(s);E.useEffect(()=>{u.current=s},[s]);const o=k({},t,{shouldAnimate:u.current!==s}),d=JE(o),f=()=>{let m=360/(s==="hours"?12:60)*n;return s==="hours"&&n>12&&(m-=360),{height:Math.round((a?.26:.4)*Vt),transform:`rotateZ(${m}deg)`}};return l.jsx(ZE,k({style:f(),className:De(r,d.root),ownerState:o},i,{children:l.jsx(eb,{ownerState:o,className:d.thumb})}))}function rb(e){return Te("MuiClock",e)}ge("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton"]);const ab=e=>{const{classes:t}=e;return he({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"]},rb,t)},sb=V("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),nb=V("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),ib=V("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),ub=V("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})(({ownerState:e})=>k({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}})),ob=V("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),cb=V(Me,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e,ownerState:t})=>k({zIndex:1,position:"absolute",bottom:t.ampmInClock?64:8,left:8},t.meridiemMode==="am"&&{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.light}})),lb=V(Me,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e,ownerState:t})=>k({zIndex:1,position:"absolute",bottom:t.ampmInClock?64:8,right:8},t.meridiemMode==="pm"&&{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.light}}));function db(e){const t=xe({props:e,name:"MuiClock"}),{ampm:r,ampmInClock:a,autoFocus:s,children:n,date:i,getClockLabelText:u,handleMeridiemChange:o,isTimeDisabled:d,meridiemMode:f,minutesStep:h=1,onChange:m,selectedId:p,type:T,value:C,disabled:v,readOnly:A,className:y}=t,N=t,D=ye(),P=E.useContext(Ct),R=E.useRef(!1),M=ab(N),w=d(C,T),B=!r&&T==="hours"&&(C<1||C>12),Y=(W,ae)=>{v||A||d(W,T)||m(W,ae)},F=(W,ae)=>{let{offsetX:ue,offsetY:X}=W;if(ue===void 0){const pe=W.target.getBoundingClientRect();ue=W.changedTouches[0].clientX-pe.left,X=W.changedTouches[0].clientY-pe.top}const ve=T==="seconds"||T==="minutes"?GE(ue,X,h):KE(ue,X,!!r);Y(ve,ae)},O=W=>{R.current=!0,F(W,"shallow")},z=W=>{R.current&&(F(W,"finish"),R.current=!1)},H=W=>{W.buttons>0&&F(W.nativeEvent,"shallow")},q=W=>{R.current&&(R.current=!1),F(W.nativeEvent,"finish")},Q=E.useMemo(()=>T==="hours"?!0:C%5===0,[T,C]),ee=T==="minutes"?h:1,me=E.useRef(null);aa(()=>{s&&me.current.focus()},[s]);const te=W=>{if(!R.current)switch(W.key){case"Home":Y(0,"partial"),W.preventDefault();break;case"End":Y(T==="minutes"?59:23,"partial"),W.preventDefault();break;case"ArrowUp":Y(C+ee,"partial"),W.preventDefault();break;case"ArrowDown":Y(C-ee,"partial"),W.preventDefault();break}};return l.jsxs(sb,{className:De(y,M.root),children:[l.jsxs(nb,{className:M.clock,children:[l.jsx(ub,{onTouchMove:O,onTouchEnd:z,onMouseUp:q,onMouseMove:H,ownerState:{disabled:v},className:M.squareMask}),!w&&l.jsxs(E.Fragment,{children:[l.jsx(ob,{className:M.pin}),i&&l.jsx(tb,{type:T,value:C,isInner:B,hasSelected:Q})]}),l.jsx(ib,{"aria-activedescendant":p,"aria-label":u(T,i,D),ref:me,role:"listbox",onKeyDown:te,tabIndex:0,className:M.wrapper,children:n})]}),r&&(P==="desktop"||a)&&l.jsxs(E.Fragment,{children:[l.jsx(cb,{onClick:A?void 0:()=>o("am"),disabled:v||f===null,ownerState:N,className:M.amButton,children:l.jsx(re,{variant:"caption",children:"AM"})}),l.jsx(lb,{disabled:v||f===null,onClick:A?void 0:()=>o("pm"),ownerState:N,className:M.pmButton,children:l.jsx(re,{variant:"caption",children:"PM"})})]})]})}const Ho=e=>()=>{};function fb(e){return Te("MuiClockNumber",e)}const Nr=ge("MuiClockNumber",["root","selected","disabled"]),hb=["className","disabled","index","inner","label","selected"],mb=e=>{const{classes:t,selected:r,disabled:a}=e;return he({root:["root",r&&"selected",a&&"disabled"]},fb,t)},pb=V("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Nr.disabled}`]:t.disabled},{[`&.${Nr.selected}`]:t.selected}]})(({theme:e,ownerState:t})=>k({height:Tt,width:Tt,position:"absolute",left:`calc((100% - ${Tt}px) / 2)`,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:e.palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:e.palette.background.paper},[`&.${Nr.selected}`]:{color:e.palette.primary.contrastText},[`&.${Nr.disabled}`]:{pointerEvents:"none",color:e.palette.text.disabled}},t.inner&&k({},e.typography.body2,{color:e.palette.text.secondary})));function jo(e){const t=xe({props:e,name:"MuiClockNumber"}),{className:r,disabled:a,index:s,inner:n,label:i,selected:u}=t,o=fe(t,hb),d=t,f=mb(d),h=s%12/12*Math.PI*2-Math.PI/2,m=(Vt-Tt-2)/2*(n?.65:1),p=Math.round(Math.cos(h)*m),T=Math.round(Math.sin(h)*m);return l.jsx(pb,k({className:De(r,f.root),"aria-disabled":a?!0:void 0,"aria-selected":u?!0:void 0,role:"option",style:{transform:`translate(${p}px, ${T+(Vt-Tt)/2}px`},ownerState:d},o,{children:i}))}const Eb=({ampm:e,date:t,getClockNumberText:r,isDisabled:a,selectedId:s,utils:n})=>{const i=t?n.getHours(t):null,u=[],o=e?1:0,d=e?12:23,f=h=>i===null?!1:e?h===12?i===12||i===0:i===h||i-12===h:i===h;for(let h=o;h<=d;h+=1){let m=h.toString();h===0&&(m="00");const p=!e&&(h===0||h>12);m=n.formatNumber(m);const T=f(h);u.push(l.jsx(jo,{id:T?s:void 0,index:h,inner:p,selected:T,disabled:a(h),label:m,"aria-label":r(m)},h))}return u},zn=({utils:e,value:t,isDisabled:r,getClockNumberText:a,selectedId:s})=>{const n=e.formatNumber;return[[5,n("05")],[10,n("10")],[15,n("15")],[20,n("20")],[25,n("25")],[30,n("30")],[35,n("35")],[40,n("40")],[45,n("45")],[50,n("50")],[55,n("55")],[0,n("00")]].map(([i,u],o)=>{const d=i===t;return l.jsx(jo,{label:u,id:d?s:void 0,index:o+1,inner:!1,disabled:r(i),selected:d,"aria-label":a(u)},i)})};function bb(e){return Te("MuiPickersArrowSwitcher",e)}ge("MuiPickersArrowSwitcher",["root","spacer","button"]);const Tb=["children","className","components","componentsProps","isLeftDisabled","isLeftHidden","isRightDisabled","isRightHidden","leftArrowButtonText","onLeftClick","onRightClick","rightArrowButtonText"],gb=e=>{const{classes:t}=e;return he({root:["root"],spacer:["spacer"],button:["button"]},bb,t)},_b=V("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),vb=V("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})(({theme:e})=>({width:e.spacing(3)})),qn=V(Me,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>k({},e.hidden&&{visibility:"hidden"})),Uo=E.forwardRef(function(t,r){const a=xe({props:t,name:"MuiPickersArrowSwitcher"}),{children:s,className:n,components:i,componentsProps:u,isLeftDisabled:o,isLeftHidden:d,isRightDisabled:f,isRightHidden:h,leftArrowButtonText:m,onLeftClick:p,onRightClick:T,rightArrowButtonText:C}=a,v=fe(a,Tb),y=Wt().direction==="rtl",N=(u==null?void 0:u.leftArrowButton)||{},D=(i==null?void 0:i.LeftArrowIcon)||mE,P=(u==null?void 0:u.rightArrowButton)||{},R=(i==null?void 0:i.RightArrowIcon)||pE,M=a,w=gb(M);return l.jsxs(_b,k({ref:r,className:De(w.root,n),ownerState:M},v,{children:[l.jsx(qn,k({as:i==null?void 0:i.LeftArrowButton,size:"small","aria-label":m,title:m,disabled:o,edge:"end",onClick:p},N,{className:De(w.button,N.className),ownerState:k({},M,N,{hidden:d}),children:y?l.jsx(R,{}):l.jsx(D,{})})),s?l.jsx(re,{variant:"subtitle1",component:"span",children:s}):l.jsx(vb,{className:w.spacer,ownerState:M}),l.jsx(qn,k({as:i==null?void 0:i.RightArrowButton,size:"small","aria-label":C,title:C,edge:"start",disabled:f,onClick:T},P,{className:De(w.button,P.className),ownerState:k({},M,P,{hidden:h}),children:y?l.jsx(D,{}):l.jsx(R,{})}))]}))}),Cb=(e,t)=>e?t.getHours(e)>=12?"pm":"am":null,es=(e,t,r)=>r&&(e>=12?"pm":"am")!==t?t==="am"?e-12:e+12:e,Ab=(e,t,r,a)=>{const s=es(a.getHours(e),t,r);return a.setHours(e,s)},Gn=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),Yo=(e=!1,t)=>(r,a)=>e?t.isAfter(r,a):Gn(r,t)>Gn(a,t);function yb(e,{disableFuture:t,maxDate:r}){const a=ye();return E.useMemo(()=>{const s=a.date(),n=a.startOfMonth(t&&a.isBefore(s,r)?s:r);return!a.isAfter(n,e)},[t,r,e,a])}function Nb(e,{disablePast:t,minDate:r}){const a=ye();return E.useMemo(()=>{const s=a.date(),n=a.startOfMonth(t&&a.isAfter(s,r)?s:r);return!a.isBefore(n,e)},[t,r,e,a])}function Ib(e,t,r){const a=ye(),s=Cb(e,a),n=E.useCallback(i=>{const u=e==null?null:Ab(e,i,!!t,a);r(u,"partial")},[t,e,r,a]);return{meridiemMode:s,handleMeridiemChange:n}}function Db(e){return Te("MuiClockPicker",e)}ge("MuiClockPicker",["root","arrowSwitcher"]);const ts=36,Qs=2,Vo=320,xb=358,Xs=V("div")({overflowX:"hidden",width:Vo,maxHeight:xb,display:"flex",flexDirection:"column",margin:"0 auto"}),Rb=e=>{const{classes:t}=e;return he({root:["root"],arrowSwitcher:["arrowSwitcher"]},Db,t)},Sb=V(Xs,{name:"MuiClockPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column"}),kb=V(Uo,{name:"MuiClockPicker",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),Pb=Ho(),Mb=E.forwardRef(function(t,r){const a=xe({props:t,name:"MuiClockPicker"}),{ampm:s=!1,ampmInClock:n=!1,autoFocus:i,components:u,componentsProps:o,date:d,disableIgnoringDatePartForTimeValidation:f,getClockLabelText:h,getHoursClockNumberText:m,getMinutesClockNumberText:p,getSecondsClockNumberText:T,leftArrowButtonText:C,maxTime:v,minTime:A,minutesStep:y=1,rightArrowButtonText:N,shouldDisableTime:D,showViewSwitcher:P,onChange:R,view:M,views:w=["hours","minutes"],openTo:B,onViewChange:Y,className:F,disabled:O,readOnly:z}=a;Pb({leftArrowButtonText:C,rightArrowButtonText:N,getClockLabelText:h,getHoursClockNumberText:m,getMinutesClockNumberText:p,getSecondsClockNumberText:T});const H=vt(),q=C??H.openPreviousView,Q=N??H.openNextView,ee=h??H.clockLabelText,me=m??H.hoursClockNumberText,te=p??H.minutesClockNumberText,W=T??H.secondsClockNumberText,{openView:ae,setOpenView:ue,nextView:X,previousView:ve,handleChangeAndOpenNext:pe}=Ks({view:M,views:w,openTo:B,onViewChange:Y,onChange:R}),Qe=br(),j=ye(),J=E.useMemo(()=>d||j.setSeconds(j.setMinutes(j.setHours(Qe,0),0),0),[d,Qe,j]),{meridiemMode:Ie,handleMeridiemChange:nt}=Ib(J,s,pe),Xe=E.useCallback((Ee,Ce)=>{const Le=Yo(f,j),ne=({start:be,end:je})=>!(A&&Le(A,je)||v&&Le(be,v)),He=(be,je=1)=>be%je!==0?!1:D?!D(be,Ce):!0;switch(Ce){case"hours":{const be=es(Ee,Ie,s),je=j.setHours(J,be),Ge=j.setSeconds(j.setMinutes(je,0),0),sc=j.setSeconds(j.setMinutes(je,59),59);return!ne({start:Ge,end:sc})||!He(be)}case"minutes":{const be=j.setMinutes(J,Ee),je=j.setSeconds(be,0),Ge=j.setSeconds(be,59);return!ne({start:je,end:Ge})||!He(Ee,y)}case"seconds":{const be=j.setSeconds(J,Ee);return!ne({start:be,end:be})||!He(Ee)}default:throw new Error("not supported")}},[s,J,f,v,Ie,A,y,D,j]),G=bi(),Z=E.useMemo(()=>{switch(ae){case"hours":{const Ee=(Ce,Le)=>{const ne=es(Ce,Ie,s);pe(j.setHours(J,ne),Le)};return{onChange:Ee,value:j.getHours(J),children:Eb({date:d,utils:j,ampm:s,onChange:Ee,getClockNumberText:me,isDisabled:Ce=>O||Xe(Ce,"hours"),selectedId:G})}}case"minutes":{const Ee=j.getMinutes(J),Ce=(Le,ne)=>{pe(j.setMinutes(J,Le),ne)};return{value:Ee,onChange:Ce,children:zn({utils:j,value:Ee,onChange:Ce,getClockNumberText:te,isDisabled:Le=>O||Xe(Le,"minutes"),selectedId:G})}}case"seconds":{const Ee=j.getSeconds(J),Ce=(Le,ne)=>{pe(j.setSeconds(J,Le),ne)};return{value:Ee,onChange:Ce,children:zn({utils:j,value:Ee,onChange:Ce,getClockNumberText:W,isDisabled:Le=>O||Xe(Le,"seconds"),selectedId:G})}}default:throw new Error("You must provide the type for ClockView")}},[ae,j,d,s,me,te,W,Ie,pe,J,Xe,G,O]),Ne=a,Ye=Rb(Ne);return l.jsxs(Sb,{ref:r,className:De(Ye.root,F),ownerState:Ne,children:[P&&l.jsx(kb,{className:Ye.arrowSwitcher,leftArrowButtonText:q,rightArrowButtonText:Q,components:u,componentsProps:o,onLeftClick:()=>ue(ve),onRightClick:()=>ue(X),isLeftDisabled:!ve,isRightDisabled:!X,ownerState:Ne}),l.jsx(db,k({autoFocus:i,date:d,ampmInClock:n,type:ae,ampm:s,getClockLabelText:ee,minutesStep:y,isTimeDisabled:Xe,meridiemMode:Ie,handleMeridiemChange:nt,selectedId:G,disabled:O,readOnly:z},Z))]})});function Lb(e){return Te("PrivatePickersMonth",e)}const Kn=ge("PrivatePickersMonth",["root","selected"]),Ob=["disabled","onSelect","selected","value","tabIndex","hasFocus","onFocus","onBlur"],wb=e=>{const{classes:t,selected:r}=e;return he({root:["root",r&&"selected"]},Lb,t)},Bb=V(re,{name:"PrivatePickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Kn.selected}`]:t.selected}]})(({theme:e})=>k({flex:"1 0 33.33%",display:"flex",alignItems:"center",justifyContent:"center",color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:Mr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{pointerEvents:"none",color:e.palette.text.secondary},[`&.${Kn.selected}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:focus, &:hover":{backgroundColor:e.palette.primary.dark}}})),Qn=()=>{},Fb=e=>{const{disabled:t,onSelect:r,selected:a,value:s,tabIndex:n,hasFocus:i,onFocus:u=Qn,onBlur:o=Qn}=e,d=fe(e,Ob),f=wb(e),h=()=>{r(s)},m=E.useRef(null);return aa(()=>{if(i){var p;(p=m.current)==null||p.focus()}},[i]),l.jsx(Bb,k({ref:m,component:"button",type:"button",className:f.root,tabIndex:n,onClick:h,onKeyDown:Oo(h),color:a?"primary":void 0,variant:a?"h5":"subtitle1",disabled:t,onFocus:p=>u(p,s),onBlur:p=>o(p,s)},d))};function Hb(e){return Te("MuiMonthPicker",e)}ge("MuiMonthPicker",["root"]);const jb=["className","date","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange"],Ub=e=>{const{classes:t}=e;return he({root:["root"]},Hb,t)};function Yb(e,t){const r=ye(),a=la(),s=xe({props:e,name:t});return k({disableFuture:!1,disablePast:!1},s,{minDate:lt(r,s.minDate,a.minDate),maxDate:lt(r,s.maxDate,a.maxDate)})}const Vb=V("div",{name:"MuiMonthPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({width:310,display:"flex",flexWrap:"wrap",alignContent:"stretch",margin:"0 4px"}),$b=E.forwardRef(function(t,r){const a=ye(),s=br(),n=Yb(t,"MuiMonthPicker"),{className:i,date:u,disabled:o,disableFuture:d,disablePast:f,maxDate:h,minDate:m,onChange:p,shouldDisableMonth:T,readOnly:C,disableHighlightToday:v,autoFocus:A=!1,onMonthFocus:y,hasFocus:N,onFocusedViewChange:D}=n,P=fe(n,jb),R=n,M=Ub(R),w=nl(),B=E.useMemo(()=>u??a.startOfMonth(s),[s,a,u]),Y=E.useMemo(()=>u!=null?a.getMonth(u):v?null:a.getMonth(s),[s,u,a,v]),[F,O]=E.useState(()=>Y||a.getMonth(s)),z=E.useCallback(X=>{const ve=a.startOfMonth(f&&a.isAfter(s,m)?s:m),pe=a.startOfMonth(d&&a.isBefore(s,h)?s:h);return a.isBefore(X,ve)||a.isAfter(X,pe)?!0:T?T(X):!1},[d,f,h,m,s,T,a]),H=X=>{if(C)return;const ve=a.setMonth(B,X);p(ve,"finish")},[q,Q]=ra({name:"MonthPicker",state:"hasFocus",controlled:N,default:A}),ee=E.useCallback(X=>{Q(X),D&&D(X)},[Q,D]),me=E.useCallback(X=>{z(a.setMonth(B,X))||(O(X),ee(!0),y&&y(X))},[z,a,B,ee,y]);E.useEffect(()=>{O(X=>Y!==null&&X!==Y?Y:X)},[Y]);const te=ta(X=>{switch(X.key){case"ArrowUp":me((12+F-3)%12),X.preventDefault();break;case"ArrowDown":me((12+F+3)%12),X.preventDefault();break;case"ArrowLeft":me((12+F+(w.direction==="ltr"?-1:1))%12),X.preventDefault();break;case"ArrowRight":me((12+F+(w.direction==="ltr"?1:-1))%12),X.preventDefault();break}}),W=E.useCallback((X,ve)=>{me(ve)},[me]),ae=E.useCallback(()=>{ee(!1)},[ee]),ue=a.getMonth(s);return l.jsx(Vb,k({ref:r,className:De(M.root,i),ownerState:R,onKeyDown:te},P,{children:a.getMonthArray(B).map(X=>{const ve=a.getMonth(X),pe=a.format(X,"monthShort"),Qe=o||z(X);return l.jsx(Fb,{value:ve,selected:ve===Y,tabIndex:ve===F&&!Qe?0:-1,hasFocus:q&&ve===F,onSelect:H,onFocus:W,onBlur:ae,disabled:Qe,"aria-current":ue===ve?"date":void 0,children:pe},pe)})}))});function Wb(e,t,r){const{value:a,onError:s}=e,n=Er(),i=E.useRef(null),u=t({adapter:n,value:a,props:e});return E.useEffect(()=>{s&&!r(u,i.current)&&s(u,a),i.current=u},[r,s,i,u,a]),u}const $o=({props:e,value:t,adapter:r})=>{const a=r.utils.date(),s=r.utils.date(t),n=lt(r.utils,e.minDate,r.defaultDates.minDate),i=lt(r.utils,e.maxDate,r.defaultDates.maxDate);if(s===null)return null;switch(!0){case!r.utils.isValid(t):return"invalidDate";case!!(e.shouldDisableDate&&e.shouldDisableDate(s)):return"shouldDisableDate";case!!(e.disableFuture&&r.utils.isAfterDay(s,a)):return"disableFuture";case!!(e.disablePast&&r.utils.isBeforeDay(s,a)):return"disablePast";case!!(n&&r.utils.isBeforeDay(s,n)):return"minDate";case!!(i&&r.utils.isAfterDay(s,i)):return"maxDate";default:return null}},Wo=({shouldDisableDate:e,minDate:t,maxDate:r,disableFuture:a,disablePast:s})=>{const n=Er();return E.useCallback(i=>$o({adapter:n,value:i,props:{shouldDisableDate:e,minDate:t,maxDate:r,disableFuture:a,disablePast:s}})!==null,[n,e,t,r,a,s])},zb=(e,t,r)=>(a,s)=>{switch(s.type){case"changeMonth":return k({},a,{slideDirection:s.direction,currentMonth:s.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return k({},a,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(a.focusedDay!=null&&s.focusedDay!=null&&r.isSameDay(s.focusedDay,a.focusedDay))return a;const n=s.focusedDay!=null&&!t&&!r.isSameMonth(a.currentMonth,s.focusedDay);return k({},a,{focusedDay:s.focusedDay,isMonthSwitchingAnimating:n&&!e&&!s.withoutMonthSwitchingAnimation,currentMonth:n?r.startOfMonth(s.focusedDay):a.currentMonth,slideDirection:s.focusedDay!=null&&r.isAfterDay(s.focusedDay,a.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},qb=({date:e,defaultCalendarMonth:t,disableFuture:r,disablePast:a,disableSwitchToMonthOnDayFocus:s=!1,maxDate:n,minDate:i,onMonthChange:u,reduceAnimations:o,shouldDisableDate:d})=>{var f;const h=br(),m=ye(),p=E.useRef(zb(!!o,s,m)).current,[T,C]=E.useReducer(p,{isMonthSwitchingAnimating:!1,focusedDay:e||h,currentMonth:m.startOfMonth((f=e??t)!=null?f:h),slideDirection:"left"}),v=E.useCallback(P=>{C(k({type:"changeMonth"},P)),u&&u(P.newMonth)},[u]),A=E.useCallback(P=>{const R=P??h;m.isSameMonth(R,T.currentMonth)||v({newMonth:m.startOfMonth(R),direction:m.isAfterDay(R,T.currentMonth)?"left":"right"})},[T.currentMonth,v,h,m]),y=Wo({shouldDisableDate:d,minDate:i,maxDate:n,disableFuture:r,disablePast:a}),N=E.useCallback(()=>{C({type:"finishMonthSwitchingAnimation"})},[]),D=E.useCallback((P,R)=>{y(P)||C({type:"changeFocusedDay",focusedDay:P,withoutMonthSwitchingAnimation:R})},[y]);return{calendarState:T,changeMonth:A,changeFocusedDay:D,isDateDisabled:y,onMonthSwitchingAnimationEnd:N,handleChangeMonth:v}},Gb=e=>Te("MuiPickersFadeTransitionGroup",e);ge("MuiPickersFadeTransitionGroup",["root"]);const Kb=e=>{const{classes:t}=e;return he({root:["root"]},Gb,t)},Xn=500,Qb=V(vi,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"});function zo(e){const t=xe({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:r,className:a,reduceAnimations:s,transKey:n}=t,i=Kb(t);return s?r:l.jsx(Qb,{className:De(i.root,a),children:l.jsx(mi,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:Xn,enter:Xn/2,exit:0},children:r},n)})}function Xb(e){return Te("MuiPickersDay",e)}const Ir=ge("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),Jb=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today"],Zb=e=>{const{selected:t,disableMargin:r,disableHighlightToday:a,today:s,disabled:n,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:u,classes:o}=e;return he({root:["root",t&&"selected",n&&"disabled",!r&&"dayWithMargin",!a&&s&&"today",i&&u&&"dayOutsideMonth",i&&!u&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Xb,o)},qo=({theme:e,ownerState:t})=>k({},e.typography.caption,{width:ts,height:ts,borderRadius:"50%",padding:0,backgroundColor:e.palette.background.paper,color:e.palette.text.primary,"&:hover":{backgroundColor:Mr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:focus":{backgroundColor:Mr(e.palette.action.active,e.palette.action.hoverOpacity),[`&.${Ir.selected}`]:{willChange:"background-color",backgroundColor:e.palette.primary.dark}},[`&.${Ir.selected}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium,transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),"&:hover":{willChange:"background-color",backgroundColor:e.palette.primary.dark}},[`&.${Ir.disabled}`]:{color:e.palette.text.disabled}},!t.disableMargin&&{margin:`0 ${Qs}px`},t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&{color:e.palette.text.secondary},!t.disableHighlightToday&&t.today&&{[`&:not(.${Ir.selected})`]:{border:`1px solid ${e.palette.text.secondary}`}}),Go=(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableMargin&&t.dayWithMargin,!r.disableHighlightToday&&r.today&&t.today,!r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,r.outsideCurrentMonth&&!r.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},e2=V(al,{name:"MuiPickersDay",slot:"Root",overridesResolver:Go})(qo),t2=V("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Go})(({theme:e,ownerState:t})=>k({},qo({theme:e,ownerState:t}),{opacity:0,pointerEvents:"none"})),xa=()=>{},r2=E.forwardRef(function(t,r){const a=xe({props:t,name:"MuiPickersDay"}),{autoFocus:s=!1,className:n,day:i,disabled:u=!1,disableHighlightToday:o=!1,disableMargin:d=!1,isAnimating:f,onClick:h,onDaySelect:m,onFocus:p=xa,onBlur:T=xa,onKeyDown:C=xa,onMouseDown:v,outsideCurrentMonth:A,selected:y=!1,showDaysOutsideCurrentMonth:N=!1,children:D,today:P=!1}=a,R=fe(a,Jb),M=k({},a,{autoFocus:s,disabled:u,disableHighlightToday:o,disableMargin:d,selected:y,showDaysOutsideCurrentMonth:N,today:P}),w=Zb(M),B=ye(),Y=E.useRef(null),F=jt(Y,r);aa(()=>{s&&!u&&!f&&!A&&Y.current.focus()},[s,u,f,A]);const O=H=>{v&&v(H),A&&H.preventDefault()},z=H=>{u||m(i,"finish"),A&&H.currentTarget.focus(),h&&h(H)};return A&&!N?l.jsx(t2,{className:De(w.root,w.hiddenDaySpacingFiller,n),ownerState:M,role:R.role}):l.jsx(e2,k({className:De(w.root,n),ownerState:M,ref:F,centerRipple:!0,disabled:u,tabIndex:y?0:-1,onKeyDown:H=>C(H,i),onFocus:H=>p(H,i),onBlur:H=>T(H,i),onClick:z,onMouseDown:O},R,{children:D||B.format(i,"dayOfMonth")}))}),a2=(e,t)=>e.autoFocus===t.autoFocus&&e.isAnimating===t.isAnimating&&e.today===t.today&&e.disabled===t.disabled&&e.selected===t.selected&&e.disableMargin===t.disableMargin&&e.showDaysOutsideCurrentMonth===t.showDaysOutsideCurrentMonth&&e.disableHighlightToday===t.disableHighlightToday&&e.className===t.className&&e.sx===t.sx&&e.outsideCurrentMonth===t.outsideCurrentMonth&&e.onFocus===t.onFocus&&e.onBlur===t.onBlur&&e.onDaySelect===t.onDaySelect,s2=E.memo(r2,a2),n2=e=>Te("PrivatePickersSlideTransition",e),we=ge("PrivatePickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),i2=["children","className","reduceAnimations","slideDirection","transKey"],u2=e=>{const{classes:t}=e;return he({root:["root"]},n2,t)},Ko=350,o2=V(vi,{name:"PrivatePickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${we["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${we["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${we.slideEnterActive}`]:t.slideEnterActive},{[`.${we.slideExit}`]:t.slideExit},{[`.${we["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${we["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:Ko,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${we["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${we["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${we.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${we.slideExit}`]:{transform:"translate(0%)"},[`& .${we["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${we["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}}),c2=e=>{const{children:t,className:r,reduceAnimations:a,slideDirection:s,transKey:n}=e,i=fe(e,i2),u=u2(e);if(a)return l.jsx("div",{className:De(u.root,r),children:t});const o={exit:we.slideExit,enterActive:we.slideEnterActive,enter:we[`slideEnter-${s}`],exitActive:we[`slideExitActiveLeft-${s}`]};return l.jsx(o2,{className:De(u.root,r),childFactory:d=>E.cloneElement(d,{classNames:o}),role:"presentation",children:l.jsx(cs,k({mountOnEnter:!0,unmountOnExit:!0,timeout:Ko,classNames:o},i,{children:t}),n)})},l2=e=>Te("MuiDayPicker",e);ge("MuiDayPicker",["header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer"]);const d2=e=>{const{classes:t}=e;return he({header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"]},l2,t)},f2=e=>e.charAt(0).toUpperCase(),Qo=(ts+Qs*2)*6,h2=V("div",{name:"MuiDayPicker",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),m2=V(re,{name:"MuiDayPicker",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary})),p2=V("div",{name:"MuiDayPicker",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:Qo}),E2=V(c2,{name:"MuiDayPicker",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:Qo}),b2=V("div",{name:"MuiDayPicker",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),T2=V("div",{name:"MuiDayPicker",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:`${Qs}px 0`,display:"flex",justifyContent:"center"});function g2(e){const t=br(),r=ye(),a=xe({props:e,name:"MuiDayPicker"}),s=d2(a),{onFocusedDayChange:n,className:i,currentMonth:u,selectedDays:o,disabled:d,disableHighlightToday:f,focusedDay:h,isMonthSwitchingAnimating:m,loading:p,onSelectedDaysChange:T,onMonthSwitchingAnimationEnd:C,readOnly:v,reduceAnimations:A,renderDay:y,renderLoading:N=()=>l.jsx("span",{children:"..."}),showDaysOutsideCurrentMonth:D,slideDirection:P,TransitionProps:R,disablePast:M,disableFuture:w,minDate:B,maxDate:Y,shouldDisableDate:F,dayOfWeekFormatter:O=f2,hasFocus:z,onFocusedViewChange:H,gridLabelId:q}=a,Q=Wo({shouldDisableDate:F,minDate:B,maxDate:Y,disablePast:M,disableFuture:w}),[ee,me]=E.useState(()=>h||t),te=E.useCallback(G=>{H&&H(G)},[H]),W=E.useCallback((G,Z="finish")=>{v||T(G,Z)},[T,v]),ae=E.useCallback(G=>{Q(G)||(n(G),me(G),te(!0))},[Q,n,te]),ue=Wt();function X(G,Z){switch(G.key){case"ArrowUp":ae(r.addDays(Z,-7)),G.preventDefault();break;case"ArrowDown":ae(r.addDays(Z,7)),G.preventDefault();break;case"ArrowLeft":{const Ne=r.addDays(Z,ue.direction==="ltr"?-1:1),Ye=ue.direction==="ltr"?r.getPreviousMonth(Z):r.getNextMonth(Z),Ee=sr({utils:r,date:Ne,minDate:ue.direction==="ltr"?r.startOfMonth(Ye):Ne,maxDate:ue.direction==="ltr"?Ne:r.endOfMonth(Ye),isDateDisabled:Q});ae(Ee||Ne),G.preventDefault();break}case"ArrowRight":{const Ne=r.addDays(Z,ue.direction==="ltr"?1:-1),Ye=ue.direction==="ltr"?r.getNextMonth(Z):r.getPreviousMonth(Z),Ee=sr({utils:r,date:Ne,minDate:ue.direction==="ltr"?Ne:r.startOfMonth(Ye),maxDate:ue.direction==="ltr"?r.endOfMonth(Ye):Ne,isDateDisabled:Q});ae(Ee||Ne),G.preventDefault();break}case"Home":ae(r.startOfWeek(Z)),G.preventDefault();break;case"End":ae(r.endOfWeek(Z)),G.preventDefault();break;case"PageUp":ae(r.getNextMonth(Z)),G.preventDefault();break;case"PageDown":ae(r.getPreviousMonth(Z)),G.preventDefault();break}}function ve(G,Z){ae(Z)}function pe(G,Z){z&&r.isSameDay(ee,Z)&&te(!1)}const Qe=r.getMonth(u),j=o.filter(G=>!!G).map(G=>r.startOfDay(G)),J=Qe,Ie=E.useMemo(()=>E.createRef(),[J]),nt=r.startOfWeek(t),Xe=E.useMemo(()=>{const G=r.startOfMonth(u),Z=r.endOfMonth(u);return Q(ee)||r.isAfterDay(ee,Z)||r.isBeforeDay(ee,G)?sr({utils:r,date:ee,minDate:G,maxDate:Z,disablePast:M,disableFuture:w,isDateDisabled:Q}):ee},[u,w,M,ee,Q,r]);return l.jsxs("div",{role:"grid","aria-labelledby":q,children:[l.jsx(h2,{role:"row",className:s.header,children:r.getWeekdays().map((G,Z)=>{var Ne;return l.jsx(m2,{variant:"caption",role:"columnheader","aria-label":r.format(r.addDays(nt,Z),"weekday"),className:s.weekDayLabel,children:(Ne=O==null?void 0:O(G))!=null?Ne:G},G+Z.toString())})}),p?l.jsx(p2,{className:s.loadingContainer,children:N()}):l.jsx(E2,k({transKey:J,onExited:C,reduceAnimations:A,slideDirection:P,className:De(i,s.slideTransition)},R,{nodeRef:Ie,children:l.jsx(b2,{ref:Ie,role:"rowgroup",className:s.monthContainer,children:r.getWeekArray(u).map(G=>l.jsx(T2,{role:"row",className:s.weekContainer,children:G.map(Z=>{const Ne=Xe!==null&&r.isSameDay(Z,Xe),Ye=j.some(Le=>r.isSameDay(Le,Z)),Ee=r.isSameDay(Z,t),Ce={key:Z==null?void 0:Z.toString(),day:Z,isAnimating:m,disabled:d||Q(Z),autoFocus:z&&Ne,today:Ee,outsideCurrentMonth:r.getMonth(Z)!==Qe,selected:Ye,disableHighlightToday:f,showDaysOutsideCurrentMonth:D,onKeyDown:X,onFocus:ve,onBlur:pe,onDaySelect:W,tabIndex:Ne?0:-1,role:"gridcell","aria-selected":Ye};return Ee&&(Ce["aria-current"]="date"),y?y(Z,j,Ce):E.createElement(s2,k({},Ce,{key:Ce.key}))})},`week-${G[0]}`))})}))]})}const _2=e=>Te("MuiPickersCalendarHeader",e);ge("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);const v2=e=>{const{classes:t}=e;return he({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},_2,t)},C2=V("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),A2=V("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>k({display:"flex",maxHeight:30,overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),y2=V("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),N2=V(Me,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})({marginRight:"auto"}),I2=V(hE,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})(({theme:e,ownerState:t})=>k({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"},t.openView==="year"&&{transform:"rotate(180deg)"})),D2=Ho();function x2(e){const t=xe({props:e,name:"MuiPickersCalendarHeader"}),{components:r={},componentsProps:a={},currentMonth:s,disabled:n,disableFuture:i,disablePast:u,getViewSwitchingButtonText:o,leftArrowButtonText:d,maxDate:f,minDate:h,onMonthChange:m,onViewChange:p,openView:T,reduceAnimations:C,rightArrowButtonText:v,views:A,labelId:y}=t;D2({leftArrowButtonText:d,rightArrowButtonText:v,getViewSwitchingButtonText:o});const N=vt(),D=d??N.previousMonth,P=v??N.nextMonth,R=o??N.calendarViewSwitchingButtonAriaLabel,M=ye(),w=v2(t),B=a.switchViewButton||{},Y=()=>m(M.getNextMonth(s),"left"),F=()=>m(M.getPreviousMonth(s),"right"),O=yb(s,{disableFuture:i,maxDate:f}),z=Nb(s,{disablePast:u,minDate:h}),H=()=>{if(!(A.length===1||!p||n))if(A.length===2)p(A.find(Q=>Q!==T)||A[0]);else{const Q=A.indexOf(T)!==0?0:1;p(A[Q])}};if(A.length===1&&A[0]==="year")return null;const q=t;return l.jsxs(C2,{ownerState:q,className:w.root,children:[l.jsxs(A2,{role:"presentation",onClick:H,ownerState:q,"aria-live":"polite",className:w.labelContainer,children:[l.jsx(zo,{reduceAnimations:C,transKey:M.format(s,"monthAndYear"),children:l.jsx(y2,{id:y,ownerState:q,className:w.label,children:M.format(s,"monthAndYear")})}),A.length>1&&!n&&l.jsx(N2,k({size:"small",as:r.SwitchViewButton,"aria-label":R(T),className:w.switchViewButton},B,{children:l.jsx(I2,{as:r.SwitchViewIcon,ownerState:q,className:w.switchViewIcon})}))]}),l.jsx(mi,{in:T==="day",children:l.jsx(Uo,{leftArrowButtonText:D,rightArrowButtonText:P,components:r,componentsProps:a,onLeftClick:F,onRightClick:Y,isLeftDisabled:z,isRightDisabled:O})})]})}function R2(e){return Te("PrivatePickersYear",e)}const Ht=ge("PrivatePickersYear",["root","modeDesktop","modeMobile","yearButton","selected","disabled"]),S2=["autoFocus","className","children","disabled","onClick","onKeyDown","value","tabIndex","onFocus","onBlur"],k2=e=>{const{wrapperVariant:t,disabled:r,selected:a,classes:s}=e,n={root:["root",t&&`mode${it(t)}`],yearButton:["yearButton",r&&"disabled",a&&"selected"]};return he(n,R2,s)},P2=V("div",{name:"PrivatePickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Ht.modeDesktop}`]:t.modeDesktop},{[`&.${Ht.modeMobile}`]:t.modeMobile}]})(({ownerState:e})=>k({flexBasis:"33.3%",display:"flex",alignItems:"center",justifyContent:"center"},(e==null?void 0:e.wrapperVariant)==="desktop"&&{flexBasis:"25%"})),M2=V("button",{name:"PrivatePickersYear",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${Ht.disabled}`]:t.disabled},{[`&.${Ht.selected}`]:t.selected}]})(({theme:e})=>k({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:Mr(e.palette.action.active,e.palette.action.hoverOpacity)},[`&.${Ht.disabled}`]:{color:e.palette.text.secondary},[`&.${Ht.selected}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:focus, &:hover":{backgroundColor:e.palette.primary.dark}}})),Jn=()=>{},L2=E.forwardRef(function(t,r){const{autoFocus:a,className:s,children:n,disabled:i,onClick:u,onKeyDown:o,value:d,tabIndex:f,onFocus:h=Jn,onBlur:m=Jn}=t,p=fe(t,S2),T=E.useRef(null),C=jt(T,r),v=E.useContext(Ct),A=k({},t,{wrapperVariant:v}),y=k2(A);return E.useEffect(()=>{a&&T.current.focus()},[a]),l.jsx(P2,{className:De(y.root,s),ownerState:A,children:l.jsx(M2,k({ref:C,disabled:i,type:"button",tabIndex:i?-1:f,onClick:N=>u(N,d),onKeyDown:N=>o(N,d),onFocus:N=>h(N,d),onBlur:N=>m(N,d),className:y.yearButton,ownerState:A},p,{children:n}))})});function O2(e){return Te("MuiYearPicker",e)}ge("MuiYearPicker",["root"]);const w2=e=>{const{classes:t}=e;return he({root:["root"]},O2,t)};function B2(e,t){const r=ye(),a=la(),s=xe({props:e,name:t});return k({disablePast:!1,disableFuture:!1},s,{minDate:lt(r,s.minDate,a.minDate),maxDate:lt(r,s.maxDate,a.maxDate)})}const F2=V("div",{name:"MuiYearPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",maxHeight:"304px"}),H2=E.forwardRef(function(t,r){const a=br(),s=Wt(),n=ye(),i=B2(t,"MuiYearPicker"),{autoFocus:u,className:o,date:d,disabled:f,disableFuture:h,disablePast:m,maxDate:p,minDate:T,onChange:C,readOnly:v,shouldDisableYear:A,disableHighlightToday:y,onYearFocus:N,hasFocus:D,onFocusedViewChange:P}=i,R=i,M=w2(R),w=E.useMemo(()=>d??n.startOfYear(a),[a,n,d]),B=E.useMemo(()=>d!=null?n.getYear(d):y?null:n.getYear(a),[a,d,n,y]),Y=E.useContext(Ct),F=E.useRef(null),[O,z]=E.useState(()=>B||n.getYear(a)),[H,q]=ra({name:"YearPicker",state:"hasFocus",controlled:D,default:u}),Q=E.useCallback(j=>{q(j),P&&P(j)},[q,P]),ee=E.useCallback(j=>!!(m&&n.isBeforeYear(j,a)||h&&n.isAfterYear(j,a)||T&&n.isBeforeYear(j,T)||p&&n.isAfterYear(j,p)||A&&A(j)),[h,m,p,T,a,A,n]),me=(j,J,Ie="finish")=>{if(v)return;const nt=n.setYear(w,J);C(nt,Ie)},te=E.useCallback(j=>{ee(n.setYear(w,j))||(z(j),Q(!0),N==null||N(j))},[ee,n,w,Q,N]);E.useEffect(()=>{z(j=>B!==null&&j!==B?B:j)},[B]);const W=Y==="desktop"?4:3,ae=E.useCallback((j,J)=>{switch(j.key){case"ArrowUp":te(J-W),j.preventDefault();break;case"ArrowDown":te(J+W),j.preventDefault();break;case"ArrowLeft":te(J+(s.direction==="ltr"?-1:1)),j.preventDefault();break;case"ArrowRight":te(J+(s.direction==="ltr"?1:-1)),j.preventDefault();break}},[te,s.direction,W]),ue=E.useCallback((j,J)=>{te(J)},[te]),X=E.useCallback((j,J)=>{O===J&&Q(!1)},[O,Q]),ve=n.getYear(a),pe=E.useRef(null),Qe=jt(r,pe);return E.useEffect(()=>{if(u||pe.current===null)return;const j=pe.current.querySelector('[tabindex="0"]');if(!j)return;const J=j.offsetHeight,Ie=j.offsetTop,nt=pe.current.clientHeight,Xe=pe.current.scrollTop,G=Ie+J;J>nt||Ie<Xe||(pe.current.scrollTop=G-nt/2-J/2)},[u]),l.jsx(F2,{ref:Qe,className:De(M.root,o),ownerState:R,children:n.getYearRange(T,p).map(j=>{const J=n.getYear(j),Ie=J===B;return l.jsx(L2,{selected:Ie,value:J,onClick:me,onKeyDown:ae,autoFocus:H&&J===O,ref:Ie?F:void 0,disabled:f||ee(j),tabIndex:J===O?0:-1,onFocus:ue,onBlur:X,"aria-current":ve===J?"date":void 0,children:n.format(j,"year")},n.format(j,"year"))})})}),j2=typeof navigator<"u"&&/(android)/i.test(navigator.userAgent),U2=e=>Te("MuiCalendarPicker",e);ge("MuiCalendarPicker",["root","viewTransitionContainer"]);const Y2=["autoFocus","onViewChange","date","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","classes"],V2=e=>{const{classes:t}=e;return he({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},U2,t)};function $2(e,t){const r=ye(),a=la(),s=xe({props:e,name:t});return k({loading:!1,disablePast:!1,disableFuture:!1,openTo:"day",views:["year","day"],reduceAnimations:j2,renderLoading:()=>l.jsx("span",{children:"..."})},s,{minDate:lt(r,s.minDate,a.minDate),maxDate:lt(r,s.maxDate,a.maxDate)})}const W2=V(Xs,{name:"MuiCalendarPicker",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column"}),z2=V(zo,{name:"MuiCalendarPicker",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),q2=E.forwardRef(function(t,r){const a=ye(),s=bi(),n=$2(t,"MuiCalendarPicker"),{autoFocus:i,onViewChange:u,date:o,disableFuture:d,disablePast:f,defaultCalendarMonth:h,onChange:m,onYearChange:p,onMonthChange:T,reduceAnimations:C,shouldDisableDate:v,shouldDisableMonth:A,shouldDisableYear:y,view:N,views:D,openTo:P,className:R,disabled:M,readOnly:w,minDate:B,maxDate:Y,disableHighlightToday:F,focusedView:O,onFocusedViewChange:z}=n,H=fe(n,Y2),{openView:q,setOpenView:Q,openNext:ee}=Ks({view:N,views:D,openTo:P,onChange:m,onViewChange:u}),{calendarState:me,changeFocusedDay:te,changeMonth:W,handleChangeMonth:ae,isDateDisabled:ue,onMonthSwitchingAnimationEnd:X}=qb({date:o,defaultCalendarMonth:h,reduceAnimations:C,onMonthChange:T,minDate:B,maxDate:Y,shouldDisableDate:v,disablePast:f,disableFuture:d}),ve=E.useCallback((ne,He)=>{const be=a.startOfMonth(ne),je=a.endOfMonth(ne),Ge=ue(ne)?sr({utils:a,date:ne,minDate:a.isBefore(B,be)?be:B,maxDate:a.isAfter(Y,je)?je:Y,disablePast:f,disableFuture:d,isDateDisabled:ue}):ne;Ge?(m(Ge,He),T==null||T(be)):(ee(),W(be)),te(Ge,!0)},[te,d,f,ue,Y,B,m,T,W,ee,a]),pe=E.useCallback((ne,He)=>{const be=a.startOfYear(ne),je=a.endOfYear(ne),Ge=ue(ne)?sr({utils:a,date:ne,minDate:a.isBefore(B,be)?be:B,maxDate:a.isAfter(Y,je)?je:Y,disablePast:f,disableFuture:d,isDateDisabled:ue}):ne;Ge?(m(Ge,He),p==null||p(Ge)):(ee(),W(be)),te(Ge,!0)},[te,d,f,ue,Y,B,m,p,ee,a,W]),Qe=E.useCallback((ne,He)=>m(o&&ne?a.mergeDateAndTime(ne,o):ne,He),[a,o,m]);E.useEffect(()=>{o&&W(o)},[o]);const j=n,J=V2(j),Ie={disablePast:f,disableFuture:d,maxDate:Y,minDate:B},nt=M&&o||B,Xe=M&&o||Y,G={disableHighlightToday:F,readOnly:w,disabled:M},Z=`${s}-grid-label`,[Ne,Ye]=ra({name:"DayPicker",state:"focusedView",controlled:O,default:i?q:null}),Ee=Ne!==null,Ce=ta(ne=>He=>{if(z){z(ne)(He);return}Ye(He?ne:be=>be===ne?null:be)}),Le=E.useRef(q);return E.useEffect(()=>{Le.current!==q&&(Le.current=q,Ce(q)(!0))},[q,Ce]),l.jsxs(W2,{ref:r,className:De(J.root,R),ownerState:j,children:[l.jsx(x2,k({},H,{views:D,openView:q,currentMonth:me.currentMonth,onViewChange:Q,onMonthChange:(ne,He)=>ae({newMonth:ne,direction:He}),minDate:nt,maxDate:Xe,disabled:M,disablePast:f,disableFuture:d,reduceAnimations:C,labelId:Z})),l.jsx(z2,{reduceAnimations:C,className:J.viewTransitionContainer,transKey:q,ownerState:j,children:l.jsxs("div",{children:[q==="year"&&l.jsx(H2,k({},H,Ie,G,{autoFocus:i,date:o,onChange:pe,shouldDisableYear:y,hasFocus:Ee,onFocusedViewChange:Ce("year")})),q==="month"&&l.jsx($b,k({},Ie,G,{autoFocus:i,hasFocus:Ee,className:R,date:o,onChange:ve,shouldDisableMonth:A,onFocusedViewChange:Ce("month")})),q==="day"&&l.jsx(g2,k({},H,me,Ie,G,{autoFocus:i,onMonthSwitchingAnimationEnd:X,onFocusedDayChange:te,reduceAnimations:C,selectedDays:[o],onSelectedDaysChange:Qe,shouldDisableDate:v,hasFocus:Ee,onFocusedViewChange:Ce("day"),gridLabelId:Z}))]})})]})}),G2=e=>{const[,t]=E.useReducer(o=>o+1,0),r=E.useRef(null),{replace:a,append:s}=e,n=a?a(e.format(e.value)):e.format(e.value),i=E.useRef(!1),u=o=>{const d=o.target.value;r.current=[d,o.target,d.length>n.length,i.current,n===e.format(d)],t()};return E.useLayoutEffect(()=>{if(r.current==null)return;let[o,d,f,h,m]=r.current;r.current=null;const p=h&&m,C=o.slice(d.selectionStart).search(e.accept||/\d/g),v=C!==-1?C:0,A=R=>(R.match(e.accept||/\d/g)||[]).join(""),y=A(o.substr(0,d.selectionStart)),N=R=>{let M=0,w=0;for(let B=0;B!==y.length;++B){let Y=R.indexOf(y[B],M)+1,F=A(R).indexOf(y[B],w)+1;F-w>1&&(Y=M,F=w),w=Math.max(F,w),M=Math.max(M,Y)}return M};if(e.mask===!0&&f&&!m){let R=N(o);const M=A(o.substr(R))[0];R=o.indexOf(M,R),o=`${o.substr(0,R)}${o.substr(R+1)}`}let D=e.format(o);s!=null&&d.selectionStart===o.length&&!m&&(f?D=s(D):A(D.slice(-1))===""&&(D=D.slice(0,-1)));const P=a?a(D):D;return n===P?t():e.onChange(P),()=>{let R=N(D);if(e.mask!=null&&(f||h&&!p))for(;D[R]&&A(D[R])==="";)R+=1;d.selectionStart=d.selectionEnd=R+(p?1+v:0)}}),E.useEffect(()=>{const o=f=>{f.code==="Delete"&&(i.current=!0)},d=f=>{f.code==="Delete"&&(i.current=!1)};return document.addEventListener("keydown",o),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",d)}},[]),{value:r.current!=null?r.current[0]:n,onChange:u}},rs=(e,t,r)=>{const a=e.date(t);return t===null?"":e.isValid(a)?e.formatByString(a,r):""},Qr="_",Xo="2019-11-21T22:30:00.000",Jo="2019-01-01T09:00:00.000";function K2(e,t,r,a){if(e)return e;const n=a.formatByString(a.date(Jo),t).replace(r,Qr),i=a.formatByString(a.date(Xo),t).replace(r,"_");return n===i?n:""}function Q2(e,t,r,a){if(!e)return!1;const n=a.formatByString(a.date(Jo),t).replace(r,Qr),i=a.formatByString(a.date(Xo),t).replace(r,"_"),u=i===n&&e===i;return!u&&a.lib,u}const X2=(e,t)=>r=>{let a=0;return r.split("").map((s,n)=>{if(t.lastIndex=0,a>e.length-1)return"";const i=e[a],u=e[a+1],o=t.test(s)?s:"",d=i===Qr?o:i+o;return a+=d.length,n===r.length-1&&u&&u!==Qr?d?d+u:"":d}).join("")},J2=({acceptRegex:e=/[\d]/gi,disabled:t,disableMaskedInput:r,ignoreInvalidInputs:a,inputFormat:s,inputProps:n,label:i,mask:u,onChange:o,rawValue:d,readOnly:f,rifmFormatter:h,TextFieldProps:m,validationError:p})=>{const T=ye(),C=T.getFormatHelperText(s),{shouldUseMaskedInput:v,maskToUse:A}=E.useMemo(()=>{if(r)return{shouldUseMaskedInput:!1,maskToUse:""};const H=K2(u,s,e,T);return{shouldUseMaskedInput:Q2(H,s,e,T),maskToUse:H}},[e,r,s,u,T]),y=E.useMemo(()=>v&&A?X2(A,e):H=>H,[e,A,v]),N=d===null?null:T.date(d),[D,P]=E.useState(N),[R,M]=E.useState(rs(T,d,s)),w=E.useRef(),B=E.useRef(T.locale),Y=E.useRef(s);E.useEffect(()=>{const H=d!==w.current,q=T.locale!==B.current,Q=s!==Y.current;if(w.current=d,B.current=T.locale,Y.current=s,!H&&!q&&!Q)return;const ee=d===null?null:T.date(d),me=d===null||T.isValid(ee);let te=D===null&&ee===null;if(D!==null&&ee!==null){const ae=T.isEqual(D,ee);if(ae)te=!0;else{const ue=Math.abs(T.getDiff(D,ee));te=ue===0?ae:ue<1e3}}if(!q&&!Q&&(!me||te))return;const W=rs(T,d,s);P(ee),M(W)},[T,d,s,D]);const F=H=>{const q=H===""||H===u?"":H;M(q);const Q=q===null?null:T.parse(q,s);a&&!T.isValid(Q)||(P(Q),o(Q,q||void 0))},O=G2({value:R,onChange:F,format:h||y});return k({label:i,disabled:t,error:p,inputProps:k({},v?O:{value:R,onChange:H=>{F(H.currentTarget.value)}},{disabled:t,placeholder:C,readOnly:f,type:v?"tel":"text"},n)},m)},Z2=["className","components","disableOpenPicker","getOpenDialogAriaText","InputAdornmentProps","InputProps","inputRef","openPicker","OpenPickerButtonProps","renderInput"],Zo=E.forwardRef(function(t,r){const{className:a,components:s={},disableOpenPicker:n,getOpenDialogAriaText:i,InputAdornmentProps:u,InputProps:o,inputRef:d,openPicker:f,OpenPickerButtonProps:h,renderInput:m}=t,p=fe(t,Z2),T=vt(),C=i??T.openDatePickerDialogue,v=ye(),A=J2(p),y=(u==null?void 0:u.position)||"end",N=s.OpenPickerIcon||Ro;return m(k({ref:r,inputRef:d,className:a},A,{InputProps:k({},o,{[`${y}Adornment`]:n?void 0:l.jsx(_i,k({position:y},u,{children:l.jsx(Me,k({edge:y,disabled:p.disabled||p.readOnly,"aria-label":C(p.rawValue,v)},h,{onClick:f,children:l.jsx(N,{})}))}))})}))});function Zn(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const eT=(e,t)=>{const[r,a]=E.useState(Zn);return aa(()=>{const n=()=>{a(Zn())};return window.addEventListener("orientationchange",n),()=>{window.removeEventListener("orientationchange",n)}},[]),Lo(e,["hours","minutes","seconds"])?!1:(t||r)==="landscape"},tT=({autoFocus:e,openView:t})=>{const[r,a]=E.useState(e?t:null),s=E.useCallback(n=>i=>{a(i?n:u=>n===u?null:u)},[]);return{focusedView:r,setFocusedView:s}};function rT(e){return Te("MuiCalendarOrClockPicker",e)}ge("MuiCalendarOrClockPicker",["root","mobileKeyboardInputView"]);const aT=["autoFocus","className","parsedValue","DateInputProps","isMobileKeyboardViewOpen","onDateChange","onViewChange","openTo","orientation","showToolbar","toggleMobileKeyboardView","ToolbarComponent","toolbarFormat","toolbarPlaceholder","toolbarTitle","views","dateRangeIcon","timeIcon","hideTabs","classes"],sT=e=>{const{classes:t}=e;return he({root:["root"],mobileKeyboardInputView:["mobileKeyboardInputView"]},rT,t)},nT=V("div",{name:"MuiCalendarOrClockPicker",slot:"MobileKeyboardInputView",overridesResolver:(e,t)=>t.mobileKeyboardInputView})({padding:"16px 24px"}),iT=V("div",{name:"MuiCalendarOrClockPicker",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>k({display:"flex",flexDirection:"column"},e.isLandscape&&{flexDirection:"row"})),uT={fullWidth:!0},ei=e=>e==="year"||e==="month"||e==="day",ti=e=>e==="hours"||e==="minutes"||e==="seconds";function ec(e){var t,r;const a=xe({props:e,name:"MuiCalendarOrClockPicker"}),{autoFocus:s,parsedValue:n,DateInputProps:i,isMobileKeyboardViewOpen:u,onDateChange:o,onViewChange:d,openTo:f,orientation:h,showToolbar:m,toggleMobileKeyboardView:p,ToolbarComponent:T=()=>null,toolbarFormat:C,toolbarPlaceholder:v,toolbarTitle:A,views:y,dateRangeIcon:N,timeIcon:D,hideTabs:P}=a,R=fe(a,aT),M=(t=R.components)==null?void 0:t.Tabs,w=eT(y,h),B=E.useContext(Ct),Y=sT(a),F=m??B!=="desktop",O=!P&&typeof window<"u"&&window.innerHeight>667,z=E.useCallback((W,ae)=>{o(W,B,ae)},[o,B]),H=E.useCallback(W=>{u&&p(),d&&d(W)},[u,d,p]),{openView:q,setOpenView:Q,handleChangeAndOpenNext:ee}=Ks({view:void 0,views:y,openTo:f,onChange:z,onViewChange:H}),{focusedView:me,setFocusedView:te}=tT({autoFocus:s,openView:q});return l.jsxs(iT,{ownerState:{isLandscape:w},className:Y.root,children:[F&&l.jsx(T,k({},R,{views:y,isLandscape:w,parsedValue:n,onChange:z,setOpenView:Q,openView:q,toolbarTitle:A,toolbarFormat:C,toolbarPlaceholder:v,isMobileKeyboardViewOpen:u,toggleMobileKeyboardView:p})),O&&!!M&&l.jsx(M,k({dateRangeIcon:N,timeIcon:D,view:q,onChange:Q},(r=R.componentsProps)==null?void 0:r.tabs)),l.jsx(Xs,{children:u?l.jsx(nT,{className:Y.mobileKeyboardInputView,children:l.jsx(Zo,k({},i,{ignoreInvalidInputs:!0,disableOpenPicker:!0,TextFieldProps:uT}))}):l.jsxs(E.Fragment,{children:[ei(q)&&l.jsx(q2,k({autoFocus:s,date:n,onViewChange:Q,onChange:ee,view:q,views:y.filter(ei),focusedView:me,onFocusedViewChange:te},R)),ti(q)&&l.jsx(Mb,k({},R,{autoFocus:s,date:n,view:q,views:y.filter(ti),onChange:ee,onViewChange:Q,showViewSwitcher:B==="desktop"}))]})})]})}const oT=({adapter:e,value:t,props:r})=>{const{minTime:a,maxTime:s,minutesStep:n,shouldDisableTime:i,disableIgnoringDatePartForTimeValidation:u}=r,o=e.utils.date(t),d=Yo(u,e.utils);if(t===null)return null;switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(a&&d(a,o)):return"minTime";case!!(s&&d(o,s)):return"maxTime";case!!(i&&i(e.utils.getHours(o),"hours")):return"shouldDisableTime-hours";case!!(i&&i(e.utils.getMinutes(o),"minutes")):return"shouldDisableTime-minutes";case!!(i&&i(e.utils.getSeconds(o),"seconds")):return"shouldDisableTime-seconds";case!!(n&&e.utils.getMinutes(o)%n!==0):return"minutesStep";default:return null}},cT=["minDate","maxDate","disableFuture","shouldDisableDate","disablePast"],lT=({props:e,value:t,adapter:r})=>{const{minDate:a,maxDate:s,disableFuture:n,shouldDisableDate:i,disablePast:u}=e,o=fe(e,cT),d=$o({adapter:r,value:t,props:{minDate:a,maxDate:s,disableFuture:n,shouldDisableDate:i,disablePast:u}});return d!==null?d:oT({adapter:r,value:t,props:o})},dT=(e,t)=>e===t;function tc(e){return Wb(e,lT,dT)}const fT=({open:e,onOpen:t,onClose:r})=>{const a=E.useRef(typeof e=="boolean").current,[s,n]=E.useState(!1);E.useEffect(()=>{if(a){if(typeof e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");n(e)}},[a,e]);const i=E.useCallback(u=>{a||n(u),u&&t&&t(),!u&&r&&r()},[a,t,r]);return{isOpen:s,setIsOpen:i}},rc=(e,t)=>{const{onAccept:r,onChange:a,value:s,closeOnSelect:n}=e,i=ye(),{isOpen:u,setIsOpen:o}=fT(e),d=E.useMemo(()=>t.parseInput(i,s),[t,i,s]),[f,h]=E.useState(d),[m,p]=E.useState(()=>({committed:d,draft:d,resetFallback:d})),T=E.useCallback(R=>{p(M=>{switch(R.action){case"setAll":case"acceptAndClose":return{draft:R.value,committed:R.value,resetFallback:R.value};case"setCommitted":return k({},M,{draft:R.value,committed:R.value});case"setDraft":return k({},M,{draft:R.value});default:return M}}),(R.forceOnChangeCall||!R.skipOnChangeCall&&!t.areValuesEqual(i,m.committed,R.value))&&a(R.value),R.action==="acceptAndClose"&&(o(!1),r&&!t.areValuesEqual(i,m.resetFallback,R.value)&&r(R.value))},[r,a,o,m,i,t]);E.useEffect(()=>{i.isValid(d)&&h(d)},[i,d]),E.useEffect(()=>{u&&T({action:"setAll",value:d,skipOnChangeCall:!0})},[u]),t.areValuesEqual(i,m.committed,d)||T({action:"setCommitted",value:d,skipOnChangeCall:!0});const C=E.useMemo(()=>({open:u,onClear:()=>{T({value:t.emptyValue,action:"acceptAndClose",forceOnChangeCall:!t.areValuesEqual(i,s,t.emptyValue)})},onAccept:()=>{T({value:m.draft,action:"acceptAndClose",forceOnChangeCall:!t.areValuesEqual(i,s,d)})},onDismiss:()=>{T({value:m.committed,action:"acceptAndClose"})},onCancel:()=>{T({value:m.resetFallback,action:"acceptAndClose"})},onSetToday:()=>{T({value:t.getTodayValue(i),action:"acceptAndClose"})}}),[T,u,i,m,t,s,d]),[v,A]=E.useState(!1),y=E.useMemo(()=>({parsedValue:m.draft,isMobileKeyboardViewOpen:v,toggleMobileKeyboardView:()=>A(!v),onDateChange:(R,M,w="partial")=>{switch(w){case"shallow":return T({action:"setDraft",value:R,skipOnChangeCall:!0});case"partial":return T({action:"setDraft",value:R});case"finish":return T(n??M==="desktop"?{value:R,action:"acceptAndClose"}:{value:R,action:"setCommitted"});default:throw new Error("MUI: Invalid selectionState passed to `onDateChange`")}}}),[T,v,m.draft,n]),N=E.useCallback((R,M)=>{const w=t.valueReducer?t.valueReducer(i,f,R):R;a(w,M)},[a,t,f,i]),D=E.useMemo(()=>({onChange:N,open:u,rawValue:s,openPicker:()=>o(!0)}),[N,u,s,o]),P={pickerProps:y,inputProps:D,wrapperProps:C};return E.useDebugValue(P,()=>({MuiPickerState:{dateState:m,other:P}})),P};function hT(e){return Te("MuiDateTimePickerTabs",e)}ge("MuiDateTimePickerTabs",["root"]);const mT=e=>["day","month","year"].includes(e)?"date":"time",pT=e=>e==="date"?"day":"hours",ET=e=>{const{classes:t}=e;return he({root:["root"]},hT,t)},bT=V(ci,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>k({boxShadow:`0 -1px 0 0 inset ${t.palette.divider}`},e.wrapperVariant==="desktop"&&{order:1,boxShadow:`0 1px 0 0 inset ${t.palette.divider}`,[`& .${gc.indicator}`]:{bottom:"auto",top:0}})),ac=function(t){const r=xe({props:t,name:"MuiDateTimePickerTabs"}),{dateRangeIcon:a=l.jsx(bE,{}),onChange:s,timeIcon:n=l.jsx(gE,{}),view:i}=r,u=vt(),o=E.useContext(Ct),d=k({},r,{wrapperVariant:o}),f=ET(d),h=(m,p)=>{s(pT(p))};return l.jsxs(bT,{ownerState:d,variant:"fullWidth",value:mT(i),onChange:h,className:f.root,children:[l.jsx(Ma,{value:"date","aria-label":u.dateTableLabel,icon:l.jsx(E.Fragment,{children:a})}),l.jsx(Ma,{value:"time","aria-label":u.timeTableLabel,icon:l.jsx(E.Fragment,{children:n})})]})},TT=["onChange","PaperProps","PopperProps","ToolbarComponent","TransitionComponent","value","components","componentsProps","hideTabs"],gT=E.forwardRef(function(t,r){const a=No(t,"MuiDesktopDateTimePicker"),s=tc(a)!==null,{pickerProps:n,inputProps:i,wrapperProps:u}=rc(a,Io),{PaperProps:o,PopperProps:d,ToolbarComponent:f=Po,TransitionComponent:h,components:m,componentsProps:p,hideTabs:T=!0}=a,C=fe(a,TT),v=E.useMemo(()=>k({Tabs:ac},m),[m]),A=k({},i,C,{components:v,componentsProps:p,ref:r,validationError:s});return l.jsx($E,k({},u,{DateInputProps:A,KeyboardDateInputComponent:Zo,PopperProps:d,PaperProps:o,TransitionComponent:h,components:v,componentsProps:p,children:l.jsx(ec,k({},n,{autoFocus:!0,toolbarTitle:a.label||a.toolbarTitle,ToolbarComponent:f,DateInputProps:A,components:v,componentsProps:p,hideTabs:T},C))}))}),_T=V($t)({[`& .${an.container}`]:{outline:0},[`& .${an.paper}`]:{outline:0,minWidth:Vo}}),vT=V(cr)({"&:first-of-type":{padding:0}}),CT=e=>{var t;const{children:r,DialogProps:a={},onAccept:s,onClear:n,onDismiss:i,onCancel:u,onSetToday:o,open:d,components:f,componentsProps:h}=e,m=(t=f==null?void 0:f.ActionBar)!=null?t:Mo;return l.jsxs(_T,k({open:d,onClose:i},a,{children:[l.jsx(vT,{children:r}),l.jsx(m,k({onAccept:s,onClear:n,onCancel:u,onSetToday:o,actions:["cancel","accept"]},h==null?void 0:h.actionBar))]}))},AT=["children","DateInputProps","DialogProps","onAccept","onClear","onDismiss","onCancel","onSetToday","open","PureDateInputComponent","components","componentsProps"];function yT(e){const{children:t,DateInputProps:r,DialogProps:a,onAccept:s,onClear:n,onDismiss:i,onCancel:u,onSetToday:o,open:d,PureDateInputComponent:f,components:h,componentsProps:m}=e,p=fe(e,AT);return l.jsxs(Ct.Provider,{value:"mobile",children:[l.jsx(f,k({components:h},p,r)),l.jsx(CT,{DialogProps:a,onAccept:s,onClear:n,onDismiss:i,onCancel:u,onSetToday:o,open:d,components:h,componentsProps:m,children:t})]})}const NT=E.forwardRef(function(t,r){const{disabled:a,getOpenDialogAriaText:s,inputFormat:n,InputProps:i,inputRef:u,label:o,openPicker:d,rawValue:f,renderInput:h,TextFieldProps:m={},validationError:p,className:T}=t,C=vt(),v=s??C.openDatePickerDialogue,A=ye(),y=E.useMemo(()=>k({},i,{readOnly:!0}),[i]),N=rs(A,f,n),D=ta(P=>{P.stopPropagation(),d()});return h(k({label:o,disabled:a,ref:r,inputRef:u,error:p,InputProps:y,className:T},!t.readOnly&&!t.disabled&&{onClick:D},{inputProps:k({disabled:a,readOnly:!0,"aria-readonly":!0,"aria-label":v(f,A),value:N},!t.readOnly&&{onClick:D},{onKeyDown:Oo(d)})},m))}),IT=["ToolbarComponent","value","onChange","components","componentsProps","hideTabs"],DT=E.forwardRef(function(t,r){const a=No(t,"MuiMobileDateTimePicker"),s=tc(a)!==null,{pickerProps:n,inputProps:i,wrapperProps:u}=rc(a,Io),{ToolbarComponent:o=Po,components:d,componentsProps:f,hideTabs:h=!1}=a,m=fe(a,IT),p=E.useMemo(()=>k({Tabs:ac},d),[d]),T=k({},i,m,{components:p,componentsProps:f,ref:r,validationError:s});return l.jsx(yT,k({},m,u,{DateInputProps:T,PureDateInputComponent:NT,components:p,componentsProps:f,children:l.jsx(ec,k({},n,{autoFocus:!0,toolbarTitle:a.label||a.toolbarTitle,ToolbarComponent:o,DateInputProps:T,components:p,componentsProps:f,hideTabs:h},m))}))}),xT=["desktopModeMediaQuery","DialogProps","PopperProps","TransitionComponent"],RT=E.forwardRef(function(t,r){const a=xe({props:t,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:s="@media (pointer: fine)",DialogProps:n,PopperProps:i,TransitionComponent:u}=a,o=fe(a,xT);return rl(s,{defaultMatches:!0})?l.jsx(gT,k({ref:r,PopperProps:i,TransitionComponent:u},o)):l.jsx(DT,k({ref:r,DialogProps:n},o))});/*! clipboard-copy. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ST=MT;function Js(){return new DOMException("The request is not allowed","NotAllowedError")}async function kT(e){if(!navigator.clipboard)throw Js();return navigator.clipboard.writeText(e)}async function PT(e){const t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);const r=window.getSelection(),a=window.document.createRange();r.removeAllRanges(),a.selectNode(t),r.addRange(a);let s=!1;try{s=window.document.execCommand("copy")}finally{r.removeAllRanges(),window.document.body.removeChild(t)}if(!s)throw Js()}async function MT(e){try{await kT(e)}catch(t){try{await PT(e)}catch(r){throw r||t||Js()}}}const LT=or(ST),ri=({text:e,label:t})=>{const r=E.useRef(null),[a,s]=E.useState(!1),n=()=>{LT(e).then(()=>{s(!0)})};return l.jsx(oe,{label:t,value:e,InputProps:{readOnly:!0,disableUnderline:!0,endAdornment:l.jsx(_i,{position:"end",children:l.jsx(os,{title:"Copied!",open:a,leaveDelay:1500,placement:"top",onClose:()=>s(!1),children:l.jsx(Me,{onClick:n,size:"small",color:"primary",children:l.jsx(pc,{fontSize:"small"})})})})},inputRef:r,onClick:()=>{var i;return(i=r.current)==null?void 0:i.setSelectionRange(0,e.length)},fullWidth:!0,variant:"standard",margin:"none"})},Vg=({item:e})=>{const{layouts:t}=Pa().props,r=Ao(),a=fa(e)?e:void 0,s=fa(e)?void 0:e,n=fa(e)||Ul(e)?void 0:e,[i,u]=E.useState(e.publish_at?Nt(e.publish_at):null),o=!!e.deleted_at,d=!o&&i&&i.isAfter(new Date),f=p=>{u(T=>!T&&!p?T:p?T&&p.isSame(T)?T:p:null)};E.useEffect(()=>{f(e.publish_at?Nt(e.publish_at):null)},[e.publish_at]),E.useEffect(()=>{i===null?r("publish_at",void 0):i.isValid()&&r("publish_at",i==null?void 0:i.utc().format("YYYY-MM-DDTHH:mm:00.000[Z]"))},[r,i]);const{subsite:h}=Pa().props;let m="";return h!=null&&h.aliase_name!=null&&(m=h.aliase_name),l.jsx(ai,{title:"Publishing details",summary:l.jsx(yo,{contents:[{title:"Status",component:l.jsx(La,{label:o?"Trashed":d?"Publish after":e.status==="published"?"Published":"Draft",control:o?l.jsx(Sa,{}):l.jsx(Oa,{checked:e.status==="published",onChange:p=>r("status",p.target.checked?"published":"unpublished"),onClick:p=>p.stopPropagation(),color:"primary"})})},{title:"Dates",component:l.jsxs(U,{display:"flex",flexWrap:"wrap",children:[l.jsx(U,{flexBasis:"40%",children:l.jsx(re,{variant:"body2",color:"textSecondary",children:"created:"})}),l.jsx(U,{flexBasis:"60%",children:l.jsx(re,{variant:"body2",color:"textSecondary",children:Nt(e.created_at).format("YYYY-MM-DD HH:mm")})}),l.jsx(U,{flexBasis:"40%",children:l.jsx(re,{variant:"body2",color:"textSecondary",children:"updated:"})}),l.jsx(U,{flexBasis:"60%",children:l.jsx(re,{variant:"body2",color:"textSecondary",children:Nt(e.updated_at).format("YYYY-MM-DD HH:mm")})})]})},{title:"Id and type",text:l.jsxs(l.Fragment,{children:[e.id,l.jsx("br",{}),e.type,(a==null?void 0:a.subtype)&&`:${a.subtype}`,(s==null?void 0:s.layout)&&`:${s.layout}`]})}]}),children:l.jsxs(de,{container:!0,spacing:1,children:[l.jsx(de,{item:!0,xs:3,children:l.jsx(oe,{label:"Id",value:e.id,InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,variant:"standard",margin:"dense"})}),l.jsx(de,{item:!0,xs:3,children:l.jsx(oe,{label:"Type",value:e.type,InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,variant:"standard",margin:"dense"})}),a&&l.jsxs(l.Fragment,{children:[l.jsx(de,{item:!0,xs:3,children:Yl(a)?l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!1,children:[l.jsx(at,{children:"Image type"}),l.jsx(xt,{value:a.subtype,onChange:p=>r("subtype",p.target.value),label:"Image type",fullWidth:!0,margin:"dense",children:Object.entries(ni).map(([p,T],C)=>l.jsx(qe,{value:p,children:T},C))}),l.jsx(ut,{children:"image resource type can be changed"})]}):l.jsx(oe,{label:"Subtype",value:a.subtype??"",InputProps:{readOnly:!0,disableUnderline:!0},InputLabelProps:{shrink:!0},fullWidth:!0,variant:"standard",margin:"dense"})}),l.jsx(de,{item:!0,xs:3})]}),n?l.jsx(de,{item:!0,xs:6}):s&&l.jsxs(l.Fragment,{children:[l.jsx(de,{item:!0,xs:3,children:t&&Object.entries(t).length>1?l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!1,children:[l.jsx(at,{children:"Layout"}),l.jsx(xt,{value:s.layout||"",onChange:p=>r("layout",p.target.value),label:"Layout",fullWidth:!0,children:Object.entries(t).map(([p,T],C)=>l.jsx(qe,{value:p,children:T},C))}),l.jsx(ut,{filled:!0,children:"Be careful changing layouts"})]}):l.jsx(oe,{label:"Layout",value:s.layout??"",InputProps:{readOnly:!0,disableUnderline:!0},InputLabelProps:{shrink:!0},fullWidth:!0,variant:"standard",margin:"dense"})}),l.jsx(de,{item:!0,xs:3,children:l.jsxs(rt,{variant:"outlined",fullWidth:!0,error:!1,children:[l.jsx(at,{children:"Ordering"}),l.jsx(xt,{value:s.ordering,onChange:p=>r("ordering",p.target.value),label:"Ordering",fullWidth:!0,children:Object.entries(Ec).map(([p,T],C)=>l.jsx(qe,{value:p,children:T},C))}),l.jsx(ut,{filled:!0,children:s.ordering!=="date"&&s.items_count&&s.items_count>50?"large collection!":" "})]})})]}),l.jsx(de,{item:!0,xs:3,children:l.jsxs(rt,{sx:{marginTop:1.1},children:[l.jsx(at,{shrink:!0,children:"Status"}),l.jsx(La,{label:o?"Trashed":d?"Publish after":e.status==="published"?"Published":"Draft",sx:{marginTop:1.25,marginBottom:0},control:o?l.jsx(Sa,{}):l.jsx(Oa,{checked:e.status==="published",onChange:p=>r("status",p.target.checked?"published":"unpublished"),color:"primary"})}),l.jsx(ut,{children:d?e.status==="published"?l.jsxs(l.Fragment,{children:["Will be published after"," ",l.jsx("strong",{children:"Publish at"})," date"]}):l.jsxs(l.Fragment,{children:["Switch on to publish item after"," ",l.jsx("strong",{children:"Publish at"})," date"]}):" "})]})}),l.jsx(de,{item:!0,xs:3,children:l.jsx(RT,{value:i,label:"Publish at",mask:"____-__-__ __:__",inputFormat:"YYYY-MM-DD HH:mm",ampm:!1,OpenPickerButtonProps:{size:"small"},onChange:f,renderInput:p=>l.jsx(oe,{margin:"dense",...p})})}),l.jsx(de,{item:!0,xs:3,children:l.jsx(oe,{label:"Created",value:Nt(e.created_at).format("YYYY-MM-DD HH:mm")||"",InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,variant:"standard",margin:"dense"})}),l.jsx(de,{item:!0,xs:3,children:l.jsx(oe,{label:"Updated",value:Nt(e.updated_at).format("YYYY-MM-DD HH:mm")||"",InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,variant:"standard",margin:"dense"})}),(a==null?void 0:a.contents)&&a.contents.length>0&&l.jsxs(de,{item:!0,xs:12,children:[l.jsxs(U,{display:"flex",children:[l.jsx(U,{flexBasis:"10%",children:l.jsx(re,{variant:"caption",children:"language"})}),l.jsx(U,{flexBasis:"60%",children:l.jsx(re,{variant:"caption",children:"URL"})}),l.jsx(U,{flexBasis:"10%",textAlign:"center",children:l.jsx(re,{variant:"caption",children:"preview"})})]}),a==null?void 0:a.contents.map((p,T)=>{const C=m?`${window.location.protocol}//${m}.${window.location.hostname}${window.location.port?":"+window.location.port:""}/${p.lang==="*"?"en":p.lang}/item/${a.id}:${p.slug||"_"}`:`${window.location.protocol}//${window.location.hostname}${window.location.port?":"+window.location.port:""}/${p.lang==="*"?"en":p.lang}/item/${a.id}:${p.slug||"_"}`;return l.jsxs(U,{display:"flex",alignItems:"center",children:[l.jsx(U,{flexBasis:"10%",children:p.lang}),l.jsx(U,{flexBasis:"60%",children:l.jsx(ri,{text:C})}),l.jsx(U,{flexBasis:"10%",textAlign:"center",children:l.jsx(Me,{size:"small",color:"primary",onClick:()=>window.open(C,"_blank"),children:l.jsx(Za,{fontSize:"small"})})})]},T)})]}),e.type==="highlight"&&(n==null?void 0:n.contents)&&n.contents.length>0&&l.jsxs(de,{item:!0,xs:12,children:[l.jsxs(U,{display:"flex",children:[l.jsx(U,{flexBasis:"10%",children:l.jsx(re,{variant:"caption",children:"language"})}),l.jsx(U,{flexBasis:"60%",children:l.jsx(re,{variant:"caption",children:"URL"})}),l.jsx(U,{flexBasis:"10%",textAlign:"center",children:l.jsx(re,{variant:"caption",children:"preview"})})]}),n==null?void 0:n.contents.map((p,T)=>{const C=`${window.origin}/${p.lang==="*"?"en":p.lang}/annualreport/${n.id}:${p.slug||"_"}`;return l.jsxs(U,{display:"flex",alignItems:"center",children:[l.jsx(U,{flexBasis:"10%",children:p.lang}),l.jsx(U,{flexBasis:"60%",children:l.jsx(ri,{text:C})}),l.jsx(U,{flexBasis:"10%",textAlign:"center",children:l.jsx(Me,{size:"small",color:"primary",onClick:()=>window.open(C,"_blank"),children:l.jsx(Za,{fontSize:"small"})})})]},T)})]})]})})};export{Fg as A,Ha as B,Nl as C,jg as D,Yg as I,jl as L,Vg as M,Ur as R,yo as S,A0 as V,rm as _,Tl as a,Bg as b,Hg as c,sm as d,Bd as e,$l as f,Qi as g,jr as h,_0 as i,P0 as j,Yl as k,Ug as l,kt as m,ja as p,qd as u};
