import{j as e,r as l}from"./client-ZKQMN23D.js";import{d as m}from"./index-BmtA0KFl.js";import{d as q,a as H}from"./RestoreFromTrash-BSEz2N4A.js";import{d as N}from"./DeleteForever-Dtg3yl_d.js";import{i as P}from"./identifier-CVVhstXo.js";import{r as $,T as I}from"./Typography-BWGjmqeb.js";import{l as d}from"./index.m-DI45-rQC.js";import{C as v}from"./Confirm-BbQLBhxQ.js";import{S as b}from"./Section-DFrm5BHt.js";import{u as G}from"./app-Ck7UBcd6.js";import{A as L}from"./AppBarHeader-ClGrA22v.js";import{C as O}from"./ContentScroll-D9O6pf62.js";import{B as s}from"./Button-DZLqdWgp.js";import{G as a}from"./Grid-CEw1b08m.js";import{T as y,F as U}from"./TextField-CljZtUFq.js";import{F as V}from"./FormLabel-BEbkwqxG.js";import{I as z,S as J}from"./Select-lP02voS4.js";import{M as K}from"./MenuItem-Cc58SkCm.js";import{B as T}from"./Box-BUYeTdQC.js";import"./_commonjsHelpers-BosuxZz1.js";import"./browser-D9eauH0H.js";import"./index-Ax6NoBCi.js";import"./ButtonBase-D5ln7if4.js";import"./useSlotProps-DL7U-EaF.js";import"./extendSxProp-5tSxLnIE.js";import"./Grow-1FiP9biG.js";import"./Menu-BCMxz3f0.js";import"./useFormControl-CO6OogGI.js";import"./GlobalStyles-D_Xt43Ne.js";import"./index-AoxikDaj.js";import"./List-Dh7P2IJ_.js";import"./Stack-B2ZIJkbS.js";import"./index-DxE8ywAI.js";import"./dayjs.min-BIwLhz4I.js";import"./utc-BUuWioZ3.js";import"./ThemeProvider-DYHukqtx.js";import"./index-BXImJBSP.js";import"./Close-DeKdm8LF.js";import"./ListItemIcon-BNV_poop.js";import"./ListItemText-BFrp0ozb.js";import"./Tooltip-B-18blil.js";import"./Popper-BKUAU8_E.js";import"./InputAdornment-C_Fu6lZu.js";import"./usePreviousProps-eB1Ppz6I.js";import"./SwitchBase-CcKqqM_7.js";var g={},Q=P;Object.defineProperty(g,"__esModule",{value:!0});var E=g.default=void 0,X=Q($()),Y=e;E=g.default=(0,X.default)((0,Y.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");const Oe=({userModel:t,errors:i,roles:R,can:o})=>{var S,C;const{needSave:p,setNeedSave:h}=G(),[c,f]=l.useState(t.name),[n,u]=l.useState(t.email),[x,j]=l.useState(t.role);l.useEffect(()=>{f(t.name),u(t.email),j(t.role)},[t]),l.useEffect(()=>{h(c!==t.name||n!==t.email||x!==t.role)},[h,t,c,n,x]);const _=()=>{f(t.name),u(t.email),j(t.role)},F=()=>{m.Inertia.patch(d("admin.users.update",{user:t}).toString(),{email:n,name:c,role:x},{preserveState:!0}),h(!1)},B=!!t.deleted_at,M=()=>{m.Inertia.post(d("admin.users.trash",{id:t.id}))},k=()=>{m.Inertia.post(d("admin.users.restore",{id:t.id}))},w=()=>{m.Inertia.delete(d("admin.users.destroy",{id:t.id}))},D=()=>{p||m.Inertia.post(d("admin.users.resetPassword",{user:t}),void 0,{preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Edit User",children:[e.jsx(s,{variant:"outlined",onClick:_,color:"secondary",disabled:!p,children:"Reset"}),e.jsx(s,{variant:p?"contained":"outlined",onClick:F,color:"secondary",disabled:!p,children:"Save"})]}),e.jsxs(O,{children:[e.jsx(b,{title:"User details",open:!0,children:e.jsxs(a,{container:!0,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(y,{value:c,onChange:r=>f(r.target.value),label:"Name",variant:"outlined",fullWidth:!0,helperText:i==null?void 0:i.name})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(y,{value:n,onChange:r=>u(r.target.value),label:"Email address",variant:"outlined",fullWidth:!0,helperText:i==null?void 0:i.email})}),((S=o==null?void 0:o.role)==null?void 0:S.update)&&e.jsx(a,{item:!0,xs:12,children:e.jsxs(V,{variant:"outlined",fullWidth:!0,children:[e.jsx(z,{children:"Role"}),e.jsx(J,{value:x,onChange:r=>j(r.target.value),label:"Type",fullWidth:!0,children:Object.entries(R).map(([r,A],W)=>e.jsx(K,{value:r,children:A},W))}),e.jsx(U,{children:i==null?void 0:i.role})]})})]})}),e.jsx(b,{title:"Actions",children:e.jsxs(a,{container:!0,spacing:4,alignItems:"baseline",children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(T,{display:"flex",flexDirection:"column",alignItems:"start",children:[e.jsx(I,{variant:"body1",children:"The password can be changed with a reset link that will be sent to the email address."}),e.jsx(s,{variant:"contained",disabled:n!==t.email,onClick:D,startIcon:e.jsx(E,{}),children:"Send reset link"}),e.jsx(I,{variant:"caption",children:n!==t.email?"Email address has changed, save first.":e.jsx("br",{})})]})}),((C=o==null?void 0:o.user)==null?void 0:C.delete)&&e.jsx(e.Fragment,{children:e.jsx(a,{item:!0,xs:12,children:e.jsx(T,{display:"flex",gap:2,children:B?e.jsxs(e.Fragment,{children:[e.jsx(v,{onConfirm:k,children:e.jsx(s,{variant:"contained",startIcon:e.jsx(q,{}),children:"Restore from Trash"})}),e.jsx(v,{onConfirm:w,children:e.jsx(s,{variant:"contained",color:"error",startIcon:e.jsx(N,{}),children:"Delete permanently"})})]}):e.jsx(e.Fragment,{children:e.jsx(v,{onConfirm:M,children:e.jsx(s,{variant:"contained",color:"primary",startIcon:e.jsx(H,{}),children:"Move to Trash"})})})})})})]})})]})]})};export{Oe as default};
