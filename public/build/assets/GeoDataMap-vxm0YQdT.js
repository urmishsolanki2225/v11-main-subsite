import{r as c,j as n,c as b}from"./client-ZKQMN23D.js";import{Themed as j}from"./Themed-BvoZDduG.js";import{Map as _}from"./Map-D6a-smP6.js";import{B as $}from"./Box-BUYeTdQC.js";import{G as y}from"./GlobalStyles-D_Xt43Ne.js";import"./_commonjsHelpers-BosuxZz1.js";import"./identifier-CVVhstXo.js";import"./ThemeProvider-DYHukqtx.js";import"./index-AoxikDaj.js";import"./Grow-1FiP9biG.js";import"./useSlotProps-DL7U-EaF.js";import"./extendSxProp-5tSxLnIE.js";import"./ua-parser-BZV2fO3c.js";import"./index-D3ylJrlI.js";import"./useMediaQuery-DtNN74dm.js";import"./Tooltip-B-18blil.js";import"./Popper-BKUAU8_E.js";const D=({map:e,countries:a})=>{const d=c.useCallback(t=>{if(t===void 0)return`map-${e.id}-legend-undefined`;const i=e.config.legend.findIndex(({to:r,labels:s})=>s?s.includes(String(t)):r!==void 0?Number(t)<r:!0);return`map-${e.id}-legend-class-${i}`},[e.config.legend,e.id]),f=c.useCallback((t,i)=>{if(!(!t||i===void 0))switch(t.data_type){case"string":case"country":return i;case"percentage":return`${t.label}: ${Number(i).toFixed(1)}%`;default:return`${t.label}: ${Number(i).toFixed(0)}`}},[]),g=c.useMemo(()=>{if(!e.dataset)return{};const t=e.dataset.columns.find(({id:r})=>r===e.config.color_column_id),i=e.dataset.columns.filter(({id:r})=>e.config.display_column_ids.includes(r));return Object.fromEntries(a.map(r=>{var m;const s={...r},l=(m=t==null?void 0:t.values)==null?void 0:m.find(({country_id:o})=>o===r.id);return s.className=d(l==null?void 0:l.value),s.annotationLabel=i.map(o=>{var u,p;return f(o,(p=(u=o==null?void 0:o.values)==null?void 0:u.find(({country_id:x})=>x===r.id))==null?void 0:p.value)}).filter(o=>!!o).join(`
`),[r.country_code,s]}))},[a,f,d,e.config.color_column_id,e.config.display_column_ids,e.dataset]);return n.jsxs($,{children:[n.jsx(y,{styles:Object.fromEntries(e.config.legend.map(({color:t},i)=>[`.map-${e.id}-legend-class-${i}`,{fill:t}]))}),n.jsx(_,{mapData:g})]})},C=(e,a)=>{b(e).render(n.jsx(j,{children:n.jsx(D,{...a})}))};window.renderGeoDataMap=C;export{D as GeoDataMapDisplay,C as renderGeoDataMap};
