import{j as e,r as l}from"./client-ZKQMN23D.js";import{d as m}from"./index-Cvft0mqj.js";import{d as q,a as H}from"./RestoreFromTrash-CjsypzMU.js";import{d as N}from"./DeleteForever-C4cJDXVA.js";import{i as P}from"./identifier-COQS9w1e.js";import{r as $,T as I}from"./Typography-DYGSvwsR.js";import{l as d}from"./index.m-DI45-rQC.js";import{C as v}from"./Confirm-B07EF7Xb.js";import{S as b}from"./Section-NVlsOAso.js";import{u as G}from"./app-FM1-Ikzw.js";import{A as L}from"./AppBarHeader-DfUwDWAG.js";import{C as O}from"./ContentScroll-CQWUddHm.js";import{B as s}from"./Button-8kMDeHcM.js";import{G as a}from"./Grid-DLryTqtI.js";import{T as y,F as U}from"./TextField-sycmgB1j.js";import{F as V}from"./FormLabel-BwLMeq7e.js";import{I as z,S as J}from"./Select-BviP6ddm.js";import{M as K}from"./MenuItem-BQV6VCqx.js";import{B as T}from"./Box-CGz8vZlR.js";import"./_commonjsHelpers-BosuxZz1.js";import"./browser-D9eauH0H.js";import"./index-edoyAQHv.js";import"./ButtonBase-D7fXzbc-.js";import"./useSlotProps-5g1mADCy.js";import"./index-D4Gjge3h.js";import"./extendSxProp-BsQwgIIR.js";import"./Grow-sQgJtlQN.js";import"./useTheme-BwdP6VHP.js";import"./useThemeWithoutDefault-CDyP3F16.js";import"./Menu-BdDXEdD9.js";import"./useFormControl-CO6OogGI.js";import"./GlobalStyles-BztJkOC0.js";import"./List-g_COJ0Le.js";import"./Stack-D_Bp_Uwa.js";import"./useThemeProps-BhHsu7W2.js";import"./getThemeProps-wzNSIbEv.js";import"./index-DxE8ywAI.js";import"./dayjs.min-BIwLhz4I.js";import"./utc-BUuWioZ3.js";import"./ThemeProvider-BEZwFSXz.js";import"./Close-Cx_ZrGyk.js";import"./ListItemIcon-CrE8LiDf.js";import"./ListItemText-Cm8rKoNI.js";import"./Tooltip-BU7xgxFh.js";import"./Popper-C2x4ipkJ.js";import"./InputAdornment-Cwt13x1-.js";import"./usePreviousProps-eB1Ppz6I.js";import"./SwitchBase-XH_hwTUJ.js";var g={},Q=P;Object.defineProperty(g,"__esModule",{value:!0});var E=g.default=void 0,X=Q($()),Y=e;E=g.default=(0,X.default)((0,Y.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");const ze=({userModel:t,errors:i,roles:R,can:o})=>{var S,C;const{needSave:p,setNeedSave:h}=G(),[c,f]=l.useState(t.name),[n,u]=l.useState(t.email),[x,j]=l.useState(t.role);l.useEffect(()=>{f(t.name),u(t.email),j(t.role)},[t]),l.useEffect(()=>{h(c!==t.name||n!==t.email||x!==t.role)},[h,t,c,n,x]);const _=()=>{f(t.name),u(t.email),j(t.role)},F=()=>{m.Inertia.patch(d("admin.users.update",{user:t}).toString(),{email:n,name:c,role:x},{preserveState:!0}),h(!1)},B=!!t.deleted_at,M=()=>{m.Inertia.post(d("admin.users.trash",{id:t.id}))},k=()=>{m.Inertia.post(d("admin.users.restore",{id:t.id}))},w=()=>{m.Inertia.delete(d("admin.users.destroy",{id:t.id}))},D=()=>{p||m.Inertia.post(d("admin.users.resetPassword",{user:t}),void 0,{preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:"Edit User",children:[e.jsx(s,{variant:"outlined",onClick:_,color:"secondary",disabled:!p,children:"Reset"}),e.jsx(s,{variant:p?"contained":"outlined",onClick:F,color:"secondary",disabled:!p,children:"Save"})]}),e.jsxs(O,{children:[e.jsx(b,{title:"User details",open:!0,children:e.jsxs(a,{container:!0,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(y,{value:c,onChange:r=>f(r.target.value),label:"Name",variant:"outlined",fullWidth:!0,helperText:i==null?void 0:i.name})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(y,{value:n,onChange:r=>u(r.target.value),label:"Email address",variant:"outlined",fullWidth:!0,helperText:i==null?void 0:i.email})}),((S=o==null?void 0:o.role)==null?void 0:S.update)&&e.jsx(a,{item:!0,xs:12,children:e.jsxs(V,{variant:"outlined",fullWidth:!0,children:[e.jsx(z,{children:"Role"}),e.jsx(J,{value:x,onChange:r=>j(r.target.value),label:"Type",fullWidth:!0,children:Object.entries(R).map(([r,A],W)=>e.jsx(K,{value:r,children:A},W))}),e.jsx(U,{children:i==null?void 0:i.role})]})})]})}),e.jsx(b,{title:"Actions",children:e.jsxs(a,{container:!0,spacing:4,alignItems:"baseline",children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(T,{display:"flex",flexDirection:"column",alignItems:"start",children:[e.jsx(I,{variant:"body1",children:"The password can be changed with a reset link that will be sent to the email address."}),e.jsx(s,{variant:"contained",disabled:n!==t.email,onClick:D,startIcon:e.jsx(E,{}),children:"Send reset link"}),e.jsx(I,{variant:"caption",children:n!==t.email?"Email address has changed, save first.":e.jsx("br",{})})]})}),((C=o==null?void 0:o.user)==null?void 0:C.delete)&&e.jsx(e.Fragment,{children:e.jsx(a,{item:!0,xs:12,children:e.jsx(T,{display:"flex",gap:2,children:B?e.jsxs(e.Fragment,{children:[e.jsx(v,{onConfirm:k,children:e.jsx(s,{variant:"contained",startIcon:e.jsx(q,{}),children:"Restore from Trash"})}),e.jsx(v,{onConfirm:w,children:e.jsx(s,{variant:"contained",color:"error",startIcon:e.jsx(N,{}),children:"Delete permanently"})})]}):e.jsx(e.Fragment,{children:e.jsx(v,{onConfirm:M,children:e.jsx(s,{variant:"contained",color:"primary",startIcon:e.jsx(H,{}),children:"Move to Trash"})})})})})})]})})]})]})};export{ze as default};
