import{a as J,T as X,b as fe}from"./escape-highlight--kF8Jl-E.js";import{c as le,i as he,n as ge,u as me}from"./useConnector-ByizAAyX.js";function ve(e,t,r){return e.state.isHierarchicalFacet(t)?e.state.isHierarchicalFacetRefined(t,r):e.state.isConjunctiveFacet(t)?e.state.isFacetRefined(t,r):e.state.isDisjunctiveFacetRefined(t,r)}function K(e){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(e)}function ye(e,t){return be(e)||Se(e,t)||pe(e,t)||de()}function de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(e,t){if(e){if(typeof e=="string")return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}}function Y(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Se(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,a,w,g=[],u=!0,m=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(u=(i=a.call(r)).done)&&(g.push(i.value),g.length!==t);u=!0);}catch(p){m=!0,c=p}finally{try{if(!u&&r.return!=null&&(w=r.return(),Object(w)!==w))return}finally{if(m)throw c}}return g}}function be(e){if(Array.isArray(e))return e}function Fe(e){var t=e.instantSearchInstance,r=e.helper,i=e.attribute,c=e.widgetType,a=function(){for(var g=arguments.length,u=new Array(g),m=0;m<g;m++)u[m]=arguments[m];var p=u[1],T=u[2],$=T===void 0?"Filter Applied":T,j=u[0].split(":"),V=ye(j,2),L=V[0],x=V[1],R=typeof i=="string"?i:i(p);u.length===1&&K(u[0])==="object"?t.sendEventToInsights(u[0]):L==="click"&&(u.length===2||u.length===3)&&(ve(r,R,p)||t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:c,eventType:L,eventModifier:x,payload:{eventName:$,index:r.getIndex(),filters:["".concat(R,":").concat(p)]},attribute:R}))};return a}function A(e){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(e)}var we=["name","escapedValue"],Re=["escapedValue","value"];function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(i){O(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function O(e,t,r){return t=Pe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e){var t=Te(e,"string");return A(t)==="symbol"?t:String(t)}function Te(e,t){if(A(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(A(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ee(e,t){if(e==null)return{};var r=Me(e,t),i,c;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)i=a[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Me(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,a;for(a=0;a<i.length;a++)c=i[a],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}var U=le({name:"refinement-list",connector:!0}),te=["isRefined","count:desc","name:asc"],Ie=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ge;return he(t,U()),function(i){var c=i||{},a=c.attribute,w=c.operator,g=w===void 0?"or":w,u=c.limit,m=u===void 0?10:u,p=c.showMore,T=p===void 0?!1:p,$=c.showMoreLimit,j=$===void 0?20:$,V=c.sortBy,L=V===void 0?te:V,x=c.escapeFacetValues,R=x===void 0?!0:x,k=c.transformItems,z=k===void 0?function(h){return h}:k;if(!a)throw new Error(U("The `attribute` option is required."));if(!/^(and|or)$/.test(g))throw new Error(U('The `operator` must one of: `"and"`, `"or"` (got "'.concat(g,'").')));if(T===!0&&j<=m)throw new Error(U("`showMoreLimit` should be greater than `limit`."));var re=function(n){var l=n.name,s=n.escapedValue,f=ee(n,we);return o(o({},f),{},{value:s,label:l,highlighted:l})},C,H=[],B=!0,G,W,E=!1,q=function(){};function ne(){q()}function ae(h,n){return function(){E=!E,n.render(h)}}function N(){return E?j:m}var D=function(){return function(){}},ie=function(n,l){return function(s){return function(f){var P=s.instantSearchInstance,M=s.results;if(f===""&&H)t(o(o({},l.getWidgetRenderState(o(o({},s),{},{results:C}))),{},{instantSearchInstance:P}),!1);else{var v={highlightPreTag:R?J.highlightPreTag:X.highlightPreTag,highlightPostTag:R?J.highlightPostTag:X.highlightPostTag};n.searchForFacetValues(a,f,Math.min(N(),100),v).then(function(y){var S=R?fe(y.facetHits):y.facetHits,d=z(S.map(function(b){var F=b.escapedValue,I=b.value,Q=ee(b,Re);return o(o({},Q),{},{value:F,label:I})}),{results:M});t(o(o({},l.getWidgetRenderState(o(o({},s),{},{results:C}))),{},{items:d,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:P}),!1)})}}}};return{$$type:"ais.refinementList",init:function(n){t(o(o({},this.getWidgetRenderState(n)),{},{instantSearchInstance:n.instantSearchInstance}),!0)},render:function(n){t(o(o({},this.getWidgetRenderState(n)),{},{instantSearchInstance:n.instantSearchInstance}),!1)},getRenderState:function(n,l){return o(o({},n),{},{refinementList:o(o({},n.refinementList),{},O({},a,this.getWidgetRenderState(l)))})},getWidgetRenderState:function(n){var l=this,s=n.results,f=n.state,P=n.createURL,M=n.instantSearchInstance,v=n.helper,y=[],S=[];if((!W||!G||!D)&&(W=Fe({instantSearchInstance:M,helper:v,attribute:a,widgetType:this.$$type}),G=function(_){W("click:internal",_),v.toggleFacetRefinement(a,_).search()},D=ie(v,this)),s){var d=s.getFacetValues(a,{sortBy:L,facetOrdering:L===te});S=d&&Array.isArray(d)?d:[],y=z(S.slice(0,N()).map(re),{results:s});var b=f.maxValuesPerFacet,F=N();B=b>F?S.length<=F:S.length<F,C=s,H=y,n.results&&(q=ae(n,this))}var I=D&&D(n),Q=E&&H.length>m,oe=T&&!B,ce=Q||oe;return{createURL:function(_){return P(function(ue){return l.getWidgetUiState(ue,{searchParameters:f.resetPage().toggleFacetRefinement(a,_),helper:v})})},items:y,refine:G,searchForItems:I,isFromSearch:!1,canRefine:y.length>0,widgetParams:i,isShowingMore:E,canToggleShowMore:ce,toggleShowMore:ne,sendEvent:W,hasExhaustiveItems:B}},dispose:function(n){var l=n.state;r();var s=l.setQueryParameter("maxValuesPerFacet",void 0);return g==="and"?s.removeFacet(a):s.removeDisjunctiveFacet(a)},getWidgetUiState:function(n,l){var s=l.searchParameters,f=g==="or"?s.getDisjunctiveRefinements(a):s.getConjunctiveRefinements(a);return f.length?o(o({},n),{},{refinementList:o(o({},n.refinementList),{},O({},a,f))}):n},getWidgetSearchParameters:function(n,l){var s=l.uiState,f=g==="or";if(n.isHierarchicalFacet(a)||f&&n.isConjunctiveFacet(a)||!f&&n.isDisjunctiveFacet(a))return n;var P=s.refinementList&&s.refinementList[a],M=n.clearRefinements(a),v=f?M.addDisjunctiveFacet(a):M.addFacet(a),y=v.maxValuesPerFacet||0,S=Math.max(y,T?j:m),d=v.setQueryParameter("maxValuesPerFacet",S);if(!P){var b=f?"disjunctiveFacetsRefinements":"facetsRefinements";return d.setQueryParameters(O({},b,o(o({},d[b]),{},O({},a,[]))))}return P.reduce(function(F,I){return f?F.addDisjunctiveFacetRefinement(a,I):F.addFacetRefinement(a,I)},d)}}}};function Le(e,t){return me(Ie,e,t)}export{Le as u};
