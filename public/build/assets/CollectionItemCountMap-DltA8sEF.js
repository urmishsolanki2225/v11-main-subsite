import{r as g,j as f,c as N}from"./client-ZKQMN23D.js";import{a as D}from"./axios-CMJq23T0.js";import{g as P}from"./_commonjsHelpers-BosuxZz1.js";import{d as R}from"./dayjs.min-BIwLhz4I.js";import{u as G}from"./utc-BUuWioZ3.js";import{Themed as A}from"./Themed-C1Um3MUd.js";import{Map as K}from"./Map-CJuo-nUz.js";import{SidebarItems as T}from"./SidebarItems-CuYVJ5W3.js";import{G as H}from"./GlobalStyles-BztJkOC0.js";import"./index-BDIa4gQt.js";import"./identifier-COQS9w1e.js";import"./ThemeProvider-BEZwFSXz.js";import"./useThemeWithoutDefault-CDyP3F16.js";import"./index-D4Gjge3h.js";import"./Grow-sQgJtlQN.js";import"./useSlotProps-5g1mADCy.js";import"./extendSxProp-BsQwgIIR.js";import"./useTheme-BwdP6VHP.js";import"./ua-parser-BZV2fO3c.js";import"./index-D3ylJrlI.js";import"./useMediaQuery-Cj2Lsz-Q.js";import"./getThemeProps-wzNSIbEv.js";import"./Tooltip-BU7xgxFh.js";import"./Popper-C2x4ipkJ.js";var L={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const k=L,$={};for(const e of Object.keys(k))$[k[e]]=e;const l={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var E=l;for(const e of Object.keys(l)){if(!("channels"in l[e]))throw new Error("missing channels property: "+e);if(!("labels"in l[e]))throw new Error("missing channel labels property: "+e);if(l[e].labels.length!==l[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:o,labels:r}=l[e];delete l[e].channels,delete l[e].labels,Object.defineProperty(l[e],"channels",{value:o}),Object.defineProperty(l[e],"labels",{value:r})}l.rgb.hsl=function(e){const o=e[0]/255,r=e[1]/255,n=e[2]/255,t=Math.min(o,r,n),s=Math.max(o,r,n),c=s-t;let a,i;s===t?a=0:o===s?a=(r-n)/c:r===s?a=2+(n-o)/c:n===s&&(a=4+(o-r)/c),a=Math.min(a*60,360),a<0&&(a+=360);const u=(t+s)/2;return s===t?i=0:u<=.5?i=c/(s+t):i=c/(2-s-t),[a,i*100,u*100]};l.rgb.hsv=function(e){let o,r,n,t,s;const c=e[0]/255,a=e[1]/255,i=e[2]/255,u=Math.max(c,a,i),h=u-Math.min(c,a,i),m=function(y){return(u-y)/6/h+1/2};return h===0?(t=0,s=0):(s=h/u,o=m(c),r=m(a),n=m(i),c===u?t=n-r:a===u?t=1/3+o-n:i===u&&(t=2/3+r-o),t<0?t+=1:t>1&&(t-=1)),[t*360,s*100,u*100]};l.rgb.hwb=function(e){const o=e[0],r=e[1];let n=e[2];const t=l.rgb.hsl(e)[0],s=1/255*Math.min(o,Math.min(r,n));return n=1-1/255*Math.max(o,Math.max(r,n)),[t,s*100,n*100]};l.rgb.cmyk=function(e){const o=e[0]/255,r=e[1]/255,n=e[2]/255,t=Math.min(1-o,1-r,1-n),s=(1-o-t)/(1-t)||0,c=(1-r-t)/(1-t)||0,a=(1-n-t)/(1-t)||0;return[s*100,c*100,a*100,t*100]};function U(e,o){return(e[0]-o[0])**2+(e[1]-o[1])**2+(e[2]-o[2])**2}l.rgb.keyword=function(e){const o=$[e];if(o)return o;let r=1/0,n;for(const t of Object.keys(k)){const s=k[t],c=U(e,s);c<r&&(r=c,n=t)}return n};l.keyword.rgb=function(e){return k[e]};l.rgb.xyz=function(e){let o=e[0]/255,r=e[1]/255,n=e[2]/255;o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const t=o*.4124+r*.3576+n*.1805,s=o*.2126+r*.7152+n*.0722,c=o*.0193+r*.1192+n*.9505;return[t*100,s*100,c*100]};l.rgb.lab=function(e){const o=l.rgb.xyz(e);let r=o[0],n=o[1],t=o[2];r/=95.047,n/=100,t/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,t=t>.008856?t**(1/3):7.787*t+16/116;const s=116*n-16,c=500*(r-n),a=200*(n-t);return[s,c,a]};l.hsl.rgb=function(e){const o=e[0]/360,r=e[1]/100,n=e[2]/100;let t,s,c;if(r===0)return c=n*255,[c,c,c];n<.5?t=n*(1+r):t=n+r-n*r;const a=2*n-t,i=[0,0,0];for(let u=0;u<3;u++)s=o+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?c=a+(t-a)*6*s:2*s<1?c=t:3*s<2?c=a+(t-a)*(2/3-s)*6:c=a,i[u]=c*255;return i};l.hsl.hsv=function(e){const o=e[0];let r=e[1]/100,n=e[2]/100,t=r;const s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,t*=s<=1?s:2-s;const c=(n+r)/2,a=n===0?2*t/(s+t):2*r/(n+r);return[o,a*100,c*100]};l.hsv.rgb=function(e){const o=e[0]/60,r=e[1]/100;let n=e[2]/100;const t=Math.floor(o)%6,s=o-Math.floor(o),c=255*n*(1-r),a=255*n*(1-r*s),i=255*n*(1-r*(1-s));switch(n*=255,t){case 0:return[n,i,c];case 1:return[a,n,c];case 2:return[c,n,i];case 3:return[c,a,n];case 4:return[i,c,n];case 5:return[n,c,a]}};l.hsv.hsl=function(e){const o=e[0],r=e[1]/100,n=e[2]/100,t=Math.max(n,.01);let s,c;c=(2-r)*n;const a=(2-r)*t;return s=r*t,s/=a<=1?a:2-a,s=s||0,c/=2,[o,s*100,c*100]};l.hwb.rgb=function(e){const o=e[0]/360;let r=e[1]/100,n=e[2]/100;const t=r+n;let s;t>1&&(r/=t,n/=t);const c=Math.floor(6*o),a=1-n;s=6*o-c,c&1&&(s=1-s);const i=r+s*(a-r);let u,h,m;switch(c){default:case 6:case 0:u=a,h=i,m=r;break;case 1:u=i,h=a,m=r;break;case 2:u=r,h=a,m=i;break;case 3:u=r,h=i,m=a;break;case 4:u=i,h=r,m=a;break;case 5:u=a,h=r,m=i;break}return[u*255,h*255,m*255]};l.cmyk.rgb=function(e){const o=e[0]/100,r=e[1]/100,n=e[2]/100,t=e[3]/100,s=1-Math.min(1,o*(1-t)+t),c=1-Math.min(1,r*(1-t)+t),a=1-Math.min(1,n*(1-t)+t);return[s*255,c*255,a*255]};l.xyz.rgb=function(e){const o=e[0]/100,r=e[1]/100,n=e[2]/100;let t,s,c;return t=o*3.2406+r*-1.5372+n*-.4986,s=o*-.9689+r*1.8758+n*.0415,c=o*.0557+r*-.204+n*1.057,t=t>.0031308?1.055*t**(1/2.4)-.055:t*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,c=c>.0031308?1.055*c**(1/2.4)-.055:c*12.92,t=Math.min(Math.max(0,t),1),s=Math.min(Math.max(0,s),1),c=Math.min(Math.max(0,c),1),[t*255,s*255,c*255]};l.xyz.lab=function(e){let o=e[0],r=e[1],n=e[2];o/=95.047,r/=100,n/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const t=116*r-16,s=500*(o-r),c=200*(r-n);return[t,s,c]};l.lab.xyz=function(e){const o=e[0],r=e[1],n=e[2];let t,s,c;s=(o+16)/116,t=r/500+s,c=s-n/200;const a=s**3,i=t**3,u=c**3;return s=a>.008856?a:(s-16/116)/7.787,t=i>.008856?i:(t-16/116)/7.787,c=u>.008856?u:(c-16/116)/7.787,t*=95.047,s*=100,c*=108.883,[t,s,c]};l.lab.lch=function(e){const o=e[0],r=e[1],n=e[2];let t;t=Math.atan2(n,r)*360/2/Math.PI,t<0&&(t+=360);const c=Math.sqrt(r*r+n*n);return[o,c,t]};l.lch.lab=function(e){const o=e[0],r=e[1],t=e[2]/360*2*Math.PI,s=r*Math.cos(t),c=r*Math.sin(t);return[o,s,c]};l.rgb.ansi16=function(e,o=null){const[r,n,t]=e;let s=o===null?l.rgb.hsv(e)[2]:o;if(s=Math.round(s/50),s===0)return 30;let c=30+(Math.round(t/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(c+=60),c};l.hsv.ansi16=function(e){return l.rgb.ansi16(l.hsv.rgb(e),e[2])};l.rgb.ansi256=function(e){const o=e[0],r=e[1],n=e[2];return o===r&&r===n?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};l.ansi16.rgb=function(e){let o=e%10;if(o===0||o===7)return e>50&&(o+=3.5),o=o/10.5*255,[o,o,o];const r=(~~(e>50)+1)*.5,n=(o&1)*r*255,t=(o>>1&1)*r*255,s=(o>>2&1)*r*255;return[n,t,s]};l.ansi256.rgb=function(e){if(e>=232){const s=(e-232)*10+8;return[s,s,s]}e-=16;let o;const r=Math.floor(e/36)/5*255,n=Math.floor((o=e%36)/6)/5*255,t=o%6/5*255;return[r,n,t]};l.rgb.hex=function(e){const r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};l.hex.rgb=function(e){const o=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!o)return[0,0,0];let r=o[0];o[0].length===3&&(r=r.split("").map(a=>a+a).join(""));const n=parseInt(r,16),t=n>>16&255,s=n>>8&255,c=n&255;return[t,s,c]};l.rgb.hcg=function(e){const o=e[0]/255,r=e[1]/255,n=e[2]/255,t=Math.max(Math.max(o,r),n),s=Math.min(Math.min(o,r),n),c=t-s;let a,i;return c<1?a=s/(1-c):a=0,c<=0?i=0:t===o?i=(r-n)/c%6:t===r?i=2+(n-o)/c:i=4+(o-r)/c,i/=6,i%=1,[i*360,c*100,a*100]};l.hsl.hcg=function(e){const o=e[1]/100,r=e[2]/100,n=r<.5?2*o*r:2*o*(1-r);let t=0;return n<1&&(t=(r-.5*n)/(1-n)),[e[0],n*100,t*100]};l.hsv.hcg=function(e){const o=e[1]/100,r=e[2]/100,n=o*r;let t=0;return n<1&&(t=(r-n)/(1-n)),[e[0],n*100,t*100]};l.hcg.rgb=function(e){const o=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];const t=[0,0,0],s=o%1*6,c=s%1,a=1-c;let i=0;switch(Math.floor(s)){case 0:t[0]=1,t[1]=c,t[2]=0;break;case 1:t[0]=a,t[1]=1,t[2]=0;break;case 2:t[0]=0,t[1]=1,t[2]=c;break;case 3:t[0]=0,t[1]=a,t[2]=1;break;case 4:t[0]=c,t[1]=0,t[2]=1;break;default:t[0]=1,t[1]=0,t[2]=a}return i=(1-r)*n,[(r*t[0]+i)*255,(r*t[1]+i)*255,(r*t[2]+i)*255]};l.hcg.hsv=function(e){const o=e[1]/100,r=e[2]/100,n=o+r*(1-o);let t=0;return n>0&&(t=o/n),[e[0],t*100,n*100]};l.hcg.hsl=function(e){const o=e[1]/100,n=e[2]/100*(1-o)+.5*o;let t=0;return n>0&&n<.5?t=o/(2*n):n>=.5&&n<1&&(t=o/(2*(1-n))),[e[0],t*100,n*100]};l.hcg.hwb=function(e){const o=e[1]/100,r=e[2]/100,n=o+r*(1-o);return[e[0],(n-o)*100,(1-n)*100]};l.hwb.hcg=function(e){const o=e[1]/100,n=1-e[2]/100,t=n-o;let s=0;return t<1&&(s=(n-t)/(1-t)),[e[0],t*100,s*100]};l.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};l.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};l.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};l.gray.hsl=function(e){return[0,0,e[0]]};l.gray.hsv=l.gray.hsl;l.gray.hwb=function(e){return[0,100,e[0]]};l.gray.cmyk=function(e){return[0,0,0,e[0]]};l.gray.lab=function(e){return[e[0],0,0]};l.gray.hex=function(e){const o=Math.round(e[0]/100*255)&255,n=((o<<16)+(o<<8)+o).toString(16).toUpperCase();return"000000".substring(n.length)+n};l.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const M=E;function B(){const e={},o=Object.keys(M);for(let r=o.length,n=0;n<r;n++)e[o[n]]={distance:-1,parent:null};return e}function X(e){const o=B(),r=[e];for(o[e].distance=0;r.length;){const n=r.pop(),t=Object.keys(M[n]);for(let s=t.length,c=0;c<s;c++){const a=t[c],i=o[a];i.distance===-1&&(i.distance=o[n].distance+1,i.parent=n,r.unshift(a))}}return o}function J(e,o){return function(r){return o(e(r))}}function Q(e,o){const r=[o[e].parent,e];let n=M[o[e].parent][e],t=o[e].parent;for(;o[t].parent;)r.unshift(o[t].parent),n=J(M[o[t].parent][t],n),t=o[t].parent;return n.conversion=r,n}var V=function(e){const o=X(e),r={},n=Object.keys(o);for(let t=n.length,s=0;s<t;s++){const c=n[s];o[c].parent!==null&&(r[c]=Q(c,o))}return r};const _=E,W=V,p={},Y=Object.keys(_);function Z(e){const o=function(...r){const n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(o.conversion=e.conversion),o}function ee(e){const o=function(...r){const n=r[0];if(n==null)return n;n.length>1&&(r=n);const t=e(r);if(typeof t=="object")for(let s=t.length,c=0;c<s;c++)t[c]=Math.round(t[c]);return t};return"conversion"in e&&(o.conversion=e.conversion),o}Y.forEach(e=>{p[e]={},Object.defineProperty(p[e],"channels",{value:_[e].channels}),Object.defineProperty(p[e],"labels",{value:_[e].labels});const o=W(e);Object.keys(o).forEach(n=>{const t=o[n];p[e][n]=ee(t),p[e][n].raw=Z(t)})});var ne=p;const te=P(ne);R.extend(G);const oe=({collection_id:e=0,lang:o,translations:r,title:n,blurb:t,baseColor:s,cutoffs:c})=>{const[a,i]=g.useState({}),[u,h]=g.useState(),[m,y]=g.useState(!1),v=te.hex.hsl(s||"#cf2029")[0],j={"--theme-color-gradient-1":`hsl(${v} 87.5% 62.35%)`,"--theme-color-gradient-2":`hsl(${v} 67.71% 56.27%)`,"--theme-color-gradient-3":`hsl(${v} 53.36% 50.39%)`,"--theme-color-gradient-4":`hsl(${v} 52.42% 44.51%)`,"--theme-color-gradient-5":`hsl(${v} 52.53% 38.82%)`},w=g.useMemo(()=>({parent_collection:e}),[e]);g.useEffect(()=>{if(!w.parent_collection)return;const d=new AbortController;return D.get("/api/map/items_count",{params:{filter:w,lang:o},signal:d.signal}).then(x=>{if(x.data){const F={};Object.entries(x.data).forEach(([q,b])=>{let S=1;if(c!=null&&c.length&&b.items_count){const C=[...c,Number.MAX_SAFE_INTEGER];C.sort(),S=((C.findIndex(z=>b.items_count<=z)||0)+1)/C.length}F[q]={...b,className:b.items_count?"activity_base":"activity_none",opacity:S,annotationLabel:b.items_count?`${b.items_count} ${b.items_count===1?r.article:r.articles}`:""}}),i(F)}}).catch(x=>{console.warn("load mapdata",x)}),()=>d.abort()},[w,o,r,c]);const I=g.useCallback(d=>{d||h(void 0),y(!!d)},[]),O=g.useCallback(d=>{d!=null&&d.items_count?h(d):h(void 0)},[]);return f.jsxs(f.Fragment,{children:[f.jsx(H,{styles:{[`.map_${e}`]:{"--theme-color-base":s,"--theme-color-light":j["--theme-color-gradient-1"],"--theme-color-dark":j["--theme-color-gradient-5"],...j},[`.map_${e} .activity_base`]:{fill:s}}}),f.jsxs("div",{className:`map_container map_${e}`,children:[f.jsx(K,{mapData:a,onSelectCountry:O}),f.jsx("button",{className:"map_sidebar_opener",onClick:()=>{y(!0),h(void 0)},children:"?"}),f.jsxs("div",{className:`map_sidebar ${m?"active":""}`,children:[f.jsx("button",{className:`map_sidebar_closer ${u?"close_country":"close_intro"}`,onClick:()=>{y(!1),h(void 0)},children:"⨯"}),f.jsx(T,{initialContent:f.jsxs(f.Fragment,{children:[n&&f.jsx("h3",{children:n}),t&&f.jsx("div",{dangerouslySetInnerHTML:{__html:t}})]}),selectedCountry:u,filter:w,onChangeItemCount:I,lang:o})]})]})]})},re=(e,o)=>{N(e).render(f.jsx(A,{children:f.jsx(oe,{...o})}))};window.renderCollectionItemCountMap=re;export{oe as CollectionItemCountMap,re as renderCollectionItemCountMap};
