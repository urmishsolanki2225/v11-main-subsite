import{r as F}from"./client-ZKQMN23D.js";import{g as be}from"./_commonjsHelpers-BosuxZz1.js";function Hr(){}function Je(e){return Object.prototype.toString.call(e).slice(8,-1)}function Sr(e,t){if(e===void 0||typeof e!="function")throw new Error("The render function is not valid (received type ".concat(Je(e),`).

`).concat(t))}function Ke(e){var t=e.name,r=e.connector,n=r===void 0?!1:r;return["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",n?"#connector":""].join("")}function Ar(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(i){return Ke(i)}).join(", ");return function(i){return[i,"See documentation: ".concat(n)].filter(Boolean).join(`

`)}}function P(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var re=P;P.prototype._events=void 0;P.prototype._maxListeners=void 0;P.defaultMaxListeners=10;P.prototype.setMaxListeners=function(e){if(!Ze(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};P.prototype.emit=function(e){var t,r,n,i,s,a;if(this._events||(this._events={}),e==="error"&&(!this._events.error||C(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r=this._events[e],Ee(r))return!1;if(w(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(C(r))for(i=Array.prototype.slice.call(arguments,1),a=r.slice(),n=a.length,s=0;s<n;s++)a[s].apply(this,i);return!0};P.prototype.addListener=function(e,t){var r;if(!w(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,w(t.listener)?t.listener:t),this._events[e]?C(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,C(this._events[e])&&!this._events[e].warned&&(Ee(this._maxListeners)?r=P.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};P.prototype.on=P.prototype.addListener;P.prototype.once=function(e,t){if(!w(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this};P.prototype.removeListener=function(e,t){var r,n,i,s;if(!w(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||w(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(C(r)){for(s=i;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;r.length===1?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};P.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],w(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this};P.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:w(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};P.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(w(t))return 1;if(t)return t.length}return 0};P.listenerCount=function(e,t){return e.listenerCount(t)};function w(e){return typeof e=="function"}function Ze(e){return typeof e=="number"}function C(e){return typeof e=="object"&&e!==null}function Ee(e){return e===void 0}const Tr=be(re);function Ge(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}var Oe=Ge,Xe=re,Ye=Oe;function k(e,t){this.main=e,this.fn=t,this.lastResults=null}Ye(k,Xe);k.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};k.prototype.getModifiedState=function(e){return this.fn(e)};var et=k;function tt(e){return typeof e!="string"?e:String(e).replace(/^-/,"\\-")}function rt(e){return typeof e!="string"?e:e.replace(/^\\-/,"-")}var ne={escapeFacetValue:tt,unescapeFacetValue:rt};function nt(e){return typeof e=="object"&&e!==null?ie(Array.isArray(e)?[]:{},e):e}function V(e){return typeof e=="function"||Array.isArray(e)||Object.prototype.toString.call(e)==="[object Object]"}function ie(e,t){if(e===t)return e;for(var r in t)if(!(!Object.prototype.hasOwnProperty.call(t,r)||r==="__proto__"||r==="constructor")){var n=t[r],i=e[r];typeof i<"u"&&typeof n>"u"||(V(i)&&V(n)?e[r]=ie(i,n):e[r]=nt(n))}return e}function it(e){V(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];V(n)&&ie(e,n)}return e}var W=it;function st(e){return e&&Object.keys(e).length>0}var se=st;function at(e,t){if(e===null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var ae=at,q=W;function U(e){return Object.keys(e).sort().reduce(function(t,r){return t[r]=e[r],t},{})}var b={_getQueries:function(t,r){var n=[];return n.push({indexName:t,params:b._getHitsSearchParams(r)}),r.getRefinedDisjunctiveFacets().forEach(function(i){n.push({indexName:t,params:b._getDisjunctiveFacetSearchParams(r,i)})}),r.getRefinedHierarchicalFacets().forEach(function(i){var s=r.getHierarchicalFacetByName(i),a=r.getHierarchicalRefinement(i),u=r._getHierarchicalFacetSeparator(s);if(a.length>0&&a[0].split(u).length>1){var c=a[0].split(u).slice(0,-1).reduce(function(o,l,d){return o.concat({attribute:s.attributes[d],value:d===0?l:[o[o.length-1].value,l].join(u)})},[]);c.forEach(function(f,o){var l=b._getDisjunctiveFacetSearchParams(r,f.attribute,o===0);function d(p){return s.attributes.some(function(g){return g===p.split(":")[0]})}var v=(l.facetFilters||[]).reduce(function(p,g){if(Array.isArray(g)){var y=g.filter(function(_){return!d(_)});y.length>0&&p.push(y)}return typeof g=="string"&&!d(g)&&p.push(g),p},[]),m=c[o-1];o>0?l.facetFilters=v.concat(m.attribute+":"+m.value):l.facetFilters=v.length>0?v:void 0,n.push({indexName:t,params:l})})}}),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(b._getHitsHierarchicalFacetsAttributes(e)).sort(),r=b._getFacetFilters(e),n=b._getNumericFilters(e),i=b._getTagFilters(e),s={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:i};return r.length>0&&(s.facetFilters=r),n.length>0&&(s.numericFilters=n),U(q({},e.getQueryParams(),s))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=b._getFacetFilters(e,t,r),i=b._getNumericFilters(e,t),s=b._getTagFilters(e),a={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};s.length>0&&(a.tagFilters=s);var u=e.getHierarchicalFacetByName(t);return u?a.facets=b._getDisjunctiveHierarchicalFacetAttribute(e,u,r):a.facets=t,i.length>0&&(a.numericFilters=i),n.length>0&&(a.facetFilters=n),U(q({},e.getQueryParams(),a))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var r=[];return Object.keys(e.numericRefinements).forEach(function(n){var i=e.numericRefinements[n]||{};Object.keys(i).forEach(function(s){var a=i[s]||[];t!==n&&a.forEach(function(u){if(Array.isArray(u)){var c=u.map(function(f){return n+s+f});r.push(c)}else r.push(n+s+u)})})}),r},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,r){var n=[],i=e.facetsRefinements||{};Object.keys(i).sort().forEach(function(c){var f=i[c]||[];f.sort().forEach(function(o){n.push(c+":"+o)})});var s=e.facetsExcludes||{};Object.keys(s).sort().forEach(function(c){var f=s[c]||[];f.sort().forEach(function(o){n.push(c+":-"+o)})});var a=e.disjunctiveFacetsRefinements||{};Object.keys(a).sort().forEach(function(c){var f=a[c]||[];if(!(c===t||!f||f.length===0)){var o=[];f.sort().forEach(function(l){o.push(c+":"+l)}),n.push(o)}});var u=e.hierarchicalFacetsRefinements||{};return Object.keys(u).sort().forEach(function(c){var f=u[c]||[],o=f[0];if(o!==void 0){var l=e.getHierarchicalFacetByName(c),d=e._getHierarchicalFacetSeparator(l),v=e._getHierarchicalRootPath(l),m,p;if(t===c){if(o.indexOf(d)===-1||!v&&r===!0||v&&v.split(d).length===o.split(d).length)return;v?(p=v.split(d).length-1,o=v):(p=o.split(d).length-2,o=o.slice(0,o.lastIndexOf(d))),m=l.attributes[p]}else p=o.split(d).length-1,m=l.attributes[p];m&&n.push([m+":"+o])}}),n},_getHitsHierarchicalFacetsAttributes:function(e){var t=[];return e.hierarchicalFacets.reduce(function(n,i){var s=e.getHierarchicalRefinement(i.name)[0];if(!s)return n.push(i.attributes[0]),n;var a=e._getHierarchicalFacetSeparator(i),u=s.split(a).length,c=i.attributes.slice(0,u+1);return n.concat(c)},t)},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n=e._getHierarchicalFacetSeparator(t);if(r===!0){var i=e._getHierarchicalRootPath(t),s=0;return i&&(s=i.split(n).length),[t.attributes[s]]}var a=e.getHierarchicalRefinement(t.name)[0]||"",u=a.split(n).length-1;return t.attributes.slice(0,u+1)},getSearchForFacetQuery:function(e,t,r,n){var i=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,s={facetQuery:t,facetName:e};return typeof r=="number"&&(s.maxFacetHits=r),U(q({},b._getHitsSearchParams(i),s))}},ct=b,ce=function(){var t=Array.prototype.slice.call(arguments);return t.reduceRight(function(r,n){return Object.keys(Object(n)).forEach(function(i){n[i]!==void 0&&(r[i]!==void 0&&delete r[i],r[i]=n[i])}),r},{})},M=function(t,r){if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return t[n]}};function ut(e,t){return e.filter(function(r,n){return t.indexOf(r)>-1&&e.indexOf(r)===n})}var ot=ut;function we(e){if(typeof e=="number")return e;if(typeof e=="string")return parseFloat(e);if(Array.isArray(e))return e.map(we);throw new Error("The value should be a number, a parsable string or an array of those.")}var ft=we,ht=function(t){return t===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(t)},lt=ce,dt=se,vt=ae,T={addRefinement:function(t,r,n){if(T.isRefined(t,r,n))return t;var i=""+n,s=t[r]?t[r].concat(i):[i],a={};return a[r]=s,lt({},a,t)},removeRefinement:function(t,r,n){if(n===void 0)return T.clearRefinement(t,function(s,a){return r===a});var i=""+n;return T.clearRefinement(t,function(s,a){return r===a&&i===s})},toggleRefinement:function(t,r,n){if(n===void 0)throw new Error("toggleRefinement should be used with a value");return T.isRefined(t,r,n)?T.removeRefinement(t,r,n):T.addRefinement(t,r,n)},clearRefinement:function(t,r,n){if(r===void 0)return dt(t)?{}:t;if(typeof r=="string")return vt(t,[r]);if(typeof r=="function"){var i=!1,s=Object.keys(t).reduce(function(a,u){var c=t[u]||[],f=c.filter(function(o){return!r(o,u,n)});return f.length!==c.length&&(i=!0),a[u]=f,a},{});return i?s:t}},isRefined:function(t,r,n){var i=!!t[r]&&t[r].length>0;if(n===void 0||!i)return i;var s=""+n;return t[r].indexOf(s)!==-1}},mt=T,z=ce,He=M,fe=ot,X=W,Y=se,he=ae,J=ft,gt=ht,R=mt;function ue(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(r,n){return ue(t[n],r)}):e===t}function pt(e,t){return He(e,function(r){return ue(r,t)})}function x(e){var t=e?x._parseNumbers(e):{};t.userToken!==void 0&&!gt(t.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var r=this;Object.keys(t).forEach(function(n){var i=x.PARAMETERS.indexOf(n)!==-1,s=t[n]!==void 0;!i&&s&&(r[n]=t[n])})}x.PARAMETERS=Object.keys(new x);x._parseNumbers=function(e){if(e instanceof x)return e;var t={},r=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(r.forEach(function(i){var s=e[i];if(typeof s=="string"){var a=parseFloat(s);t[i]=isNaN(a)?s:a}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(i){return Array.isArray(i)?i.map(function(s){return parseFloat(s)}):i})),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach(function(i){var s=e.numericRefinements[i]||{};n[i]={},Object.keys(s).forEach(function(a){var u=s[a],c=u.map(function(f){return Array.isArray(f)?f.map(function(o){return typeof o=="string"?parseFloat(o):o}):typeof f=="string"?parseFloat(f):f});n[i][a]=c})}),t.numericRefinements=n}return X({},e,t)};x.make=function(t){var r=new x(t),n=t.hierarchicalFacets||[];return n.forEach(function(i){if(i.rootPath){var s=r.getHierarchicalRefinement(i.name);s.length>0&&s[0].indexOf(i.rootPath)!==0&&(r=r.clearRefinements(i.name)),s=r.getHierarchicalRefinement(i.name),s.length===0&&(r=r.toggleHierarchicalFacetRefinement(i.name,i.rootPath))}}),r};x.validate=function(e,t){var r=t||{};return e.tagFilters&&r.tagRefinements&&r.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&r.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&r.numericRefinements&&Y(r.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):Y(e.numericRefinements)&&r.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};x.prototype={constructor:x,clearRefinements:function(t){var r={numericRefinements:this._clearNumericRefinements(t),facetsRefinements:R.clearRefinement(this.facetsRefinements,t,"conjunctiveFacet"),facetsExcludes:R.clearRefinement(this.facetsExcludes,t,"exclude"),disjunctiveFacetsRefinements:R.clearRefinement(this.disjunctiveFacetsRefinements,t,"disjunctiveFacet"),hierarchicalFacetsRefinements:R.clearRefinement(this.hierarchicalFacetsRefinements,t,"hierarchicalFacet")};return r.numericRefinements===this.numericRefinements&&r.facetsRefinements===this.facetsRefinements&&r.facetsExcludes===this.facetsExcludes&&r.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&r.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(r)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(t){return t===this.index?this:this.setQueryParameters({index:t})},setQuery:function(t){return t===this.query?this:this.setQueryParameters({query:t})},setPage:function(t){return t===this.page?this:this.setQueryParameters({page:t})},setFacets:function(t){return this.setQueryParameters({facets:t})},setDisjunctiveFacets:function(t){return this.setQueryParameters({disjunctiveFacets:t})},setHitsPerPage:function(t){return this.hitsPerPage===t?this:this.setQueryParameters({hitsPerPage:t})},setTypoTolerance:function(t){return this.typoTolerance===t?this:this.setQueryParameters({typoTolerance:t})},addNumericRefinement:function(e,t,r){var n=J(r);if(this.isNumericRefined(e,t,n))return this;var i=X({},this.numericRefinements);return i[e]=X({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(n)):i[e][t]=[n],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsRefinements[e]||[]:[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)?this.disjunctiveFacetsRefinements[e]||[]:[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsExcludes[e]||[]:[]},removeNumericRefinement:function(e,t,r){var n=r;return n!==void 0?this.isNumericRefined(e,t,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,s){return s===e&&i.op===t&&ue(i.val,J(n))})}):this:t!==void 0?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,s){return s===e&&i.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,s){return s===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(t){if(t===void 0)return Y(this.numericRefinements)?{}:this.numericRefinements;if(typeof t=="string")return he(this.numericRefinements,[t]);if(typeof t=="function"){var r=!1,n=this.numericRefinements,i=Object.keys(n).reduce(function(s,a){var u=n[a],c={};return u=u||{},Object.keys(u).forEach(function(f){var o=u[f]||[],l=[];o.forEach(function(d){var v=t({val:d,op:f},a,"numeric");v||l.push(d)}),l.length!==o.length&&(r=!0),c[f]=l}),s[a]=c,s},{});return r?i:this.numericRefinements}},addFacet:function(t){return this.isConjunctiveFacet(t)?this:this.setQueryParameters({facets:this.facets.concat([t])})},addDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([t])})},addHierarchicalFacet:function(t){if(this.isHierarchicalFacet(t.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+t.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([t])})},addFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsRefinements,t,r)?this:this.setQueryParameters({facetsRefinements:R.addRefinement(this.facetsRefinements,t,r)})},addExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsExcludes,t,r)?this:this.setQueryParameters({facetsExcludes:R.addRefinement(this.facetsExcludes,t,r)})},addDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return R.isRefined(this.disjunctiveFacetsRefinements,t,r)?this:this.setQueryParameters({disjunctiveFacetsRefinements:R.addRefinement(this.disjunctiveFacetsRefinements,t,r)})},addTagRefinement:function(t){if(this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.concat(t)};return this.setQueryParameters(r)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(r){return r!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(r){return r!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(r){return r.name!==t})}):this},removeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsRefinements,t,r)?this.setQueryParameters({facetsRefinements:R.removeRefinement(this.facetsRefinements,t,r)}):this},removeExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsExcludes,t,r)?this.setQueryParameters({facetsExcludes:R.removeRefinement(this.facetsExcludes,t,r)}):this},removeDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return R.isRefined(this.disjunctiveFacetsRefinements,t,r)?this.setQueryParameters({disjunctiveFacetsRefinements:R.removeRefinement(this.disjunctiveFacetsRefinements,t,r)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.filter(function(n){return n!==t})};return this.setQueryParameters(r)},toggleRefinement:function(t,r){return this.toggleFacetRefinement(t,r)},toggleFacetRefinement:function(t,r){if(this.isHierarchicalFacet(t))return this.toggleHierarchicalFacetRefinement(t,r);if(this.isConjunctiveFacet(t))return this.toggleConjunctiveFacetRefinement(t,r);if(this.isDisjunctiveFacet(t))return this.toggleDisjunctiveFacetRefinement(t,r);throw new Error("Cannot refine the undeclared facet "+t+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:R.toggleRefinement(this.facetsRefinements,t,r)})},toggleExcludeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:R.toggleRefinement(this.facetsExcludes,t,r)})},toggleDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:R.toggleRefinement(this.disjunctiveFacetsRefinements,t,r)})},toggleHierarchicalFacetRefinement:function(t,r){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),i={},s=this.hierarchicalFacetsRefinements[t]!==void 0&&this.hierarchicalFacetsRefinements[t].length>0&&(this.hierarchicalFacetsRefinements[t][0]===r||this.hierarchicalFacetsRefinements[t][0].indexOf(r+n)===0);return s?r.indexOf(n)===-1?i[t]=[]:i[t]=[r.slice(0,r.lastIndexOf(n))]:i[t]=[r],this.setQueryParameters({hierarchicalFacetsRefinements:z({},i,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var r={};return r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:z({},r,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:z({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(t){return this.isTagRefined(t)?this.removeTagRefinement(t):this.addTagRefinement(t)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return this.getHierarchicalFacetByName(e)!==void 0},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(t,r){return this.isConjunctiveFacet(t)?R.isRefined(this.facetsRefinements,t,r):!1},isExcludeRefined:function(t,r){return this.isConjunctiveFacet(t)?R.isRefined(this.facetsExcludes,t,r):!1},isDisjunctiveFacetRefined:function(t,r){return this.isDisjunctiveFacet(t)?R.isRefined(this.disjunctiveFacetsRefinements,t,r):!1},isHierarchicalFacetRefined:function(t,r){if(!this.isHierarchicalFacet(t))return!1;var n=this.getHierarchicalRefinement(t);return r?n.indexOf(r)!==-1:n.length>0},isNumericRefined:function(t,r,n){if(n===void 0&&r===void 0)return!!this.numericRefinements[t];var i=this.numericRefinements[t]&&this.numericRefinements[t][r]!==void 0;if(n===void 0||!i)return i;var s=J(n),a=pt(this.numericRefinements[t][r],s)!==void 0;return i&&a},isTagRefined:function(t){return this.tagRefinements.indexOf(t)!==-1},getRefinedDisjunctiveFacets:function(){var t=this,r=fe(Object.keys(this.numericRefinements).filter(function(n){return Object.keys(t.numericRefinements[n]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(n){return t.disjunctiveFacetsRefinements[n].length>0}).concat(r).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return fe(this.hierarchicalFacets.map(function(r){return r.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(r){return t.hierarchicalFacetsRefinements[r].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(t){return e.indexOf(t)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var t=this.managedParameters,r={},n=this;return Object.keys(this).forEach(function(i){var s=n[i];t.indexOf(i)===-1&&s!==void 0&&(r[i]=s)}),r},setQueryParameter:function(t,r){if(this[t]===r)return this;var n={};return n[t]=r,this.setQueryParameters(n)},setQueryParameters:function(t){if(!t)return this;var r=x.validate(this,t);if(r)throw r;var n=this,i=x._parseNumbers(t),s=Object.keys(this).reduce(function(u,c){return u[c]=n[c],u},{}),a=Object.keys(i).reduce(function(u,c){var f=u[c]!==void 0,o=i[c]!==void 0;return f&&!o?he(u,[c]):(o&&(u[c]=i[c]),u)},s);return new this.constructor(a)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return typeof e.showParentLevel=="boolean"?e.showParentLevel:!0},getHierarchicalFacetByName:function(e){return He(this.hierarchicalFacets,function(t){return t.name===e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n=t.split(r);return n.map(function(i){return i.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var Se=x,yt=function(t){return Array.isArray(t)?t.filter(Boolean):[]},Rt=function(t,r){if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++)if(r(t[n]))return n;return-1},Ft=M,Ae=function(t,r){var n=(r||[]).map(function(i){return i.split(":")});return t.reduce(function(s,a){var u=a.split(":"),c=Ft(n,function(f){return f[0]===u[0]});return u.length>1||!c?(s[0].push(u[0]),s[1].push(u[1]),s):(s[0].push(c[0]),s[1].push(c[1]),s)},[[],[]])};function jt(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=t!==void 0,s=t===null;if(!s&&e>t||n&&i||!r)return 1;if(!n&&e<t||s&&r||!i)return-1}return 0}function Pt(e,t,r){if(!Array.isArray(e))return[];Array.isArray(r)||(r=[]);var n=e.map(function(i,s){return{criteria:t.map(function(a){return i[a]}),index:s,value:i}});return n.sort(function(s,a){for(var u=-1;++u<s.criteria.length;){var c=jt(s.criteria[u],a.criteria[u]);if(c)return u>=r.length?c:r[u]==="desc"?-c:c}return s.index-a.index}),n.map(function(i){return i.value})}var Te=Pt,_t=Ht,Qe=ne,xt=M,bt=Ae,Et=Te,Ot=Qe.escapeFacetValue,wt=Qe.unescapeFacetValue;function Ht(e){return function(r,n){var i=e.hierarchicalFacets[n],s=e.hierarchicalFacetsRefinements[i.name]&&e.hierarchicalFacetsRefinements[i.name][0]||"",a=e._getHierarchicalFacetSeparator(i),u=e._getHierarchicalRootPath(i),c=e._getHierarchicalShowParentLevel(i),f=bt(e._getHierarchicalFacetSortBy(i)),o=r.every(function(v){return v.exhaustive}),l=St(f,a,u,c,s),d=r;return u&&(d=r.slice(u.split(a).length)),d.reduce(l,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:o,data:null})}}function St(e,t,r,n,i){return function(a,u,c){var f=a;if(c>0){var o=0;for(f=a;o<c;){var l=f&&Array.isArray(f.data)?f.data:[];f=xt(l,function(v){return v.isRefined}),o++}}if(f){var d=Object.keys(u.data).map(function(v){return[v,u.data[v]]}).filter(function(v){var m=v[0];return At(m,f.path||r,i,t,r,n)});f.data=Et(d.map(function(v){var m=v[0],p=v[1];return Tt(p,m,t,wt(i),u.exhaustive)}),e[0],e[1])}return a}}function At(e,t,r,n,i,s){return i&&(e.indexOf(i)!==0||i===e)?!1:!i&&e.indexOf(n)===-1||i&&e.split(n).length-i.split(n).length===1||e.indexOf(n)===-1&&r.indexOf(n)===-1||r.indexOf(e)===0||e.indexOf(t+n)===0&&(s||e.indexOf(r)===0)}function Tt(e,t,r,n,i){var s=t.split(r);return{name:s[s.length-1].trim(),path:t,escapedValue:Ot(t),count:e,isRefined:n===t||n.indexOf(t+r)===0,exhaustive:i,data:null}}var K=yt,L=ce,De=ne,E=M,D=Rt,Qt=Ae,Dt=W,Ce=Te,le=De.escapeFacetValue,Ie=De.unescapeFacetValue,Ct=_t;function de(e){var t={};return e.forEach(function(r,n){t[r]=n}),t}function Z(e,t,r){t&&t[r]&&(e.stats=t[r])}function It(e,t){return E(e,function(n){var i=n.attributes||[];return i.indexOf(t)>-1})}function A(e,t,r){var n=t[0];this._rawResults=t;var i=this;Object.keys(n).forEach(function(o){i[o]=n[o]}),Object.keys(r||{}).forEach(function(o){i[o]=r[o]}),this.processingTimeMS=t.reduce(function(o,l){return l.processingTimeMS===void 0?o:o+l.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map(function(){return[]}),this.facets=[];var s=e.getRefinedDisjunctiveFacets(),a=de(e.facets),u=de(e.disjunctiveFacets),c=1,f=n.facets||{};Object.keys(f).forEach(function(o){var l=f[o],d=It(e.hierarchicalFacets,o);if(d){var v=d.attributes.indexOf(o),m=D(e.hierarchicalFacets,function(_){return _.name===d.name});i.hierarchicalFacets[m][v]={attribute:o,data:l,exhaustive:n.exhaustiveFacetsCount}}else{var p=e.disjunctiveFacets.indexOf(o)!==-1,g=e.facets.indexOf(o)!==-1,y;p&&(y=u[o],i.disjunctiveFacets[y]={name:o,data:l,exhaustive:n.exhaustiveFacetsCount},Z(i.disjunctiveFacets[y],n.facets_stats,o)),g&&(y=a[o],i.facets[y]={name:o,data:l,exhaustive:n.exhaustiveFacetsCount},Z(i.facets[y],n.facets_stats,o))}}),this.hierarchicalFacets=K(this.hierarchicalFacets),s.forEach(function(o){var l=t[c],d=l&&l.facets?l.facets:{},v=e.getHierarchicalFacetByName(o);Object.keys(d).forEach(function(m){var p=d[m],g;if(v){g=D(e.hierarchicalFacets,function(j){return j.name===v.name});var y=D(i.hierarchicalFacets[g],function(j){return j.attribute===m});if(y===-1)return;i.hierarchicalFacets[g][y].data=Dt({},i.hierarchicalFacets[g][y].data,p)}else{g=u[m];var _=n.facets&&n.facets[m]||{};i.disjunctiveFacets[g]={name:m,data:L({},p,_),exhaustive:l.exhaustiveFacetsCount},Z(i.disjunctiveFacets[g],l.facets_stats,m),e.disjunctiveFacetsRefinements[m]&&e.disjunctiveFacetsRefinements[m].forEach(function(j){!i.disjunctiveFacets[g].data[j]&&e.disjunctiveFacetsRefinements[m].indexOf(Ie(j))>-1&&(i.disjunctiveFacets[g].data[j]=0)})}}),c++}),e.getRefinedHierarchicalFacets().forEach(function(o){var l=e.getHierarchicalFacetByName(o),d=e._getHierarchicalFacetSeparator(l),v=e.getHierarchicalRefinement(o);v.length===0||v[0].split(d).length<2||t.slice(c).forEach(function(m){var p=m&&m.facets?m.facets:{};Object.keys(p).forEach(function(g){var y=p[g],_=D(e.hierarchicalFacets,function(O){return O.name===l.name}),j=D(i.hierarchicalFacets[_],function(O){return O.attribute===g});if(j!==-1){var H={};if(v.length>0){var S=v[0].split(d)[0];H[S]=i.hierarchicalFacets[_][j].data[S]}i.hierarchicalFacets[_][j].data=L(H,y,i.hierarchicalFacets[_][j].data)}}),c++})}),Object.keys(e.facetsExcludes).forEach(function(o){var l=e.facetsExcludes[o],d=a[o];i.facets[d]={name:o,data:f[o],exhaustive:n.exhaustiveFacetsCount},l.forEach(function(v){i.facets[d]=i.facets[d]||{name:o},i.facets[d].data=i.facets[d].data||{},i.facets[d].data[v]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(Ct(e)),this.facets=K(this.facets),this.disjunctiveFacets=K(this.disjunctiveFacets),this._state=e}A.prototype.getFacetByName=function(e){function t(r){return r.name===e}return E(this.facets,t)||E(this.disjunctiveFacets,t)||E(this.hierarchicalFacets,t)};function $t(e,t){function r(o){return o.name===t}if(e._state.isConjunctiveFacet(t)){var n=E(e.facets,r);return n?Object.keys(n.data).map(function(o){var l=le(o);return{name:o,escapedValue:l,count:n.data[o],isRefined:e._state.isFacetRefined(t,l),isExcluded:e._state.isExcludeRefined(t,o)}}):[]}else if(e._state.isDisjunctiveFacet(t)){var i=E(e.disjunctiveFacets,r);return i?Object.keys(i.data).map(function(o){var l=le(o);return{name:o,escapedValue:l,count:i.data[o],isRefined:e._state.isDisjunctiveFacetRefined(t,l)}}):[]}else if(e._state.isHierarchicalFacet(t)){var s=E(e.hierarchicalFacets,r);if(!s)return s;var a=e._state.getHierarchicalFacetByName(t),u=e._state._getHierarchicalFacetSeparator(a),c=Ie(e._state.getHierarchicalRefinement(t)[0]||"");c.indexOf(a.rootPath)===0&&(c=c.replace(a.rootPath+u,""));var f=c.split(u);return f.unshift(t),$e(s,f,0),s}}function $e(e,t,r){e.isRefined=e.name===t[r],e.data&&e.data.forEach(function(n){$e(n,t,r+1)})}function Ne(e,t,r,n){if(n=n||0,Array.isArray(t))return e(t,r[n]);if(!t.data||t.data.length===0)return t;var i=t.data.map(function(u){return Ne(e,u,r,n+1)}),s=e(i,r[n]),a=L({data:s},t);return a}A.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function Nt(e,t){return t.sort(e)}function Bt(e,t){var r=[],n=[],i=t.order||[],s=i.reduce(function(c,f,o){return c[f]=o,c},{});e.forEach(function(c){var f=c.path||c.name;s[f]!==void 0?r[s[f]]=c:n.push(c)}),r=r.filter(function(c){return c});var a=t.sortRemainingBy,u;return a==="hidden"?r:(a==="alpha"?u=[["path","name"],["asc","asc"]]:u=[["count"],["desc"]],r.concat(Ce(n,u[0],u[1])))}function Vt(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}A.prototype.getFacetValues=function(e,t){var r=$t(this,e);if(r){var n=L({},t,{sortBy:A.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),i=this,s;if(Array.isArray(r))s=[e];else{var a=i._state.getHierarchicalFacetByName(r.name);s=a.attributes}return Ne(function(u,c){if(n.facetOrdering){var f=Vt(i,c);if(f)return Bt(u,f)}if(Array.isArray(n.sortBy)){var o=Qt(n.sortBy,A.DEFAULT_SORT);return Ce(u,o[0],o[1])}else if(typeof n.sortBy=="function")return Nt(n.sortBy,u);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,s)}};A.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return ve(this.facets,e);if(this._state.isDisjunctiveFacet(e))return ve(this.disjunctiveFacets,e)};function ve(e,t){var r=E(e,function(n){return n.name===t});return r&&r.stats}A.prototype.getRefinements=function(){var e=this._state,t=this,r=[];return Object.keys(e.facetsRefinements).forEach(function(n){e.facetsRefinements[n].forEach(function(i){r.push(G(e,"facet",n,i,t.facets))})}),Object.keys(e.facetsExcludes).forEach(function(n){e.facetsExcludes[n].forEach(function(i){r.push(G(e,"exclude",n,i,t.facets))})}),Object.keys(e.disjunctiveFacetsRefinements).forEach(function(n){e.disjunctiveFacetsRefinements[n].forEach(function(i){r.push(G(e,"disjunctive",n,i,t.disjunctiveFacets))})}),Object.keys(e.hierarchicalFacetsRefinements).forEach(function(n){e.hierarchicalFacetsRefinements[n].forEach(function(i){r.push(Lt(e,n,i,t.hierarchicalFacets))})}),Object.keys(e.numericRefinements).forEach(function(n){var i=e.numericRefinements[n];Object.keys(i).forEach(function(s){i[s].forEach(function(a){r.push({type:"numeric",attributeName:n,name:a,numericValue:a,operator:s})})})}),e.tagRefinements.forEach(function(n){r.push({type:"tag",attributeName:"_tags",name:n})}),r};function G(e,t,r,n,i){var s=E(i,function(c){return c.name===r}),a=s&&s.data&&s.data[n]?s.data[n]:0,u=s&&s.exhaustive||!1;return{type:t,attributeName:r,name:n,count:a,exhaustive:u}}function Lt(e,t,r,n){var i=e.getHierarchicalFacetByName(t),s=e._getHierarchicalFacetSeparator(i),a=r.split(s),u=E(n,function(d){return d.name===t}),c=a.reduce(function(d,v){var m=d&&E(d.data,function(p){return p.name===v});return m!==void 0?m:d},u),f=c&&c.count||0,o=c&&c.exhaustive||!1,l=c&&c.path||"";return{type:"hierarchical",attributeName:t,name:l,count:f,exhaustive:o}}var Be=A,Ve="3.14.0",kt=re,Wt=et,Mt=ne.escapeFacetValue,qt=Oe,Ut=W,zt=se,Jt=ae,Q=ct,oe=Se,ee=Be,Le=Ve;function h(e,t,r){typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+Le+")"),this.setClient(e);var n=r||{};n.index=t,this.state=oe.make(n),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}qt(h,kt);h.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};h.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};h.prototype.getQuery=function(){var e=this.state;return Q._getHitsSearchParams(e)};h.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,n=Q._getQueries(r.index,r),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),t){this.client.search(n).then(function(s){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),t(null,new ee(r,s.results),r)}).catch(function(s){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),t(s,null,r)});return}return this.client.search(n).then(function(s){return i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),{content:new ee(r,s.results),state:r,_originalResponse:s}},function(s){throw i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),s})};h.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var n=r.getModifiedState(t),i=Ut({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:Jt(Q._getHitsSearchParams(n),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),s="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(s);var a=this.client.initIndex(n.index);if(typeof a.findAnswers!="function")throw new Error(s);return a.findAnswers(n.query,e.queryLanguages,i)};h.prototype.searchForFacetValues=function(e,t,r,n){var i=typeof this.client.searchForFacetValues=="function",s=typeof this.client.initIndex=="function";if(!i&&!s&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(n||{}),u=a.isDisjunctiveFacet(e),c=Q.getSearchForFacetQuery(e,t,r,a);this._currentNbQueries++;var f=this,o;return i?o=this.client.searchForFacetValues([{indexName:a.index,params:c}]):s?o=this.client.initIndex(a.index).searchForFacetValues(c):(delete c.facetName,o=this.client.search([{type:"facet",facet:e,indexName:a.index,params:c}]).then(function(d){return d.results[0]})),this.emit("searchForFacetValues",{state:a,facet:e,query:t}),o.then(function(d){return f._currentNbQueries--,f._currentNbQueries===0&&f.emit("searchQueueEmpty"),d=Array.isArray(d)?d[0]:d,d.facetHits.forEach(function(v){v.escapedValue=Mt(v.value),v.isRefined=u?a.isDisjunctiveFacetRefined(e,v.escapedValue):a.isFacetRefined(e,v.escapedValue)}),d},function(l){throw f._currentNbQueries--,f._currentNbQueries===0&&f.emit("searchQueueEmpty"),l})};h.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this};h.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this};h.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};h.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};h.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this};h.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};h.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this};h.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};h.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this};h.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this};h.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};h.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this};h.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};h.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this};h.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};h.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this};h.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};h.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)};h.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this};h.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};h.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this};h.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)};h.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)};function ke(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}h.prototype.setCurrentPage=ke;h.prototype.setPage=ke;h.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this};h.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this};h.prototype.setState=function(e){return this._change({state:oe.make(e),isPageReset:!1}),this};h.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new oe(e),this};h.prototype.hasRefinements=function(e){return zt(this.state.getNumericRefinements(e))?!0:this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):this.state.isHierarchicalFacet(e)?this.state.isHierarchicalFacetRefined(e):!1};h.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)};h.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)};h.prototype.hasTag=function(e){return this.state.isTagRefined(e)};h.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};h.prototype.getIndex=function(){return this.state.index};function We(){return this.state.page}h.prototype.getCurrentPage=We;h.prototype.getPage=We;h.prototype.getTags=function(){return this.state.tagRefinements};h.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e)){var r=this.state.getConjunctiveRefinements(e);r.forEach(function(a){t.push({value:a,type:"conjunctive"})});var n=this.state.getExcludeRefinements(e);n.forEach(function(a){t.push({value:a,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);i.forEach(function(a){t.push({value:a,type:"disjunctive"})})}var s=this.state.getNumericRefinements(e);return Object.keys(s).forEach(function(a){var u=s[a];t.push({value:u,operator:a,type:"numeric"})}),t};h.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)};h.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)};h.prototype._search=function(e){var t=this.state,r=[],n=[];e.onlyWithDerivedHelpers||(n=Q._getQueries(t.index,t),r.push({state:t,queriesCount:n.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map(function(u){var c=u.getModifiedState(t),f=c.index?Q._getQueries(c.index,c):[];return r.push({state:c,queriesCount:f.length,helper:u}),u.emit("search",{state:c,results:u.lastResults}),f}),s=Array.prototype.concat.apply(n,i),a=this._queryId++;if(this._currentNbQueries++,!s.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,r,a));try{this.client.search(s).then(this._dispatchAlgoliaResponse.bind(this,r,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(u){this.emit("error",{error:u})}};h.prototype._dispatchAlgoliaResponse=function(e,t,r){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var n=r.results.slice();e.forEach(function(i){var s=i.state,a=i.queriesCount,u=i.helper,c=n.splice(0,a);if(!s.index){u.emit("result",{results:null,state:s});return}u.lastResults=new ee(s,c),u.emit("result",{results:u.lastResults,state:s})})}};h.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};h.prototype.containsRefinement=function(e,t,r,n){return e||t.length!==0||r.length!==0||n.length!==0};h.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0};h.prototype._change=function(e){var t=e.state,r=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:r}))};h.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};h.prototype.setClient=function(e){return this.client===e?this:(typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+Le+")"),this.client=e,this)};h.prototype.getClient=function(){return this.client};h.prototype.derive=function(e){var t=new Wt(this,e);return this.derivedHelpers.push(t),t};h.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(t===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)};h.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Kt=h,Me=Kt,Zt=Se,Gt=Be;function B(e,t,r){return new Me(e,t,r)}B.version=Ve;B.AlgoliaSearchHelper=Me;B.SearchParameters=Zt;B.SearchResults=Gt;var Xt=B;const Yt=be(Xt);function te(e){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(e)}var me=Object.prototype.hasOwnProperty;function I(e,t,r){if(r!=null&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&I(e[i],t[i],r););return i===-1}if(!n||te(e)==="object"){i=0;for(n in e)if(me.call(e,n)&&++i&&!me.call(t,n)||!(n in t)||!I(e[n],t[n],r))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}function ge(e){var t,r,n;return new Yt.SearchResults(e,[{query:(t=e.query)!==null&&t!==void 0?t:"",page:(r=e.page)!==null&&r!==void 0?r:0,hitsPerPage:(n=e.hitsPerPage)!==null&&n!==void 0?n:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function $(e){"@babel/helpers - typeof";return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pe(Object(r),!0).forEach(function(n){er(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function er(e,t,r){return t=tr(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e){var t=rr(e,"string");return $(t)==="symbol"?t:String(t)}function rr(e,t){if($(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nr(e){var t=e.getHelper(),r=e.getResults()||ge(t.state),n=e.getScopedResults().map(function(i){var s=i.indexId===e.getIndexId()?r:ge(i.helper.state);return ye(ye({},i),{},{results:i.results||s})});return{results:r,scopedResults:n}}function qe(e,t){if(!e)throw new Error("Invariant failed")}var ir=F.createContext(null);function sr(){var e=F.useContext(ir);return qe(e!==null),e}var ar=F.createContext(null);function Ue(){var e=F.useContext(ar);return qe(e!==null),e}var cr=F.createContext(null);function ur(){return F.useContext(cr)}function or(e,t){return dr(e)||lr(e,t)||hr(e,t)||fr()}function fr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hr(e,t){if(e){if(typeof e=="string")return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}}function Re(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lr(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,u=[],c=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(o){f=!0,i=o}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(f)throw i}}return u}}function dr(e){if(Array.isArray(e))return e}function Fe(e){var t=F.useState(function(){return e}),r=or(t,2),n=r[0],i=r[1];return I(n,e)||i(e),n}var vr=typeof window<"u"?F.useLayoutEffect:F.useEffect;function mr(e){var t=e.widget,r=e.parentIndex,n=e.props,i=e.shouldSsr,s=F.useRef(n);F.useEffect(function(){s.current=n},[n]);var a=F.useRef(t);F.useEffect(function(){a.current=t},[t]);var u=F.useRef(null),c=i&&!r.getWidgets().includes(t),f=Ue();vr(function(){var o=a.current;if(!u.current)c||r.addWidgets([t]);else{clearTimeout(u.current);var l=I(n,s.current);l||(r.removeWidgets([o]),r.addWidgets([t]))}return function(){u.current=setTimeout(function(){f._schedule(function(){f._preventWidgetCleanup||r.removeWidgets([o])})})}},[r,t,c,f,n]),c&&r.addWidgets([t])}function N(e){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(e)}var gr=["instantSearchInstance","widgetParams"],pr=["widgetParams"];function yr(e,t){return Pr(e)||jr(e,t)||Fr(e,t)||Rr()}function Rr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(e,t){if(e){if(typeof e=="string")return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}}function je(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jr(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,a,u=[],c=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(o){f=!0,i=o}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(f)throw i}}return u}}function Pr(e){if(Array.isArray(e))return e}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pe(Object(r),!0).forEach(function(n){_r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _r(e,t,r){return t=xr(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xr(e){var t=br(e,"string");return N(t)==="symbol"?t:String(t)}function br(e,t){if(N(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(N(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xe(e,t){if(e==null)return{};var r=Er(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Er(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Qr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=ur(),i=Ue(),s=sr(),a=Fe(t),u=Fe(r),c=F.useRef(!0),f=F.useRef(null),o=F.useRef(i.status),l=F.useMemo(function(){var g=e(function(y,_){if(_){c.current=!0;return}if(c.current){var j=y.instantSearchInstance;y.widgetParams;var H=xe(y,gr);(!I(H,f.current,function(S,O){return(S==null?void 0:S.constructor)===Function&&(O==null?void 0:O.constructor)===Function})||j.status!==o.current)&&(p(H),f.current=H,o.current=j.status)}},function(){c.current=!1});return _e(_e({},g(a)),u)},[e,a,u]),d=F.useState(function(){if(l.getWidgetRenderState){var g,y=s.getHelper(),_=s.getWidgetUiState({})[s.getIndexId()];y.state=((g=l.getWidgetSearchParameters)===null||g===void 0?void 0:g.call(l,y.state,{uiState:_}))||y.state;var j=nr(s),H=j.results,S=j.scopedResults,O=l.getWidgetRenderState({helper:y,parent:s,instantSearchInstance:i,results:H,scopedResults:S,state:y.state,renderState:i.renderState,templatesConfig:i.templatesConfig,createURL:s.createURL,searchMetadata:{isSearchStalled:i.status==="stalled"},status:i.status,error:i.error});O.widgetParams;var ze=xe(O,pr);return ze}return{}}),v=yr(d,2),m=v[0],p=v[1];return mr({widget:l,parentIndex:s,props:a,shouldSsr:!!n}),m}export{Tr as E,ar as I,Yt as a,ur as b,Ar as c,ir as d,Ue as e,sr as f,nr as g,vr as h,Sr as i,Hr as n,Qr as u};
