import{r as i,j as t}from"./client-ZKQMN23D.js";import{d as b}from"./index-Cvft0mqj.js";import{l as tt}from"./index.m-DI45-rQC.js";import{u as et}from"./app-Bt98msSn.js";import{A as at}from"./AppBarHeader-Bu_GnhUD.js";import{C as lt}from"./ContentScroll-BWeVEx1a.js";import{C as it}from"./ColorPickerInput-B-O6o-Qw.js";import{L as nt}from"./LanguagePicker-DMYPmKx1.js";import{B as E}from"./Button-Bs2LlykX.js";import{B as ot}from"./Box-CVOB97vC.js";import{P as pt}from"./List-BgSNNkKU.js";import{T as N}from"./Typography-BOH_kjYl.js";import{G as n}from"./Grid-BYUzo7jW.js";import{T as o,F as ct}from"./TextField-CXY6ukfK.js";import{F as B}from"./FormLabel-BgEYUhxt.js";import{I as M,S as H}from"./Select-DstqRMzc.js";import{M as O}from"./MenuItem-BvZfPpYr.js";import{I as c}from"./InputAdornment-C1l6JSIr.js";import"./_commonjsHelpers-BosuxZz1.js";import"./browser-D9eauH0H.js";import"./index-edoyAQHv.js";import"./index-BqRrtboY.js";import"./identifier-DHETMsl0.js";import"./dayjs.min-BIwLhz4I.js";import"./utc-BUuWioZ3.js";import"./extendSxProp-2i1zAAUV.js";import"./ThemeProvider-BQTsL86O.js";import"./useThemeWithoutDefault-BU2aPzft.js";import"./index-BMQyuaGg.js";import"./useSlotProps-O828vP2f.js";import"./useThemeProps-DZ1rqyJn.js";import"./getThemeProps-BL5VHue0.js";import"./useTheme-CLvhDb73.js";import"./Grow--1bk2Oiz.js";import"./ButtonBase-B4crtf6-.js";import"./Close-mNv2SlFn.js";import"./ListItemIcon-CVfiqn-C.js";import"./ListItemText-7JFmWKqR.js";import"./Tooltip-CvPWsRqB.js";import"./Popper-1aVe17Xg.js";import"./GlobalStyles-BW4QefxH.js";import"./Menu-BfV33fk6.js";import"./useFormControl-CO6OogGI.js";import"./usePreviousProps-eB1Ppz6I.js";import"./SwitchBase-3IV-eDJc.js";import"./_baseIsEqual-DkReohVf.js";import"./_baseEach-DKAn15m2.js";import"./cloneDeep-CpVDZSS9.js";import"./map-BSSKY85Z.js";import"./index-D3ylJrlI.js";import"./global-Cavf3q2D.js";import"./FormGroup-BWakBykC.js";import"./FormControlLabel-Do0ozMLQ.js";import"./Stack-DUl2B3cg.js";import"./Checkbox-jThM1nDo.js";const de=({subsiteModel:e,errors:a,is_actives:q,get_collection:V,can:y})=>{var T;const{needSave:S,setNeedSave:U}=et(),[r,A]=i.useState(e.name),[m,W]=i.useState(e.region_id),[u,P]=i.useState(e.aliase_name),[h,p]=i.useState(e.map_url.replace("https://","")),[x,G]=i.useState(e.primary_color),[g,F]=i.useState(e.is_active),[j,C]=i.useState(e.tracking_code.replace("G-","")),[v,k]=i.useState(e.view_id),[s,w]=i.useState([]),[Y,J]=i.useState([]),[f,$]=i.useState(e.facebookURL.replace("https://","")),[_,z]=i.useState(e.youtubeURL.replace("https://","")),[L,D]=i.useState(e.twitterURL.replace("https://","")),[R,K]=i.useState(e.soundcloudURL.replace("https://",""));i.useEffect(()=>{U(r!==e.name||m!==e.region_id||u!==e.aliase_name||h.replace("https://","")!==e.map_url.replace("https://","")||x!==e.primary_color||j.replace("G-","")!==e.tracking_code.replace("G-","")||g!==e.is_active||v!==e.view_id||f.replace("https://","")!==e.facebookURL.replace("https://","")||_.replace("https://","")!==e.youtubeURL.replace("https://","")||L.replace("https://","")!==e.twitterURL.replace("https://","")||R.replace("https://","")!==e.soundcloudURL.replace("https://","")||s.join(",")!==Y.join(",")&&s.length>0)},[U,e,r,m,u,h,g,x,j,v,s,f,L,_,R]);function Q(l){const d=l.startsWith("#")?l:`#${l}`;G(d)}const X=()=>{A(e.name),W(e.region_id),P(e.aliase_name),p(e.map_url.replace("https://","")),G(e.primary_color),F(e.is_active),C(e.tracking_code.replace("G-","")),k(e.view_id),w(e.languages.split(",")),p(e.facebookURL.replace("https://","")),p(e.youtubeURL.replace("https://","")),p(e.twitterURL.replace("https://","")),p(e.soundcloudURL.replace("https://",""))},Z=()=>{U(!1);const l={name:r,region_id:m,aliase_name:u,map_url:h,primary_color:x,is_active:g,tracking_code:j,view_id:v,languages:s,facebookURL:f,youtubeURL:_,twitterURL:L,soundcloudURL:R};b.Inertia.patch(tt("admin.subsites.update",{subsite:e}).toString(),l)};return i.useEffect(()=>{JSON.stringify(a)!=""&&(C(e.tracking_code.replace("G-","")),p(e.map_url.replace("https://","")),k(e.view_id))},[a]),i.useEffect(()=>{if(e&&e.languages){const l=e.languages.split(",");J(l),w(l)}},[e]),t.jsxs(t.Fragment,{children:[t.jsxs(at,{title:"Edit Subsite",children:[t.jsx(E,{variant:"outlined",onClick:X,color:"secondary",disabled:!S,children:"Reset"}),t.jsx(E,{variant:S?"contained":"outlined",onClick:Z,color:"secondary",disabled:!S,children:"Save"})]}),t.jsx(lt,{children:t.jsx(ot,{children:t.jsxs(pt,{sx:{p:2},children:[t.jsx(N,{variant:"body1",color:"warning",children:t.jsx("span",{style:{color:"red"},children:"Fields marked with * are required."})}),t.jsxs(n,{container:!0,spacing:2,children:[t.jsxs(n,{item:!0,xs:12,children:[t.jsx(o,{value:r,onChange:l=>A(l.target.value),label:"Subsite Name*",variant:"outlined",fullWidth:!0}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.name})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsxs(B,{variant:"outlined",fullWidth:!0,children:[t.jsx(M,{children:"Region name*"}),t.jsx(H,{value:m,onChange:l=>W(l.target.value),label:"Region Name",fullWidth:!0,children:Object.entries(V[0]).map(([l,d],I)=>t.jsx(O,{value:l,disabled:!0,children:d},I))})]}),a!=null&&a.region_id?t.jsx("span",{style:{color:"red"},children:"The region name field is required."}):null]}),t.jsxs(n,{item:!0,xs:3,children:[t.jsx(o,{value:u,onChange:l=>P(l.target.value),label:"Aliase Name*",variant:"outlined",fullWidth:!0,disabled:!0}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.aliase_name})]}),t.jsx(n,{item:!0,xs:3,children:t.jsx(o,{value:"."+window.location.hostname,label:"Host name",variant:"outlined",disabled:!0})}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(it,{label:"Primary Color*",color:x,onChange:l=>Q(l)}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.primary_color})]}),((T=y==null?void 0:y.is_active)==null?void 0:T.update)&&t.jsxs(n,{item:!0,xs:6,children:[t.jsxs(B,{variant:"outlined",fullWidth:!0,children:[t.jsx(M,{children:"Region Status*"}),t.jsx(H,{value:g,onChange:l=>F(l.target.value),label:"Region Status",fullWidth:!0,children:Object.entries(q).map(([l,d],I)=>t.jsx(O,{value:l,children:d},I))}),t.jsx(ct,{children:a==null?void 0:a.is_active})]}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.is_active})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(o,{label:"Google Analytics Tracking Code",value:j.replace("G-",""),onChange:l=>C(l.target.value.replace("G-","")),InputProps:{startAdornment:t.jsx(c,{position:"start",children:"G-"})},fullWidth:!0,variant:"outlined"}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.tracking_code})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(o,{label:"Google Analytics Property View Id",value:v,onChange:l=>k(l.target.value),fullWidth:!0,variant:"outlined"}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.view_id})]}),t.jsxs(n,{item:!0,xs:12,children:[t.jsx(o,{value:h.replace("https://",""),onChange:l=>p(l.target.value.replace("https://","")),label:"Map URL",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:t.jsx(c,{position:"start",children:"https://"})}}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.map_url})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(o,{label:"Facebook URL",value:f,onChange:l=>$(l.target.value.replace(/^(https?:\/\/)?/,"")),fullWidth:!0,variant:"outlined",InputProps:{startAdornment:t.jsx(c,{position:"start",children:"https://"})}}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.facebookURL})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(o,{label:"Twitter URL",value:L,onChange:l=>D(l.target.value.replace(/^(https?:\/\/)?/,"")),fullWidth:!0,variant:"outlined",InputProps:{startAdornment:t.jsx(c,{position:"start",children:"https://"})}}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.twitterURL})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(o,{label:"Youtube URL",value:_,onChange:l=>z(l.target.value.replace(/^(https?:\/\/)?/,"")),fullWidth:!0,variant:"outlined",InputProps:{startAdornment:t.jsx(c,{position:"start",children:"https://"})}}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.youtubeURL})]}),t.jsxs(n,{item:!0,xs:6,children:[t.jsx(o,{label:"Soundcloud URL",value:R,onChange:l=>K(l.target.value.replace(/^(https?:\/\/)?/,"")),fullWidth:!0,variant:"outlined",InputProps:{startAdornment:t.jsx(c,{position:"start",children:"https://"})}}),t.jsx("span",{style:{color:"red"},children:a==null?void 0:a.soundcloudURL})]}),t.jsxs(n,{item:!0,xs:12,children:[t.jsx(nt,{onChange:w,initialLanguages:s}),t.jsxs(N,{children:[t.jsx("strong",{children:"Note:"})," Selected languages are automatically assigned to subsite admins."]})]})]})]})})})]})};export{de as default};
